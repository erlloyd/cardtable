(this.webpackJsonpcardtable=this.webpackJsonpcardtable||[]).push([[0],{157:function(e){e.exports=JSON.parse('[{"code":"rhino","name":"Rhino","card_set_type_code":"villain"},{"code":"klaw","name":"Klaw","card_set_type_code":"villain"},{"code":"ultron","name":"Ultron","card_set_type_code":"villain"},{"code":"she_hulk_nemesis","name":"She-Hulk Nemesis","card_set_type_code":"nemesis"},{"code":"iron_man_nemesis","name":"Iron Man Nemesis","card_set_type_code":"nemesis"},{"code":"spider_man_nemesis","name":"Spider-Man Nemesis","card_set_type_code":"nemesis"},{"code":"black_panther_nemesis","name":"Black Panther Nemesis","card_set_type_code":"nemesis"},{"code":"captain_marvel_nemesis","name":"Captain Marvel Nemesis","card_set_type_code":"nemesis"},{"code":"she_hulk","name":"She-Hulk","card_set_type_code":"hero"},{"code":"iron_man","name":"Iron Man","card_set_type_code":"hero"},{"code":"spider_man","name":"Spider-Man","card_set_type_code":"hero"},{"code":"black_panther","name":"Black Panther","card_set_type_code":"hero"},{"code":"captain_marvel","name":"Captain Marvel","card_set_type_code":"hero"},{"code":"bomb_scare","name":"Bomb Scare","card_set_type_code":"modular"},{"code":"standard","name":"Standard","card_set_type_code":"standard"},{"code":"expert","name":"Expert","card_set_type_code":"expert"},{"code":"masters_of_evil","name":"Masters of Evil","card_set_type_code":"modular"},{"code":"under_attack","name":"Under Attack","card_set_type_code":"modular"},{"code":"legions_of_hydra","name":"Legions of Hydra","card_set_type_code":"modular"},{"code":"the_doomsday_chair","name":"The Doomsday Chair","card_set_type_code":"modular"},{"code":"risky_business","name":"Risky Business","card_set_type_code":"villain"},{"code":"mutagen_formula","name":"Mutagen Formula","card_set_type_code":"villain"},{"code":"goblin_gimmicks","name":"Goblin Gimmicks","card_set_type_code":"modular"},{"code":"running_interference","name":"Running Interference","card_set_type_code":"modular"},{"code":"power_drain","name":"Power Drain","card_set_type_code":"modular"},{"code":"a_mess_of_things","name":"A Mess of Things","card_set_type_code":"modular"},{"code":"captain_america","name":"Captain America","card_set_type_code":"hero"},{"code":"captain_america_nemesis","name":"Captain America Nemesis","card_set_type_code":"nemesis"},{"code":"ms_marvel","name":"Ms. Marvel","card_set_type_code":"hero"},{"code":"ms_marvel_nemesis","name":"Ms. Marvel Nemesis","card_set_type_code":"nemesis"},{"code":"thor","name":"Thor","card_set_type_code":"hero"},{"code":"thor_nemesis","name":"Thor Nemesis","card_set_type_code":"nemesis"},{"code":"wrecking_crew","name":"Wrecking Crew","card_set_type_code":"villain"},{"code":"piledriver","name":"Piledriver","card_set_type_code":"villain"},{"code":"wrecker","name":"Wrecker","card_set_type_code":"villain"},{"code":"thunderball","name":"Thunderball","card_set_type_code":"villain"},{"code":"bulldozer","name":"Bulldozer","card_set_type_code":"villain"},{"code":"black_widow","name":"Black Widow","card_set_type_code":"hero"},{"code":"black_widow_nemesis","name":"Black Widow Nemesis","card_set_type_code":"nemesis"},{"code":"doctor_strange","name":"Doctor Strange","card_set_type_code":"hero"},{"code":"invocation","name":"Invocation","card_set_type_code":"hero"},{"code":"doctor_strange_nemesis","name":"Doctor Strange Nemesis","card_set_type_code":"nemesis"},{"code":"hulk","name":"Hulk","card_set_type_code":"hero"},{"code":"hulk_nemesis","name":"Hulk Nemesis","card_set_type_code":"nemesis"},{"code":"kree_fanatic","name":"Kree Fanatic","card_set_type_code":"modular"},{"code":"hawkeye","name":"Hawkeye","card_set_type_code":"hero"},{"code":"hawkeye_nemesis","name":"Hawkeye Nemesis","card_set_type_code":"nemesis"},{"code":"spider_woman","name":"Spider-Woman","card_set_type_code":"hero"},{"code":"spider_woman_nemesis","name":"Spider-Woman Nemesis","card_set_type_code":"nemesis"},{"code":"crossbones","name":"Crossbones","card_set_type_code":"villain"},{"code":"exper_weapon","name":"Experimental Weapons","card_set_type_code":"modular"},{"code":"absorbing_man","name":"Absorbing Man","card_set_type_code":"villain"},{"code":"taskmaster","name":"Taskmaster","card_set_type_code":"villain"},{"code":"zola","name":"Zola","card_set_type_code":"villain"},{"code":"red_skull","name":"Red Skull","card_set_type_code":"villain"},{"code":"hydra_assault","name":"Hydra Assault","card_set_type_code":"modular"},{"code":"weap_master","name":"Weapon Master","card_set_type_code":"modular"},{"code":"hydra_patrol","name":"Hydra Patrol","card_set_type_code":"modular"},{"code":"hydra_camp","name":"Hydra Campaign","card_set_type_code":"modular"},{"code":"expcamp","name":"Expert Campaign","card_set_type_code":"modular"},{"code":"kang","name":"Kang","card_set_type_code":"villain"},{"code":"temporal","name":"Temporal","card_set_type_code":"modular"},{"code":"exp_kang","name":"Expert Kang","card_set_type_code":"modular"},{"code":"anachronauts","name":"Anachronauts","card_set_type_code":"modular"},{"code":"mot","name":"Master of Time","card_set_type_code":"modular"},{"code":"ant","name":"Ant-Man","card_set_type_code":"hero"},{"code":"ant_nemesis","name":"Ant-Man Nemesis","card_set_type_code":"nemesis"},{"code":"wsp","name":"Wasp","card_set_type_code":"hero"},{"code":"wsp_nemesis","name":"Wasp Nemesis","card_set_type_code":"nemesis"},{"code":"qsv","name":"Quicksilver","card_set_type_code":"hero"},{"code":"qsv_nemesis","name":"Quicksilver Nemesis","card_set_type_code":"nemesis"},{"code":"scw","name":"Scarlet Witch","card_set_type_code":"hero"},{"code":"scw_nemesis","name":"Scarlet Witch Nemesis","card_set_type_code":"nemesis"},{"code":"groot","name":"Groot","card_set_type_code":"hero"},{"code":"groot_nemesis","name":"Groot Nemesis","card_set_type_code":"nemesis"},{"code":"rocket","name":"Rocket Raccoon","card_set_type_code":"hero"},{"code":"rocket_nemesis","name":"Rocket Raccoon Nemesis","card_set_type_code":"nemesis"},{"code":"brotherhood_of_badoon","name":"Brotherhood of Badoon","card_set_type_code":"villain"},{"code":"ship_command","name":"Ship Command","card_set_type_code":"modular"},{"code":"band_of_badoon","name":"Band of Badoon","card_set_type_code":"modular"},{"code":"stld","name":"Star-Lord","card_set_type_code":"hero"},{"code":"stld_nemesis","name":"Star-Lord Nemesis","card_set_type_code":"nemesis"},{"code":"gam","name":"Gamora","card_set_type_code":"hero"},{"code":"gam_nemesis","name":"Gamora Nemesis","card_set_type_code":"nemesis"},{"code":"drax","name":"Drax","card_set_type_code":"hero"},{"code":"drax_nemesis","name":"Drax Nemesis","card_set_type_code":"nemesis"},{"code":"vnm","name":"Venom","card_set_type_code":"hero"},{"code":"vnm_nemesis","name":"Venom Nemesis","card_set_type_code":"nemesis"},{"code":"the_market","name":"The Market","card_set_type_code":"modular"},{"code":"challenge","name":"Challenge","card_set_type_code":"modular"},{"code":"badoon_headhunter","name":"Badoon Headhunter","card_set_type_code":"modular"},{"code":"brotherhood_of_badoon","name":"Brotherhood Of Badoon","card_set_type_code":"modular"},{"code":"collector1","name":"Collector 1","card_set_type_code":"villain"},{"code":"collector2","name":"Collector 2","card_set_type_code":"villain"},{"code":"nebula","name":"Nebula","card_set_type_code":"villain"},{"code":"ronan","name":"Ronan","card_set_type_code":"villain"},{"code":"band_of_badoon","name":"Band Of Badoon","card_set_type_code":"modular"},{"code":"galactic_artifacts","name":"Galactic Artifacts","card_set_type_code":"modular"},{"code":"kree_militant","name":"Kree Militant","card_set_type_code":"modular"},{"code":"menagerie_medley","name":"Menagerie Medley","card_set_type_code":"modular"},{"code":"space_pirates","name":"Space Pirates","card_set_type_code":"modular"},{"code":"ship_command","name":"Ship Command","card_set_type_code":"modular"},{"code":"power_stone","name":"Power Stone","card_set_type_code":"modular"},{"code":"spectrum","name":"Spectrum","card_set_type_code":"hero"},{"code":"spectrum_nemesis","name":"Spectrum Nemesis","card_set_type_code":"nemesis"},{"code":"adam_warlock","name":"Adam Warlock","card_set_type_code":"hero"},{"code":"adam_warlock_nemesis","name":"Adam Warlock Nemesis","card_set_type_code":"nemesis"},{"code":"ebony_maw","name":"Ebony Maw","card_set_type_code":"villain"},{"code":"armies_of_titan","name":"Armies of Titan","card_set_type_code":"modular"},{"code":"black_order","name":"The Black Order","card_set_type_code":"modular"},{"code":"tower_defense","name":"Tower Defense","card_set_type_code":"villain"},{"code":"thanos","name":"Thanos","card_set_type_code":"villain"},{"code":"children_of_thanos","name":"Children of Thanos","card_set_type_code":"modular"},{"code":"infinity_gauntlet","name":"Infinity Gauntlet","card_set_type_code":"modular"},{"code":"hela","name":"Hela","card_set_type_code":"villain"},{"code":"legions_of_hel","name":"Legions of Hel","card_set_type_code":"modular"},{"code":"frost_giants","name":"Frost Giants","card_set_type_code":"modular"},{"code":"loki","name":"Loki","card_set_type_code":"villain"},{"code":"enchantress","name":"Enchantress","card_set_type_code":"modular"},{"code":"mts_campaign","name":"Mad Titan\'s Shadow Campaign","card_set_type_code":"modular"}]')},195:function(e,o,t){},222:function(e,o){function t(e){var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}t.keys=function(){return[]},t.resolve=t,e.exports=t,t.id=222},245:function(e,o,t){},247:function(e,o,t){},248:function(e,o,t){},253:function(e,o,t){},254:function(e,o,t){},255:function(e,o,t){},256:function(e,o,t){"use strict";t.r(o);var r=t(3),a=t(0),n=t.n(a),s=t(27),i=t.n(s),d=(t(195),t(29)),c=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function l(e,o){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;null!=t&&(t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),o&&o.onUpdate&&o.onUpdate(e)):(console.log("Content is cached for offline use."),o&&o.onSuccess&&o.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var u,h=t(156),p=t.n(h),m=t(24),f=t(117),g=t(56),v=t.n(g),j=t(297),b=Object(j.a)();!function(e){e.MarvelChampions="marvelchampions",e.LordOfTheRingsLivingCardGame="lotrlcg"}(u||(u={}));var C,T=["red","cyan","green","blue","magenta","yellow"],y=t(21),w=function(e){try{var o,t=localStorage.getItem(e);if(null===t)return{};var r=JSON.parse(t||"{}");return null!==(o=r.present)&&void 0!==o?o:r}catch(a){return console.error("problem parsing"),{}}},S=new URLSearchParams(window.location.search).get("gameType"),k=w("game"),_={activeDataType:null!==(C=null!==S&&void 0!==S?S:k.activeGameType)&&void 0!==C?C:u.MarvelChampions,data:{}},x=t(157),O=t(99),P=Object(m.b)("resetAction"),M=Object(m.b)("receiveRemoteGameState"),I=Object(m.b)("verifyRemoteGameState"),N=t(18),D=new URLSearchParams(window.location.search).get("gameType"),R=D?{activeGameType:D}:w("game");R.playerColors={},R.playerColors[b]="red",R.peerId="",R.previewCard=null,R.menuPreviewCardJsonId=null,R.radialMenuPosition=null;var E,A,F=Object(N.a)(Object(N.a)({},{playerColors:{},stageZoom:{x:.5,y:.5},stagePosition:{x:0,y:0},peerId:"",previewCard:null,menuPreviewCardJsonId:null,activeGameType:null,radialMenuPosition:null}),R),L=Object(m.d)({name:"game",initialState:F,reducers:{updateZoom:function(e,o){return e.stageZoom=o.payload,e},updatePosition:function(e,o){return e.stagePosition=o.payload,e},connectToRemoteGame:function(){},setPlayerColor:function(e,o){e.playerColors[o.payload.ref]=o.payload.color},setPeerId:function(e,o){e.peerId=o.payload},requestResync:function(){},setPreviewCardId:function(e,o){e.previewCard?e.previewCard.id!==o.payload&&(e.previewCard.id=o.payload):e.previewCard={id:o.payload}},clearPreviewCard:function(e){e.previewCard=null},setMenuPreviewCardJsonId:function(e,o){e.menuPreviewCardJsonId=o.payload},clearMenuPreviewCardJsonId:function(e){e.menuPreviewCardJsonId=null},updateActiveGameType:function(e,o){e.activeGameType=o.payload},quitGame:function(e){e.activeGameType=null},showRadialMenuAtPosition:function(e,o){e.radialMenuPosition=o.payload},hideRadialMenu:function(e){e.radialMenuPosition=null}},extraReducers:function(e){e.addCase(M,(function(e,o){e.activeGameType=o.payload.game.activeGameType})),e.addCase(P,(function(e,o){e.stagePosition={x:0,y:0},e.stageZoom={x:.5,y:.5},e.previewCard=null}))}}),B=L.actions,G=B.updateZoom,Q=B.updatePosition,W=B.connectToRemoteGame,H=B.setPlayerColor,U=B.setPeerId,z=B.requestResync,V=B.setPreviewCardId,K=B.clearPreviewCard,J=B.setMenuPreviewCardJsonId,q=B.clearMenuPreviewCardJsonId,Z=B.updateActiveGameType,Y=B.quitGame,X=B.showRadialMenuAtPosition,$=B.hideRadialMenu,ee=L.reducer,oe=function(e){var o,t,r;return{code:e.code,name:e.name,images:null,octgnId:null!==(o=e.octgn_id)&&void 0!==o?o:null,quantity:e.quantity,doubleSided:!!e.double_sided,backLink:null!==(t=e.back_link)&&void 0!==t?t:null,typeCode:e.type_code,subTypeCode:null,extraInfo:{setCode:null!==(r=e.set_code)&&void 0!==r?r:null,packCode:e.pack_code,factionCode:e.faction_code}}},te=function(e){return function(o){var t,r,a,n,s,i=null===(t=o.Back)||void 0===t?void 0:t.ImagePath;if(o.Back&&!o.Back.ImagePath){var d=o.Front.ImagePath,c=d.split(".").slice(0,-1).join(".");"A"!==c[c.length-1]?console.log("No Non-B Back Image Path for ".concat(o.Slug," from ").concat(o.CardSet)):i=d.replaceAll("A.","B.")}return{code:e?o.Slug:o.RingsDbCardId,name:o.Title,images:{front:o.Front.ImagePath,back:null!==(r=i)&&void 0!==r?r:null},octgnId:null!==(a=o.OctgnGuid)&&void 0!==a?a:null,quantity:null!==(n=o.Quantity)&&void 0!==n?n:1,doubleSided:!!o.Back,backLink:null,typeCode:o.CardType,subTypeCode:o.CardSubType,extraInfo:{setCode:null!==(s=o.CardSet)&&void 0!==s?s:null,packCode:"TODO - lotr",factionCode:e?"encounter":"player"}}}},re=function(e,o){return function(t){var r=e?t.location.entities:t.location.encounterEntities;"0"===t.card.code[0]&&"0"===t.card.code[1]||(r[t.card.code]&&o&&console.error("Found multiple cards with code "+t.card.code+" "+t.card.name+" "+t.card.extraInfo.setCode+" Existing card is "+r[t.card.code].name+" "+r[t.card.code].extraInfo.setCode),r[t.card.code]=t.card)}},ae=Object(m.d)({name:"cardsData",initialState:_,reducers:{loadCardsData:function(e){e.data={};var o=e.data[u.MarvelChampions];return o?o.setData={}:(e.data[u.MarvelChampions]={entities:{},encounterEntities:{},setData:{}},o=e.data[u.MarvelChampions]),x.forEach((function(e){o&&(o.setData[e.code]={name:e.name,setTypeCode:e.card_set_type_code,cardsInSet:[]})})),(o=e.data[u.LordOfTheRingsLivingCardGame])?o.setData={}:(e.data[u.LordOfTheRingsLivingCardGame]={entities:{},encounterEntities:{},setData:{}},o=e.data[u.LordOfTheRingsLivingCardGame]),O.forEach((function(e){o&&(o.setData[e.Slug]={name:e.Title,setTypeCode:e.Product,cardsInSet:[]})})),e},loadCardsDataForPack:function(e,o){if(e.data[o.payload.packType]||(e.data[o.payload.packType]={entities:{},encounterEntities:{},setData:{}}),o.payload.packType===u.MarvelChampions){var t=!o.payload.pack_code.includes("_encounter");o.payload.pack.map(oe).map((function(t){return{location:e.data[o.payload.packType],card:t}})).forEach(re(t,!0))}else if(o.payload.packType===u.LordOfTheRingsLivingCardGame){var r=o.payload.pack;r.cards||console.log(r),r.cards.map(te(!1)).map((function(t){return{location:e.data[o.payload.packType],card:t}})).forEach(re(!0,!0))}return e},loadCardsForEncounterSet:function(e,o){var t=e.data[u.LordOfTheRingsLivingCardGame],r=null===t||void 0===t?void 0:t.setData[o.payload.setCode];if(o.payload.cards.map)return o.payload.cards.map(te(!0)).map((function(o){return{location:e.data[u.LordOfTheRingsLivingCardGame],card:o}})).forEach(re(!1,!1)),r&&(r.cardsInSet=r.cardsInSet.concat(o.payload.cards.filter((function(e){return-1===e.CardSet.toLocaleLowerCase().indexOf("nightmare")})).map((function(e){return{code:e.Slug,quantity:e.Quantity}})))),e;console.log("No cards found for scenario "+o.payload.setCode)}},extraReducers:function(e){e.addCase(M,(function(e,o){var t;e.activeDataType=null!==(t=o.payload.game.activeGameType)&&void 0!==t?t:u.MarvelChampions})),e.addCase(Z,(function(e,o){e.activeDataType=o.payload}))}}),ne=ae.actions,se=ne.loadCardsData,ie=ne.loadCardsDataForPack,de=ne.loadCardsForEncounterSet,ce=ae.reducer,le=Object(m.b)("addCardStackWithId"),ue=Object(m.b)("pullCardOutOfCardStackWithId"),he=Object(m.b)("drawCardsOutOfCardStackWithIds"),pe=Object(m.b)("startCardMoveWithSplitStackId"),me=Object(m.b)("replaceCardStack"),fe=Object(m.b)("setStackShuffling"),ge=Object(m.b)("createDeckFromTextFileWithIds"),ve=t(39),je=t(116),be=t.n(je),Ce=t(35),Te=209,ye=150,we=418,Se=300;!function(e){e.Stunned="stunned",e.Confused="confused",e.Tough="tough"}(E||(E={})),function(e){e.Damage="damage",e.Threat="threat",e.Generic="generic"}(A||(A={}));var ke,_e,xe=function(e,o){var t=e.x-o.x,r=e.y-o.y;return Math.sqrt(t*t+r*r)},Oe=function(e,o){return{x:(e.x+o.x)/2,y:(e.y+o.y)/2}},Pe=t(34),Me=t.n(Pe),Ie=t(47),Ne=t(79),De=t.n(Ne),Re=t(94),Ee=function(e){var o;return null!==(o=e.data[e.activeDataType])&&void 0!==o?o:{entities:{},encounterEntities:{},setData:{}}},Ae=function(e){return e.cardsData},Fe=Object(Re.a)(Ae,(function(e){var o=Ee(e);return Object(N.a)(Object(N.a)({},o.entities),o.encounterEntities)})),Le=Object(Re.a)(Ae,(function(e){return Ee(e).entities})),Be=Object(Re.a)(Ae,(function(e){var o=Ee(e),t={};return Object.values(o.entities).forEach((function(e){"hero"===e.typeCode&&(t[e.name]=e)})),t})),Ge=Object(Re.a)(Ae,(function(e){var o=Ee(e),t={};return Object.values(o.entities).forEach((function(e){"hero"!==e.typeCode&&(t[e.name]=e)})),t})),Qe=Object(Re.a)(Ae,(function(e){return Ee(e).encounterEntities})),We=Object(Re.a)(Ae,(function(e){return Ee(e).setData})),He=Object(Re.a)(We,Qe,(function(e,o){return Object.entries(e).map((function(e){var t=Object(y.a)(e,2),r=t[0],a=t[1];return{setCode:r,setData:a,cards:a.cardsInSet.map((function(e){return o[e.code]}))}}))})),Ue=Object(Re.a)(Qe,Le,We,(function(e,o,t){var r={},a=Object.values(o).filter((function(e){return"campaign"===e.extraInfo.factionCode})).sort((function(e,o){return e.code<o.code?-1:e.code>o.code?1:0}));return Object.values(e).sort((function(e,o){return e.code<o.code?-1:e.code>o.code?1:0})).concat(a).forEach((function(e){var o=e.extraInfo.setCode||"unknown";r[o]?r[o].push(e):r[o]=[e]})),Object.entries(r).map((function(e){var o=Object(y.a)(e,2),r=o[0],a=o[1];return{setCode:r,setData:t[r],cards:a}})).filter((function(e){return"nemesis"!==e.setData.setTypeCode&&"hero"!==e.setData.setTypeCode})).sort((function(e,o){return e.setData.name>o.setData.name?1:-1}))})),ze=function(e){return e.liveState.present.cards},Ve=Object(Re.a)(ze,(function(e){return e.cards.reduce((function(e,o){return e[o.id]=o,e}),{})})),Ke=function(e){return e.liveState.present.cards.panMode},Je=function(e){return e.liveState.present.cards.multiselectMode},qe=Object(Re.a)(ze,(function(e){var o={};return Object.entries(e.dropTargetCards).forEach((function(e){var t=Object(y.a)(e,2),r=t[0],a=t[1];a&&(o[a.id]={ownerRef:r,card:a})})),o})),Ze={bkw:"07",cap:"04",drs:"08",hlk:"09",trors:"10",twc:"03"},Ye={doctor_strange:[{jsonId:"09032"},{jsonId:"09033"},{jsonId:"09034"},{jsonId:"09035"},{jsonId:"09036"}],ant:[{jsonId:"12001c"}],wsp:[{jsonId:"13001c"}]},Xe=t(158),$e=t.n(Xe),eo=t(159),oo=t.n(eo),to=t(160),ro=t.n(to),ao={marvelchampions:{deckSite:"marvelcdb.com",decklistApi:"https://marvelcdb.com/api/public/decklist/",encounterUiName:"Encounter Set",backgroundImageLocation:"/images/table/background_marvelchampions.png",modifiers:[],tokens:{stunned:{tokenType:E.Stunned,touchMenuLetter:null,touchMenuIcon:Object(r.jsx)($e.a,{fontSize:"large"}),menuText:"Stun",menuRemoveText:"Remove Stun",imagePath:"/images/standard/stunned.png"},confused:{tokenType:E.Confused,touchMenuLetter:null,touchMenuIcon:Object(r.jsx)(oo.a,{fontSize:"large"}),menuText:"Confuse",menuRemoveText:"Remove Confuse",imagePath:"/images/standard/confused.png"},tough:{tokenType:E.Tough,touchMenuLetter:null,touchMenuIcon:Object(r.jsx)(ro.a,{fontSize:"large"}),menuText:"Tough",menuRemoveText:"Remove Tough",imagePath:"/images/standard/tough.png"},damage:{counterTokenType:A.Damage,isNumeric:!0,touchMenuLetter:"Dmg",touchMenuIcon:null,menuText:"Set Damage",imagePath:"/images/standard/damage.png"},threat:{counterTokenType:A.Threat,isNumeric:!0,touchMenuLetter:"Thr",touchMenuIcon:null,menuText:"Set Threat",imagePath:"/images/standard/threat.png"},generic:{counterTokenType:A.Generic,isNumeric:!0,touchMenuLetter:"Gen",touchMenuIcon:null,menuText:"Set Generic Tokens",imagePath:"/images/standard/generic_counter.png"}}},lotrlcg:{deckSite:"ringsdb.com",decklistApi:"https://ringsdb.com/api/public/decklist/",encounterUiName:"Scenario",backgroundImageLocation:"/images/table/background_lotrlcg.jpg",modifiers:[{attributeId:"threat",attributeName:"Threat",icon:"/images/standard/lotr/threat.png",slot:1},{attributeId:"willpower",attributeName:"Willpower",icon:"/images/standard/lotr/willpower.png",slot:2},{attributeId:"attack",attributeName:"Attack",icon:"/images/standard/lotr/attack.png",slot:3},{attributeId:"defense",attributeName:"Defense",icon:"/images/standard/lotr/defense.png",slot:4},{attributeId:"hitpoints",attributeName:"Hit Points",icon:"/images/standard/lotr/hitpoints.png",slot:5}],tokens:{stunned:{tokenType:E.Stunned,touchMenuLetter:"Q",touchMenuIcon:null,menuText:"Quest",menuRemoveText:"Remove From Quest",imagePath:"/images/standard/quest.png"},confused:null,tough:null,damage:{counterTokenType:A.Damage,isNumeric:!0,touchMenuLetter:"Dmg",touchMenuIcon:null,menuText:"Set Damage",imagePath:"/images/standard/damage_lotr.png"},threat:{counterTokenType:A.Threat,isNumeric:!0,touchMenuLetter:"Prg",touchMenuIcon:null,menuText:"Set Progress",imagePath:"/images/standard/progress.png"},generic:{counterTokenType:A.Generic,isNumeric:!0,touchMenuLetter:"Res",touchMenuIcon:null,menuText:"Set Resource Tokens",imagePath:"/images/standard/resource.png"}}}},no=function(e){return function(o,t){var r=ze(t());(e?[r.cards.find((function(o){return o.id===e}))]:r.cards.filter((function(e){return e.selected&&e.controlledBy===b}))).filter((function(e){return!!e&&e.cardStack.length>1})).forEach((function(e){o(fe({id:e.id,shuffling:!0}));var t=uo(e.cardStack);o(me({id:e.id,newStack:t})),setTimeout((function(){o(fe({id:e.id,shuffling:!1}))}))}))}},so=function(e){return function(o){var t=Array.from({length:e.numberToDraw}).map((function(e){return Object(j.a)()})),r=Object(N.a)(Object(N.a)({},e),{},{idsToUse:t});o(he(r))}},io=Object(m.c)("decklist/fetchByIdStatus",function(){var e=Object(Ie.a)(Me.a.mark((function e(o,t){var r,a;return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,De.a.get("".concat(ao[o.gameType].decklistApi).concat(o.decklistId));case 2:r=e.sent,a=t.getState(),e.t0=o.gameType,e.next=e.t0===u.MarvelChampions?7:e.t0===u.LordOfTheRingsLivingCardGame?8:9;break;case 7:return e.abrupt("return",co(r,a,o));case 8:return e.abrupt("return",lo(r,a,o));case 9:case"end":return e.stop()}}),e)})));return function(o,t){return e.apply(this,arguments)}}()),co=function(e,o,t){var r,a=Le(o)[e.data.investigator_code].extraInfo.setCode,n=Qe(o),s=[];Object.entries(n).filter((function(e){var o=Object(y.a)(e,2),t=(o[0],o[1]);return(t.extraInfo.setCode==="".concat(a)||t.extraInfo.setCode==="".concat(a,"_nemesis"))&&"obligation"===t.typeCode})).forEach((function(e){var o=Object(y.a)(e,2),t=o[0],r=o[1];s=s.concat(Array.from({length:r.quantity}).map((function(e){return t})))}));var i=Object.values(n).filter((function(e){return e.extraInfo.setCode==="".concat(a,"_nemesis")&&"obligation"!==e.typeCode})),d=[];i.forEach((function(e){d=d.concat(Array.from({length:e.quantity}).map((function(o){return e.code})))}));var c=null!==(r=Ye[null!==a&&void 0!==a?a:""])&&void 0!==r?r:[];return{position:t.position,heroId:Object(j.a)(),data:e.data,dataId:Object(j.a)(),extraHeroCards:c,relatedEncounterDeck:d,encounterDeckId:Object(j.a)(),relatedObligationDeck:s,obligationDeckId:Object(j.a)()}},lo=function(e,o,t){var r=Le(o),a=[];Object.entries(e.data.heroes).forEach((function(e){var o=Object(y.a)(e,2),t=o[0],r=o[1],n=Array.from(Array(r).keys()).map((function(){return{jsonId:t}}));a=a.concat(n)}));var n={};return Object.entries(e.data.slots).forEach((function(e){var o=Object(y.a)(e,2),t=o[0],a=o[1],s=r[t];if(!s)throw new Error("Couldn't find card data for ".concat(t));"Hero"!==s.typeCode&&(n[t]=a)})),e.data.slots=n,{position:t.position,heroId:Object(j.a)(),data:e.data,dataId:Object(j.a)(),extraHeroCards:a,relatedEncounterDeck:[],encounterDeckId:Object(j.a)(),relatedObligationDeck:[],obligationDeckId:Object(j.a)()}},uo=function(e){for(var o,t,r=JSON.parse(JSON.stringify(e)),a=r.length;0!==a;)t=Math.floor(Math.random()*a),o=r[a-=1],r[a]=r[t],r[t]=o;return r},ho=t(65),po=new URLSearchParams(window.location.search).get("cards"),mo=(po?{cards:JSON.parse(ho.a.uncrush(po))}:null)||(null!==(ke=null===(_e=w("liveState"))||void 0===_e?void 0:_e.cards)&&void 0!==ke?ke:{});mo.cards&&mo.cards.forEach((function(e){e.controlledBy="",e.selected=!1,e.shuffling=!1,e.modifiers||(e.modifiers={})})),mo.attachTargetCards={},mo.dropTargetCards={},mo.ghostCards=[],mo.outOfSyncWithRemote=!1;var fo,go,vo,jo=Object(N.a)(Object(N.a)({},{outOfSyncWithRemote:!1,cards:[],ghostCards:[],dropTargetCards:{},attachTargetCards:{},panMode:!0,multiselectMode:!1}),mo),bo=function(e,o){return e.cards.find((function(e){return e.id===o}))},Co=function(e,o,t,r){var a=bo(e,o);!a||""!==a.controlledBy&&a.controlledBy!==t||r(a)},To=function(e,o,t){e.cards.filter((function(e){return e.selected&&e.controlledBy===o})).forEach((function(e){return t(e)}))},yo=function(e,o){e.cards.filter((function(e){return!e.selected})).forEach((function(e){return o(e)}))},wo=function(e,o){for(var t={x:0,y:0},r=!0,a=function(a){var n=o.x+50*(a+1),s=o.y-50*(a+1);t={x:n,y:s},r=!!e.cards.find((function(e){return e.x===n&&e.y===s}))},n=0;r;n++)a(n);return t},So=function(e,o){e.cards.filter((function(e){return""===e.controlledBy||e.controlledBy===o.ACTOR_REF})).forEach((function(e){e.selected=!1,e.controlledBy=""}))},ko=Object(m.d)({name:"cards",initialState:jo,reducers:{selectCard:function(e,o){o.payload.unselectOtherCards&&So(e,o),Co(e,o.payload.id,o.ACTOR_REF,(function(e){e.selected=!0,e.controlledBy=o.ACTOR_REF}))},unselectCard:function(e,o){Co(e,o.payload,o.ACTOR_REF,(function(e){e.selected=!1,e.controlledBy=""}))},toggleSelectCard:function(e,o){Co(e,o.payload,o.ACTOR_REF,(function(e){e.selected=!e.selected,e.selected?e.controlledBy=o.ACTOR_REF:e.controlledBy=""}))},exhaustCard:function(e,o){e.cards.filter((function(e){var t;return e.controlledBy===o.ACTOR_REF&&(e.id===(null!==(t=o.payload)&&void 0!==t?t:"")||e.selected)})).forEach((function(e){e.exhausted=!e.exhausted}))},cardMove:function(e,o){var t,r,a,n,s=[],i=null;e.cards.filter((function(e){return e.id===o.payload.id||e.selected&&e.controlledBy===o.ACTOR_REF})).forEach((function(e){e.id===o.payload.id&&(i=e),e.x+=o.payload.dx,e.y+=o.payload.dy,s.push(e)}));var d=[];i&&i.controlledBy===o.ACTOR_REF&&yo(e,(function(e){var o=xe({x:e.x,y:e.y},i?{x:i.x,y:i.y}:{x:0,y:0});o<30&&d.push({distance:o,card:e})})),e.dropTargetCards[o.ACTOR_REF]=null!==(t=null===(r=d.sort((function(e,o){return e.distance-o.distance}))[0])||void 0===r?void 0:r.card)&&void 0!==t?t:null;var c=[];i&&i.controlledBy===o.ACTOR_REF&&yo(e,(function(e){var o,t,r,a,n=xe(i?{x:i.x,y:i.y}:{x:0,y:0},{x:e.x,y:e.y});n<150&&n>50&&e.x<(null!==(o=null===(t=i)||void 0===t?void 0:t.x)&&void 0!==o?o:0)&&e.y>(null!==(r=null===(a=i)||void 0===a?void 0:a.y)&&void 0!==r?r:0)&&c.push({distance:n,card:e})})),e.attachTargetCards[o.ACTOR_REF]=null!==(a=null===(n=c.sort((function(e,o){return e.distance-o.distance}))[0])||void 0===n?void 0:n.card)&&void 0!==a?a:null;var l=e.attachTargetCards[o.ACTOR_REF];if(l){var u=wo(e,l);if(!e.ghostCards.find((function(e){return e.x===u.x&&e.y===u.y&&e.cardStack.length>0&&"-1"===e.cardStack[0].jsonId}))){var h=JSON.parse(JSON.stringify(l));h.id=Object(j.a)(),h.x=u.x,h.y=u.y,h.cardStack=[{jsonId:"-1"}],e.ghostCards.push(h)}}else e.ghostCards=e.ghostCards.filter((function(e){return e.cardStack.length>0&&"-1"!==e.cardStack[0].jsonId}));s.forEach((function(o){e.cards.push(e.cards.splice(e.cards.indexOf(o),1)[0])}))},endCardMove:function(e,o){var t=[],r=[];e.cards.filter((function(e){return e.id===o.payload||e.selected&&e.controlledBy===o.ACTOR_REF})).forEach((function(a){a.dragging=!1,e.attachTargetCards[o.ACTOR_REF]?r.push(a):e.dropTargetCards[o.ACTOR_REF]&&(t=t.concat(a.cardStack))}));var a=e.attachTargetCards[o.ACTOR_REF];if(a){var n=wo(e,a);r.forEach((function(o,t){o.x=n.x+50*t,o.y=n.y-50*t,e.cards.unshift(e.cards.splice(e.cards.indexOf(o),1)[0])}))}else if(e.dropTargetCards[o.ACTOR_REF]){e.cards=e.cards.filter((function(e){return!(e.id===o.payload||e.selected&&e.controlledBy===o.ACTOR_REF)}));var s=e.cards.find((function(t){var r;return t.id===(null===(r=e.dropTargetCards[o.ACTOR_REF])||void 0===r?void 0:r.id)}));s&&t.length>0&&(s.cardStack=t.concat(s.cardStack))}e.ghostCards=[],e.dropTargetCards[o.ACTOR_REF]=null,e.attachTargetCards[o.ACTOR_REF]=null},selectMultipleCards:function(e,o){o.payload.unselectOtherCards&&So(e,o),o.payload.ids.map((function(o){return e.cards.find((function(e){return e.id===o}))})).forEach((function(e){!e||""!==e.controlledBy&&e.controlledBy!==o.ACTOR_REF||(e.selected=!0,e.controlledBy=o.ACTOR_REF)}))},unselectAllCards:So,togglePanMode:function(e){e.panMode=!e.panMode},toggleMultiselectMode:function(e){e.multiselectMode=!e.multiselectMode},flipCards:function(e,o){e.cards.filter((function(e){return e.selected&&(""===e.controlledBy||e.controlledBy===o.ACTOR_REF)})).forEach((function(e){e.faceup=!e.faceup,e.cardStack=e.cardStack.reverse()}))},resetCards:function(e){e.cards=[]},toggleToken:function(e,o){To(e,o.ACTOR_REF,(function(e){void 0!==o.payload.value?e.statusTokens[o.payload.tokenType]=o.payload.value:e.statusTokens[o.payload.tokenType]=!e.statusTokens[o.payload.tokenType]}))},adjustCounterToken:function(e,o){e.cards.filter((function(e){return!!o.payload.id&&o.payload.id===e.id||e.selected&&e.controlledBy===o.ACTOR_REF})).forEach((function(e){void 0!==o.payload.value?e.counterTokens[o.payload.tokenType]=o.payload.value:void 0!==o.payload.delta&&(e.counterTokens[o.payload.tokenType]+=o.payload.delta),e.counterTokens[o.payload.tokenType]<0&&(e.counterTokens[o.payload.tokenType]=0)}))},adjustModifier:function(e,o){e.cards.filter((function(e){return!!o.payload.id&&o.payload.id===e.id||e.selected&&e.controlledBy===o.ACTOR_REF})).forEach((function(e){void 0!==o.payload.value?e.modifiers[o.payload.modifierId]=o.payload.value:void 0!==o.payload.delta&&(void 0===e.modifiers[o.payload.modifierId]&&(e.modifiers[o.payload.modifierId]=0),e.modifiers[o.payload.modifierId]+=o.payload.delta)}))},clearAllModifiers:function(e,o){e.cards.filter((function(e){return!!o.payload.id&&o.payload.id===e.id||e.selected&&e.controlledBy===o.ACTOR_REF})).forEach((function(e){e.modifiers={}}))},clearCardTokens:function(e,o){e.cards.filter((function(e){var t;return e.controlledBy===o.ACTOR_REF&&(e.id===(null!==(t=o.payload)&&void 0!==t?t:"")||e.selected)})).forEach((function(e){e.statusTokens={tough:!1,stunned:!1,confused:!1},e.counterTokens={damage:0,threat:0,generic:0},e.modifiers={}}))}},extraReducers:function(e){e.addCase(M,(function(e,o){e.cards=o.payload.liveState.present.cards.cards,e.ghostCards=o.payload.liveState.present.cards.ghostCards})),e.addCase(I,(function(e,o){var t;e.outOfSyncWithRemote=!(be()(null===(t=Object(Ce.f)(e.cards))||void 0===t?void 0:t.filter((function(e){return!e.dragging})),o.payload.liveState.present.cards.cards.filter((function(e){return!e.dragging})))&&be()(Object(Ce.f)(e.ghostCards),o.payload.liveState.present.cards.ghostCards)),e.outOfSyncWithRemote?console.error("CARDS state is out of synce with remote!!!",Object(Ce.f)(e),o.payload.liveState.present.cards):console.log("CARDS state is in sync")})),e.addCase(me,(function(e,o){var t=e.cards.find((function(e){return e.id===o.payload.id}));t&&(t.cardStack=o.payload.newStack)})),e.addCase(P,(function(e){e.cards=[],e.dropTargetCards={},e.ghostCards=[],e.panMode=!0})),e.addCase(le,(function(e,o){var t={controlledBy:"",x:o.payload.position.x,y:o.payload.position.y,dragging:!1,shuffling:!1,exhausted:!1,faceup:!0,fill:"red",id:o.payload.id,cardStack:o.payload.cardJsonIds.map((function(e){return{jsonId:e}})),selected:!1,statusTokens:{stunned:!1,confused:!1,tough:!1},counterTokens:{damage:0,threat:0,generic:0},modifiers:{}};e.cards.push(t)})),e.addCase(ue,(function(e,o){var t=e.cards.find((function(e){return e.id===o.payload.cardStackId}));if(t&&t.cardStack.length>1){var r=[{jsonId:o.payload.jsonId}],a=Object.assign({},t,{cardStack:r});a.id=o.payload.id,a.selected=!0,a.controlledBy=o.ACTOR_REF,a.x=a.x+ye+5;var n=t.cardStack.findIndex((function(e){return e.jsonId===o.payload.jsonId}));-1!==n&&t.cardStack.splice(n,1),t.selected=!1,t.controlledBy="",e.cards.push(a)}})),e.addCase(pe,(function(e,o){var t=bo(e,o.payload.id);if(t&&!t.selected&&(e.cards=e.cards.map((function(e){return""!==e.controlledBy&&e.controlledBy!==o.ACTOR_REF||(e.selected=e.id===o.payload.id,e.selected?e.controlledBy=o.ACTOR_REF:e.controlledBy=""),e}))),o.payload.splitTopCard){var r=e.cards.find((function(e){return e.id===o.payload.id}));if(!r)throw new Error("Expected to find card");r.selected=!1,r.controlledBy="";var a=r.cardStack.shift(),n=Object.assign({},r,{selected:!0,controlledBy:o.ACTOR_REF,dragging:!0,cardStack:[a]});r.id=o.payload.splitCardId,e.cards.push(n)}e.ghostCards=[],o.payload.splitTopCard||To(e,o.ACTOR_REF,(function(o){o.dragging=!0,e.ghostCards.push(Object.assign({},o))}))})),e.addCase(he,(function(e,o){if(o.payload.numberToDraw!==o.payload.idsToUse.length)throw new Error("Did not receive the expected number of ids");So(e,o);var t=e.cards.find((function(e){return e.id===o.payload.cardStackId}));if(!t)throw new Error("Couldn't find card stack with id ".concat(o.payload.cardStackId));for(var r=t.id,a=0;a<o.payload.numberToDraw;a++)if(t){var n=t.cardStack.shift();if(!n)throw new Error("Expected to find a top card, but didn't");var s=[{jsonId:n.jsonId}],i=Object.assign({},t,{cardStack:s});i.id=o.payload.idsToUse[a],i.selected=!0,i.controlledBy=o.ACTOR_REF,i.faceup=!o.payload.facedown,i.x=i.x+(ye+5)*(a+1),i.y+=Te,0===t.cardStack.length&&(e.cards=e.cards.filter((function(e){return e.id!==r})),t=void 0),e.cards.push(i)}})),e.addCase(fe,(function(e,o){var t=e.cards.find((function(e){return e.id===o.payload.id}));t&&(t.shuffling=o.payload.shuffling)})),e.addCase(ge,(function(e,o){return _o(e,o)})),e.addCase(io.fulfilled,(function(e,o){return _o(e,o)}))}}),_o=function(e,o){console.log("got decklist"),console.log(o);var t=o.payload.data.investigator_code?[{jsonId:o.payload.data.investigator_code}]:[],r=[].concat(t,Object(ve.a)(o.payload.extraHeroCards)),a={controlledBy:o.ACTOR_REF,selected:!0,x:o.payload.position.x,y:o.payload.position.y,dragging:!1,shuffling:!1,exhausted:!1,faceup:!0,fill:"red",id:o.payload.heroId,cardStack:r,statusTokens:{stunned:!1,confused:!1,tough:!1},counterTokens:{damage:0,threat:0,generic:0},modifiers:{}},n=[];Object.entries(o.payload.data.slots).forEach((function(e){var o=Object(y.a)(e,2),t=o[0],r=o[1],a=Array.from(Array(r).keys()).map((function(){return{jsonId:t}}));n=n.concat(a)}));var s=ye+10,i={controlledBy:o.ACTOR_REF,selected:!0,x:o.payload.position.x+s,y:o.payload.position.y,dragging:!1,shuffling:!1,exhausted:!1,faceup:!0,fill:"red",id:o.payload.dataId,cardStack:n,statusTokens:{stunned:!1,confused:!1,tough:!1},counterTokens:{damage:0,threat:0,generic:0},modifiers:{}},d={controlledBy:o.ACTOR_REF,selected:!0,x:o.payload.position.x+2*s,y:o.payload.position.y,dragging:!1,shuffling:!1,exhausted:!1,faceup:!0,fill:"red",id:o.payload.encounterDeckId,cardStack:o.payload.relatedEncounterDeck.map((function(e){return{jsonId:e}})),statusTokens:{stunned:!1,confused:!1,tough:!1},counterTokens:{damage:0,threat:0,generic:0},modifiers:{}},c={controlledBy:o.ACTOR_REF,selected:!0,x:o.payload.position.x+3*s,y:o.payload.position.y,dragging:!1,shuffling:!1,exhausted:!1,faceup:!0,fill:"red",id:o.payload.obligationDeckId,cardStack:o.payload.relatedObligationDeck.map((function(e){return{jsonId:e}})),statusTokens:{stunned:!1,confused:!1,tough:!1},counterTokens:{damage:0,threat:0,generic:0},modifiers:{}};a.cardStack.length>0&&e.cards.push(a),i.cardStack.length>0&&e.cards.push(i),d.cardStack.length>0&&e.cards.push(d),c.cardStack.length>0&&e.cards.push(c)},xo=ko.actions,Oo=xo.selectCard,Po=xo.unselectCard,Mo=xo.toggleSelectCard,Io=xo.exhaustCard,No=xo.cardMove,Do=xo.endCardMove,Ro=xo.selectMultipleCards,Eo=xo.unselectAllCards,Ao=xo.togglePanMode,Fo=xo.toggleMultiselectMode,Lo=xo.flipCards,Bo=(xo.resetCards,xo.toggleToken),Go=xo.adjustCounterToken,Qo=xo.clearCardTokens,Wo=xo.adjustModifier,Ho=xo.clearAllModifiers,Uo=ko.reducer,zo=Object(m.b)("addNewCounterWithId"),Vo=new URLSearchParams(window.location.search).get("counters"),Ko=(Vo?JSON.parse(ho.a.uncrush(Vo)):null)||(null!==(fo=null===(go=w("liveState"))||void 0===go?void 0:go.counters)&&void 0!==fo?fo:{}),Jo=Object(N.a)(Object(N.a)({},{counters:[],firstPlayerCounterPosition:{x:0,y:0}}),Ko),qo=Object(m.d)({name:"counters",initialState:Jo,reducers:{updateCounterValue:function(e,o){var t=e.counters.find((function(e){return e.id===o.payload.id}));t&&(t.value+=o.payload.delta,t.value<0&&(t.value=0))},removeCounter:function(e,o){e.counters=e.counters.filter((function(e){return e.id!==o.payload}))},moveCounter:function(e,o){var t=e.counters.find((function(e){return e.id===o.payload.id}));t&&(t.position={x:o.payload.newPos.x,y:o.payload.newPos.y})},moveFirstPlayerCounter:function(e,o){e.firstPlayerCounterPosition={x:o.payload.x,y:o.payload.y}},updateCounterColor:function(e,o){var t=e.counters.find((function(e){return e.id===o.payload.id}));t&&(t.color=o.payload.newColor)}},extraReducers:function(e){e.addCase(M,(function(e,o){e.counters=o.payload.liveState.present.counters.counters,e.firstPlayerCounterPosition=o.payload.liveState.present.counters.firstPlayerCounterPosition})),e.addCase(P,(function(e,o){e.counters=[],e.firstPlayerCounterPosition={x:0,y:0}})),e.addCase(zo,(function(e,o){e.counters.push({id:o.payload.id,position:o.payload.pos,value:0,color:"red"})}))}}),Zo=qo.actions,Yo=Zo.updateCounterValue,Xo=Zo.removeCounter,$o=Zo.moveCounter,et=Zo.moveFirstPlayerCounter,ot=Zo.updateCounterColor,tt=qo.reducer,rt=Object(f.a)({counters:tt,cards:Uo}),at=Object(f.a)({game:ee,cardsData:ce,liveState:v()(rt,{limit:20,groupBy:Object(g.groupByActionTypes)([$o.type]),filter:Object(g.excludeAction)([pe.type,No.type,V.type,K.type])})}),nt=t(15),st=t(161),it=t.n(st),dt=t(66),ct=t.n(dt),lt=(vo={},Object(nt.a)(vo,W.type,!0),Object(nt.a)(vo,Q.type,!0),Object(nt.a)(vo,G.type,!0),Object(nt.a)(vo,V.type,!0),Object(nt.a)(vo,K.type,!0),Object(nt.a)(vo,J.type,!0),Object(nt.a)(vo,q.type,!0),Object(nt.a)(vo,Ao.type,!0),Object(nt.a)(vo,M.type,!0),Object(nt.a)(vo,z.type,!0),Object(nt.a)(vo,se.type,!0),Object(nt.a)(vo,ie.type,!0),Object(nt.a)(vo,de.type,!0),vo),ut=function(){false},ht=function(e,o){e.on("data",(function(t){t.INITIAL_STATE_MSG?(console.log("going to replace (most of) state with",t.state),setTimeout((function(){o.dispatch(M(t.state))}),0)):t.RESYNC?(ut("received request for resync"),e.send({INITIAL_STATE_MSG:!0,state:o.getState()})):t.PING?(t.REMOTE_ACTION=!0,o.dispatch(I(t.state))):(ut("recieved remote action",t),t.REMOTE_ACTION=!0,ut("dispatching remote action",t),o.dispatch(t))}))},pt=Object(m.e)({thunk:!0,immutableCheck:!1,serializableCheck:!1}).concat((function(e){var o,t=new it.a(void 0,{host:"peerjs.middle-earth.house",path:"/cgp",secure:!0,debug:0,config:{iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"turn:numb.viagenie.ca",username:"webrtc@live.com",credential:"muazkh"}]}});return t.on("error",(function(e){console.error("*****************Server error"),console.error(e)})),t.on("disconnected",(function(){console.log("****Peer server connection disconnected")})),t.on("open",(function(r){console.log("My peer ID is: "+r),e.dispatch(U(r));var a=window.location.href.split("remote=");if(a.length>1){var n=a[1].split("&")[0];console.log("FOUND QUERY PARAM. Going to connect to peer "+n),o=t.connect(n,{metadata:{ref:b}}),ht(o,e)}})),t.on("connection",(function(t){console.log("Connection received!"),ht(o=t,e),o.on("open",(function(){console.log("connection ready for data");var t=ct()(e.getState());delete t.cardsData,ut("going to send initial state",t),o.send({INITIAL_STATE_MSG:!0,state:t});var r=H({ref:o.metadata.ref,color:"blue"});o.send(r),o.send(H({ref:b,color:"red"})),e.dispatch(r),setInterval((function(){var t=ct()(e.getState());delete t.cardsData,o.send({PING:!0,state:t})}),5e3)})),o.on("error",(function(e){console.error("****************Connection error:",e)})),o.on("close",(function(){console.log("******connection closed for ref "+o.metadata.ref)})),o.peerConnection.onconnectionstatechange=function(e){console.log("connection state changed"),console.log(e),console.log(o.peerConnection.connectionState),"closed"!==o.peerConnection.connectionState&&"disconnected"!==o.peerConnection.connectionState||console.log("CLEARING CLIENT OWNED CARDS for "+o.metadata.ref)}})),function(r){return function(a){return ut("received local action",a),a.REMOTE_ACTION?a.ACTOR_REF||(console.error("Received a REMOTE action without an ACTOR_REF:"),console.log(a)):a.ACTOR_REF=b,a.type===W.type?(console.log("going to connect to peer "+a.payload),o=t.connect(a.payload,{metadata:{ref:b}}),ht(o,e)):a.type===z.type&&o&&o.send({RESYNC:!0}),a.REMOTE_ACTION||!o||lt[a.type]||(ut("going to send action to peer!"),o.send(a)),r(a)}}}));var mt,ft,gt=t(8),vt=t(9),jt=t(10),bt=t(11),Ct=t(162),Tt=t(105),yt=t(25),wt=t(88),St=47,kt=47,_t=function(e){Object(jt.a)(t,e);var o=Object(bt.a)(t);function t(e){var r,a,n,s;Object(gt.a)(this,t),(s=o.call(this,e)).damageImg=void 0,s.threatImg=void 0,s.genericImg=void 0,s.unmounted=void 0,s.unmounted=!0,s.state={imagesLoaded:{damage:!1,threat:!1,generic:!1}},s.damageImg=new Image,s.threatImg=new Image,s.genericImg=new Image;var i=ao[s.props.currentGameType].tokens;return s.damageImg.onload=function(){s.unmounted||s.setState({imagesLoaded:{damage:!0,threat:s.state.imagesLoaded.threat,generic:s.state.imagesLoaded.generic}})},(null===(r=s.props.card)||void 0===r?void 0:r.counterTokens.damage)&&i.damage&&(s.damageImg.src=i.damage.imagePath),s.threatImg.onload=function(){s.unmounted||s.setState({imagesLoaded:{damage:s.state.imagesLoaded.damage,threat:!0,generic:s.state.imagesLoaded.generic}})},(null===(a=s.props.card)||void 0===a?void 0:a.counterTokens.threat)&&i.threat&&(s.threatImg.src=i.threat.imagePath),s.genericImg.onload=function(){s.unmounted||s.setState({imagesLoaded:{damage:s.state.imagesLoaded.damage,threat:s.state.imagesLoaded.threat,generic:!0}})},(null===(n=s.props.card)||void 0===n?void 0:n.counterTokens.generic)&&i.generic&&(s.genericImg.src=i.generic.imagePath),s}return Object(vt.a)(t,[{key:"componentDidUpdate",value:function(e,o){var t,r,a,n,s,i,d=ao[this.props.currentGameType].tokens;!this.state.imagesLoaded.damage&&!(null===(t=e.card)||void 0===t?void 0:t.counterTokens.damage)&&(null===(r=this.props.card)||void 0===r?void 0:r.counterTokens.damage)&&d.damage&&(this.damageImg.src=d.damage.imagePath),!this.state.imagesLoaded.threat&&!(null===(a=e.card)||void 0===a?void 0:a.counterTokens.threat)&&(null===(n=this.props.card)||void 0===n?void 0:n.counterTokens.threat)&&d.threat&&(this.threatImg.src=d.threat.imagePath),!this.state.imagesLoaded.generic&&!(null===(s=e.card)||void 0===s?void 0:s.counterTokens.generic)&&(null===(i=this.props.card)||void 0===i?void 0:i.counterTokens.generic)&&d.generic&&(this.genericImg.src=d.generic.imagePath)}},{key:"componentDidMount",value:function(){this.unmounted=!1}},{key:"componentWillUnmount",value:function(){this.unmounted=!0}},{key:"render",value:function(){if(!this.props.card)return null;var e=this.props.x-23.5,o=this.props.y-Te/2+20,t=this.state.imagesLoaded.damage&&!!this.props.card.counterTokens.damage,a=t?Object(r.jsx)(yt.c,{x:e,y:o,scale:{x:St/this.damageImg.naturalWidth,y:kt/this.damageImg.naturalHeight},width:this.damageImg.naturalWidth,height:this.damageImg.naturalHeight,fillPatternImage:this.damageImg},"".concat(this.props.card.id,"-damageToken")):null,n=t?Object(r.jsx)(yt.e,{x:e,y:o,width:this.damageImg.naturalWidth*(St/this.damageImg.naturalWidth),height:this.damageImg.naturalHeight*(kt/this.damageImg.naturalHeight),text:"".concat(this.props.card.counterTokens.damage),fill:"white",align:"center",verticalAlign:"middle",fontSize:24},"".concat(this.props.card.id,"-damageText")):null,s=this.props.x-23.5,i=o+kt+5,d=this.state.imagesLoaded.threat&&!!this.props.card.counterTokens.threat,c=d?Object(r.jsx)(yt.c,{x:s,y:i,scale:{x:St/this.threatImg.naturalWidth,y:kt/this.threatImg.naturalHeight},width:this.threatImg.naturalWidth,height:this.threatImg.naturalHeight,fillPatternImage:this.threatImg},"".concat(this.props.card.id,"-threatToken")):null,l=d?Object(r.jsx)(yt.e,{x:s,y:i,width:this.threatImg.naturalWidth*(St/this.threatImg.naturalWidth),height:this.threatImg.naturalHeight*(kt/this.threatImg.naturalHeight),text:"".concat(this.props.card.counterTokens.threat),fill:"white",align:"center",verticalAlign:"middle",fontSize:24},"".concat(this.props.card.id,"-threatText")):null,u=this.props.x-23.5,h=i+kt+5,p=this.state.imagesLoaded.generic&&!!this.props.card.counterTokens.generic;return[a,n,c,l,p?Object(r.jsx)(yt.c,{x:u,y:h,scale:{x:St/this.genericImg.naturalWidth,y:kt/this.genericImg.naturalHeight},width:this.genericImg.naturalWidth,height:this.genericImg.naturalHeight,fillPatternImage:this.genericImg},"".concat(this.props.card.id,"-genericToken")):null,p?Object(r.jsx)(yt.e,{x:u,y:h,width:this.genericImg.naturalWidth*(St/this.genericImg.naturalWidth),height:this.genericImg.naturalHeight*(kt/this.genericImg.naturalHeight),text:"".concat(this.props.card.counterTokens.generic),fill:"white",align:"center",verticalAlign:"middle",fontSize:24},"".concat(this.props.card.id,"-genericText")):null]}}]),t}(a.Component),xt=Object(d.c)((function(e,o){return{card:Ve(e)[o.id]}}),{})(_t),Ot={"05026":!0},Pt={"02001a":"/images/cards/8665869b-fae4-494e-91d1-1e8c308220c2.jpg","02001b":"/images/cards/8665869b-fae4-494e-91d1-1e8c308220c2.b.jpg","02002a":"/images/cards/cfd051be-4ade-4cf8-b575-4b673cfa9a92.jpg","02002b":"/images/cards/cfd051be-4ade-4cf8-b575-4b673cfa9a92.b.jpg","02003a":"/images/cards/b16187a4-3f29-4a4b-8b66-6e8c7524c402.jpg","02003b":"/images/cards/b16187a4-3f29-4a4b-8b66-6e8c7524c402.b.jpg","02004":"/images/cards/b35084d9-3a2b-418c-b1a4-e4929de16a2c.jpg","02004_double_sided_back":"/images/cards/b35084d9-3a2b-418c-b1a4-e4929de16a2c.b.jpg","02005":"/images/cards/1eae757a-25b2-4b29-a8e7-f43b12c531b0.jpg","02005_double_sided_back":"/images/cards/1eae757a-25b2-4b29-a8e7-f43b12c531b0.b.jpg","02006a":"/images/cards/0a59161d-7db6-4328-9eeb-1906ce8715a5.jpg","02006b":"/images/cards/0a59161d-7db6-4328-9eeb-1906ce8715a5.b.jpg","02017":"https://hallofheroeshome.files.wordpress.com/2019/12/mutagen4a.jpg","02017_double_sided_back":"https://hallofheroeshome.files.wordpress.com/2019/12/mutagen4b.jpg","02018":"https://hallofheroeshome.files.wordpress.com/2019/12/mutagen5a.jpg","02018_double_sided_back":"https://hallofheroeshome.files.wordpress.com/2019/12/mutagen5b.jpg",12020:"https://lcgcdn.s3.amazonaws.com/mc/MC13en_20.jpg","15001a":"https://marvelcdb.com/bundles/cards/15001a.png","15001b":"https://marvelcdb.com/bundles/cards/15001b.png",15002:"https://hallofheroeshome.files.wordpress.com/2021/03/s1.jpg",15003:"https://hallofheroeshome.files.wordpress.com/2021/03/s2.jpg",15004:"https://hallofheroeshome.files.wordpress.com/2021/03/s6.jpg",15005:"https://hallofheroeshome.files.wordpress.com/2021/03/s7.jpg",15006:"https://hallofheroeshome.files.wordpress.com/2021/03/s10.jpg",15007:"https://hallofheroeshome.files.wordpress.com/2021/03/s11.jpg",15008:"https://hallofheroeshome.files.wordpress.com/2021/03/s12.jpg",15009:"https://hallofheroeshome.files.wordpress.com/2021/03/s15.jpg",15010:"https://hallofheroeshome.files.wordpress.com/2021/03/w1.jpg",15011:"https://hallofheroeshome.files.wordpress.com/2021/03/w2.jpg",15012:"https://hallofheroeshome.files.wordpress.com/2021/03/w3.jpg",15013:"https://hallofheroeshome.files.wordpress.com/2021/03/w4.jpg",15014:"https://hallofheroeshome.files.wordpress.com/2021/03/w5.jpg",15015:"https://hallofheroeshome.files.wordpress.com/2021/03/w6.jpg",15019:"https://hallofheroeshome.files.wordpress.com/2021/03/w10.jpg",15023:"https://hallofheroeshome.files.wordpress.com/2021/03/n2.jpg",15024:"https://hallofheroeshome.files.wordpress.com/2021/03/n3.jpg",15025:"https://hallofheroeshome.files.wordpress.com/2021/03/n4.jpg",15026:"https://hallofheroeshome.files.wordpress.com/2021/03/n5.jpg",15027:"https://hallofheroeshome.files.wordpress.com/2021/03/n6.jpg",15028:"https://hallofheroeshome.files.wordpress.com/2021/03/z1.jpg",15029:"https://hallofheroeshome.files.wordpress.com/2021/03/z2.jpg",15030:"https://hallofheroeshome.files.wordpress.com/2021/03/z3.jpg",15031:"https://hallofheroeshome.files.wordpress.com/2021/03/z4.jpg","16001a":"https://marvelcdb.com/bundles/cards/16001a.png","16001b":"https://marvelcdb.com/bundles/cards/16001b.png",16002:"https://hallofheroeshome.files.wordpress.com/2021/04/g1.jpg",16003:"https://hallofheroeshome.files.wordpress.com/2021/04/g3.jpg",16004:"https://hallofheroeshome.files.wordpress.com/2021/04/g5.jpg",16005:"https://hallofheroeshome.files.wordpress.com/2021/04/g7.jpg",16006:"https://hallofheroeshome.files.wordpress.com/2021/04/g10.jpg",16007:"https://hallofheroeshome.files.wordpress.com/2021/04/g11.jpg",16008:"https://hallofheroeshome.files.wordpress.com/2021/04/g12.jpg",16009:"https://hallofheroeshome.files.wordpress.com/2021/04/g13.jpg",16010:"https://hallofheroeshome.files.wordpress.com/2021/04/g14.jpg",16011:"https://hallofheroeshome.files.wordpress.com/2021/04/g15.jpg",16012:"https://hallofheroeshome.files.wordpress.com/2021/04/z1.jpg",16014:"https://hallofheroeshome.files.wordpress.com/2021/04/z3.jpg",16016:"https://hallofheroeshome.files.wordpress.com/2021/04/z5.jpg",16017:"https://hallofheroeshome.files.wordpress.com/2021/04/z6.jpg",16019:"https://hallofheroeshome.files.wordpress.com/2021/04/z8.jpg",16020:"https://hallofheroeshome.files.wordpress.com/2021/04/z9.jpg",16024:"https://hallofheroeshome.files.wordpress.com/2021/04/z13.jpg",16025:"https://hallofheroeshome.files.wordpress.com/2021/04/n1.jpg",16026:"https://hallofheroeshome.files.wordpress.com/2021/04/n2.jpg",16027:"https://hallofheroeshome.files.wordpress.com/2021/04/n3.jpg",16028:"https://hallofheroeshome.files.wordpress.com/2021/04/n4.jpg","16029a":"https://marvelcdb.com/bundles/cards/16029a.png","16029b":"https://hallofheroeshome.files.wordpress.com/2021/04/r0a.jpg",16030:"https://hallofheroeshome.files.wordpress.com/2021/04/r1.jpg",16031:"https://hallofheroeshome.files.wordpress.com/2021/04/r3.jpg",16032:"https://hallofheroeshome.files.wordpress.com/2021/04/r5.jpg",16033:"https://hallofheroeshome.files.wordpress.com/2021/04/r6.jpg",16034:"https://hallofheroeshome.files.wordpress.com/2021/04/r8.jpg",16035:"https://hallofheroeshome.files.wordpress.com/2021/04/r10.jpg",16036:"https://hallofheroeshome.files.wordpress.com/2021/04/r11.jpg",16037:"https://hallofheroeshome.files.wordpress.com/2021/04/r12.jpg",16038:"https://hallofheroeshome.files.wordpress.com/2021/04/r13.jpg",16039:"https://hallofheroeshome.files.wordpress.com/2021/04/r15.jpg",16040:"https://hallofheroeshome.files.wordpress.com/2021/04/z1-1.jpg",16043:"https://hallofheroeshome.files.wordpress.com/2021/04/z4-1.jpg",16045:"https://hallofheroeshome.files.wordpress.com/2021/04/z6-1.jpg",16046:"https://hallofheroeshome.files.wordpress.com/2021/04/z7-1.jpg",16047:"https://hallofheroeshome.files.wordpress.com/2021/04/z8-1.jpg",16048:"https://hallofheroeshome.files.wordpress.com/2021/04/z9-1.jpg",16052:"https://hallofheroeshome.files.wordpress.com/2021/04/z13-1.jpg",16053:"https://hallofheroeshome.files.wordpress.com/2021/04/n0.jpg",16054:"https://hallofheroeshome.files.wordpress.com/2021/04/n1-1.jpg",16055:"https://hallofheroeshome.files.wordpress.com/2021/04/n2-1.jpg",16056:"https://hallofheroeshome.files.wordpress.com/2021/04/n3-1.jpg",16057:"https://hallofheroeshome.files.wordpress.com/2021/04/n4-1.jpg",16058:"https://hallofheroeshome.files.wordpress.com/2021/04/d1.jpg",16059:"https://hallofheroeshome.files.wordpress.com/2021/04/d2.jpg",16060:"https://hallofheroeshome.files.wordpress.com/2021/04/d3.jpg",16061:"https://hallofheroeshome.files.wordpress.com/2021/04/d4a.jpg","16061a":"https://hallofheroeshome.files.wordpress.com/2021/04/d4a.jpg","16061_double_sided_back":"https://hallofheroeshome.files.wordpress.com/2021/04/d4b.jpg","16061b":"https://hallofheroeshome.files.wordpress.com/2021/04/d4b.jpg",16062:"https://hallofheroeshome.files.wordpress.com/2021/04/d5a.jpg","16062a":"https://hallofheroeshome.files.wordpress.com/2021/04/d5a.jpg","16062_double_sided_back":"https://hallofheroeshome.files.wordpress.com/2021/04/d5b.jpg","16062b":"https://hallofheroeshome.files.wordpress.com/2021/04/d5b.jpg",16063:"https://hallofheroeshome.files.wordpress.com/2021/04/d6.jpg",16064:"https://hallofheroeshome.files.wordpress.com/2021/04/d7.jpg",16065:"https://hallofheroeshome.files.wordpress.com/2021/04/d8.jpg",16066:"https://hallofheroeshome.files.wordpress.com/2021/04/d10.jpg",16067:"https://hallofheroeshome.files.wordpress.com/2021/04/d11.jpg",16068:"https://hallofheroeshome.files.wordpress.com/2021/04/d12.jpg",16069:"https://hallofheroeshome.files.wordpress.com/2021/04/d13.jpg",16117:"https://hallofheroeshome.files.wordpress.com/2021/04/bb1.jpg",16118:"https://hallofheroeshome.files.wordpress.com/2021/04/bb3.jpg",16119:"https://hallofheroeshome.files.wordpress.com/2021/04/bb6.jpg",16120:"https://hallofheroeshome.files.wordpress.com/2021/04/bb7.jpg",16121:"https://hallofheroeshome.files.wordpress.com/2021/04/bb9.jpg",16142:"https://hallofheroeshome.files.wordpress.com/2021/04/sc1.jpg",16143:"https://hallofheroeshome.files.wordpress.com/2021/04/sc2.jpg",16144:"https://hallofheroeshome.files.wordpress.com/2021/04/sc3.jpg",16145:"https://hallofheroeshome.files.wordpress.com/2021/04/sc4.jpg",16146:"https://hallofheroeshome.files.wordpress.com/2021/04/sc5.jpg",16147:"https://hallofheroeshome.files.wordpress.com/2021/04/sc6.jpg",16148:"https://hallofheroeshome.files.wordpress.com/2021/04/sc7.jpg","17001a":"https://marvelcdb.com/bundles/cards/17001a.png","17001b":"https://marvelcdb.com/bundles/cards/17001b.png",17002:"https://hallofheroeshome.files.wordpress.com/2021/05/1-1.jpg",17003:"https://hallofheroeshome.files.wordpress.com/2021/05/2-1.jpg",17004:"https://hallofheroeshome.files.wordpress.com/2021/05/5.jpg",17005:"https://hallofheroeshome.files.wordpress.com/2021/05/7.jpg",17006:"https://hallofheroeshome.files.wordpress.com/2021/05/10.jpg",17007:"https://hallofheroeshome.files.wordpress.com/2021/05/11.jpg",17008:"https://hallofheroeshome.files.wordpress.com/2021/05/13.jpg",17009:"https://hallofheroeshome.files.wordpress.com/2021/05/14.jpg",17010:"https://hallofheroeshome.files.wordpress.com/2021/05/15.jpg",17011:"https://hallofheroeshome.files.wordpress.com/2021/05/a1.jpg",17012:"https://hallofheroeshome.files.wordpress.com/2021/05/a2.jpg",17013:"https://hallofheroeshome.files.wordpress.com/2021/05/a3.jpg",17014:"https://hallofheroeshome.files.wordpress.com/2021/05/a4.jpg",17015:"https://hallofheroeshome.files.wordpress.com/2021/05/a5.jpg",17017:"https://hallofheroeshome.files.wordpress.com/2021/05/a7.jpg",17019:"https://hallofheroeshome.files.wordpress.com/2021/05/a9.jpg",17020:"https://hallofheroeshome.files.wordpress.com/2021/05/a10.jpg",17021:"https://hallofheroeshome.files.wordpress.com/2021/05/a11.jpg",17022:"https://hallofheroeshome.files.wordpress.com/2021/05/a12.jpg",17023:"https://hallofheroeshome.files.wordpress.com/2021/05/a13.jpg",17024:"https://hallofheroeshome.files.wordpress.com/2021/05/o0.jpg",17025:"https://hallofheroeshome.files.wordpress.com/2021/05/o1.jpg",17026:"https://hallofheroeshome.files.wordpress.com/2021/05/o2.jpg",17027:"https://hallofheroeshome.files.wordpress.com/2021/05/o3.jpg",17028:"https://hallofheroeshome.files.wordpress.com/2021/05/bb1.jpg",17029:"https://hallofheroeshome.files.wordpress.com/2021/05/bb2.jpg",17030:"https://hallofheroeshome.files.wordpress.com/2021/05/bb3.jpg","18001a":"https://marvelcdb.com/bundles/cards/18001a.png","18001b":"https://marvelcdb.com/bundles/cards/18001b.png",18002:"https://hallofheroeshome.files.wordpress.com/2021/05/g1-1.jpg",18003:"https://hallofheroeshome.files.wordpress.com/2021/05/g2-1.jpg",18004:"https://hallofheroeshome.files.wordpress.com/2021/05/g4-1.jpg",18005:"https://hallofheroeshome.files.wordpress.com/2021/05/g6-1.jpg",18006:"https://hallofheroeshome.files.wordpress.com/2021/05/g8-1.jpg",18007:"https://hallofheroeshome.files.wordpress.com/2021/05/g10-1.jpg",18008:"https://hallofheroeshome.files.wordpress.com/2021/05/g12-1.jpg",18009:"https://hallofheroeshome.files.wordpress.com/2021/05/g13-1.jpg",18010:"https://hallofheroeshome.files.wordpress.com/2021/05/g15-1.jpg",18011:"https://hallofheroeshome.files.wordpress.com/2021/05/z0.png",18012:"https://hallofheroeshome.files.wordpress.com/2021/05/c1.jpg",18013:"https://hallofheroeshome.files.wordpress.com/2021/05/d1.jpg",18015:"https://hallofheroeshome.files.wordpress.com/2021/05/f1.jpg",18016:"https://hallofheroeshome.files.wordpress.com/2021/05/i111.jpg",18018:"https://hallofheroeshome.files.wordpress.com/2021/05/aaa1.jpg",18019:"https://hallofheroeshome.files.wordpress.com/2021/05/gamora-spoilers-41024_1.jpg",18020:"https://hallofheroeshome.files.wordpress.com/2021/05/h1.jpg",18024:"https://hallofheroeshome.files.wordpress.com/2021/05/n1.jpg",18025:"https://hallofheroeshome.files.wordpress.com/2021/05/s1.jpg",18026:"https://hallofheroeshome.files.wordpress.com/2021/05/n3.jpg",18027:"https://hallofheroeshome.files.wordpress.com/2021/05/n4.jpg",18028:"https://hallofheroeshome.files.wordpress.com/2021/05/n5.jpg",18029:"https://hallofheroeshome.files.wordpress.com/2021/05/zzz1.jpg",18030:"https://hallofheroeshome.files.wordpress.com/2021/05/zzz2.jpg",18031:"https://hallofheroeshome.files.wordpress.com/2021/05/zzz3.jpg","19001a":"https://marvelcdb.com/bundles/cards/19001a.png","19001b":"https://marvelcdb.com/bundles/cards/19001b.png",19002:"https://hallofheroeshome.files.wordpress.com/2021/06/d1.jpg",19003:"https://hallofheroeshome.files.wordpress.com/2021/06/d2.jpg",19004:"https://hallofheroeshome.files.wordpress.com/2021/06/d4.jpg",19005:"https://hallofheroeshome.files.wordpress.com/2021/06/d6.jpg",19006:"https://hallofheroeshome.files.wordpress.com/2021/06/d8.jpg",19007:"https://hallofheroeshome.files.wordpress.com/2021/06/d10.jpg",19008:"https://hallofheroeshome.files.wordpress.com/2021/06/d12.jpg",19009:"https://hallofheroeshome.files.wordpress.com/2021/06/d13.jpg",19010:"https://hallofheroeshome.files.wordpress.com/2021/06/d14.jpg",19011:"https://hallofheroeshome.files.wordpress.com/2021/06/d15.jpg",19012:"https://hallofheroeshome.files.wordpress.com/2021/06/z1.jpg",19013:"https://hallofheroeshome.files.wordpress.com/2021/06/z2.jpg",19015:"https://hallofheroeshome.files.wordpress.com/2021/06/z4.jpg",19016:"https://hallofheroeshome.files.wordpress.com/2021/06/z5.jpg",19017:"https://hallofheroeshome.files.wordpress.com/2021/06/z6.jpg",19018:"https://hallofheroeshome.files.wordpress.com/2021/06/z7.jpg",19020:"https://hallofheroeshome.files.wordpress.com/2021/06/z9.jpg",19025:"https://hallofheroeshome.files.wordpress.com/2021/06/n1.jpg",19026:"https://hallofheroeshome.files.wordpress.com/2021/06/n2.jpg",19027:"https://hallofheroeshome.files.wordpress.com/2021/06/n3.jpg",19028:"https://hallofheroeshome.files.wordpress.com/2021/06/n4.jpg",19029:"https://hallofheroeshome.files.wordpress.com/2021/06/n5.jpg",19030:"https://hallofheroeshome.files.wordpress.com/2021/06/zz1.jpg",19031:"https://hallofheroeshome.files.wordpress.com/2021/06/zz2.jpg",19032:"https://hallofheroeshome.files.wordpress.com/2021/06/zz3.jpg","20001a":"https://marvelcdb.com/bundles/cards/20001a.png","20001b":"https://marvelcdb.com/bundles/cards/20001b.png",20002:"https://hallofheroeshome.files.wordpress.com/2021/07/v1.jpg",20003:"https://hallofheroeshome.files.wordpress.com/2021/07/v3.jpg",20004:"https://hallofheroeshome.files.wordpress.com/2021/07/v5.jpg",20005:"https://hallofheroeshome.files.wordpress.com/2021/07/v6.jpg",20006:"https://hallofheroeshome.files.wordpress.com/2021/07/v9.jpg",20007:"https://hallofheroeshome.files.wordpress.com/2021/07/v11.jpg",20008:"https://hallofheroeshome.files.wordpress.com/2021/07/v12.jpg",20009:"https://hallofheroeshome.files.wordpress.com/2021/07/v13.jpg",20010:"https://hallofheroeshome.files.wordpress.com/2021/07/v14.jpg",20011:"https://hallofheroeshome.files.wordpress.com/2021/07/j1.jpg",20012:"https://hallofheroeshome.files.wordpress.com/2021/07/j2.jpg",20013:"https://hallofheroeshome.files.wordpress.com/2021/07/j3.jpg",20014:"https://hallofheroeshome.files.wordpress.com/2021/07/j4.jpg",20015:"https://hallofheroeshome.files.wordpress.com/2021/07/j5.jpg",20016:"https://hallofheroeshome.files.wordpress.com/2021/07/j6.jpg",20017:"https://hallofheroeshome.files.wordpress.com/2021/07/j7.jpg",20018:"https://hallofheroeshome.files.wordpress.com/2021/07/j8.jpg",20019:"https://hallofheroeshome.files.wordpress.com/2021/07/j9.jpg",20020:"https://hallofheroeshome.files.wordpress.com/2021/07/j10.jpg",20021:"https://hallofheroeshome.files.wordpress.com/2021/07/j11.jpg",20022:"https://hallofheroeshome.files.wordpress.com/2021/07/j12.jpg",20023:"https://hallofheroeshome.files.wordpress.com/2021/07/n0.jpg",20024:"https://hallofheroeshome.files.wordpress.com/2021/07/n1.jpg",20025:"https://hallofheroeshome.files.wordpress.com/2021/07/n2.jpg",20026:"https://hallofheroeshome.files.wordpress.com/2021/07/z1.jpg",20027:"https://hallofheroeshome.files.wordpress.com/2021/07/z2.jpg",20028:"https://hallofheroeshome.files.wordpress.com/2021/07/z3.jpg",20029:"https://hallofheroeshome.files.wordpress.com/2021/07/z4.jpg","21001a":"https://hallofheroeshome.files.wordpress.com/2021/08/m0b.jpg","21001b":"https://hallofheroeshome.files.wordpress.com/2021/08/m0a.jpg",21002:"https://hallofheroeshome.files.wordpress.com/2021/08/m1.jpg",21003:"https://hallofheroeshome.files.wordpress.com/2021/08/m2.jpg",21004:"https://hallofheroeshome.files.wordpress.com/2021/08/m3.jpg",21005:"https://hallofheroeshome.files.wordpress.com/2021/08/m4.jpg",21006:"https://hallofheroeshome.files.wordpress.com/2021/08/m5.jpg",21007:"https://hallofheroeshome.files.wordpress.com/2021/08/m7.jpg",21008:"https://hallofheroeshome.files.wordpress.com/2021/08/m10.jpg",21009:"https://hallofheroeshome.files.wordpress.com/2021/08/m13.jpg",21010:"https://hallofheroeshome.files.wordpress.com/2021/08/m16.jpg",21011:"https://hallofheroeshome.files.wordpress.com/2021/08/a1.jpg",21012:"https://hallofheroeshome.files.wordpress.com/2021/08/a2.jpg",21013:"https://hallofheroeshome.files.wordpress.com/2021/08/a3.jpg",21014:"https://hallofheroeshome.files.wordpress.com/2021/08/a4.jpg",21015:"https://hallofheroeshome.files.wordpress.com/2021/08/a5.jpg",21016:"https://hallofheroeshome.files.wordpress.com/2021/08/a6.jpg",21017:"https://hallofheroeshome.files.wordpress.com/2021/08/a7.jpg",21018:"https://hallofheroeshome.files.wordpress.com/2021/08/a8.jpg",21019:"https://hallofheroeshome.files.wordpress.com/2021/08/a9.jpg",21020:"https://hallofheroeshome.files.wordpress.com/2021/08/a10.jpg",21021:"https://hallofheroeshome.files.wordpress.com/2021/08/a11.jpg",21022:"https://hallofheroeshome.files.wordpress.com/2021/08/a12.jpg",21023:"https://hallofheroeshome.files.wordpress.com/2021/08/a13.jpg",21024:"https://hallofheroeshome.files.wordpress.com/2021/08/a14.jpg",21025:"https://hallofheroeshome.files.wordpress.com/2021/08/a15.jpg",21026:"https://hallofheroeshome.files.wordpress.com/2021/08/n00.jpg",21027:"https://hallofheroeshome.files.wordpress.com/2021/08/n2.jpg",21028:"https://hallofheroeshome.files.wordpress.com/2021/08/n3.jpg",21029:"https://hallofheroeshome.files.wordpress.com/2021/08/n5.jpg",21030:"https://hallofheroeshome.files.wordpress.com/2021/08/n6.jpg","21031a":"https://hallofheroeshome.files.wordpress.com/2021/08/a0b.jpg","21031b":"https://hallofheroeshome.files.wordpress.com/2021/08/a0a.jpg",21032:"https://hallofheroeshome.files.wordpress.com/2021/08/a1-1.jpg",21033:"https://hallofheroeshome.files.wordpress.com/2021/08/a2-1.jpg",21034:"https://hallofheroeshome.files.wordpress.com/2021/08/a3-1.jpg",21035:"https://hallofheroeshome.files.wordpress.com/2021/08/a4-1.jpg",21036:"https://hallofheroeshome.files.wordpress.com/2021/08/a5-1.jpg",21037:"https://hallofheroeshome.files.wordpress.com/2021/08/a7-1.jpg",21038:"https://hallofheroeshome.files.wordpress.com/2021/08/a9-1.jpg",21039:"https://hallofheroeshome.files.wordpress.com/2021/08/a12-1.jpg",21040:"https://hallofheroeshome.files.wordpress.com/2021/08/a14-1.jpg",21041:"https://hallofheroeshome.files.wordpress.com/2021/08/b1.jpg",21042:"https://hallofheroeshome.files.wordpress.com/2021/08/b2.jpg",21043:"https://hallofheroeshome.files.wordpress.com/2021/08/b3.jpg",21044:"https://hallofheroeshome.files.wordpress.com/2021/08/b4.jpg",21045:"https://hallofheroeshome.files.wordpress.com/2021/08/b5.jpg",21046:"https://hallofheroeshome.files.wordpress.com/2021/08/b6.jpg",21047:"https://hallofheroeshome.files.wordpress.com/2021/08/b7.jpg",21048:"https://hallofheroeshome.files.wordpress.com/2021/08/b8.jpg",21049:"https://hallofheroeshome.files.wordpress.com/2021/08/b9.jpg",21050:"https://hallofheroeshome.files.wordpress.com/2021/08/b10.jpg",21051:"https://hallofheroeshome.files.wordpress.com/2021/08/b11.jpg",21052:"https://hallofheroeshome.files.wordpress.com/2021/08/b12.jpg",21053:"https://hallofheroeshome.files.wordpress.com/2021/08/b13.jpg",21054:"https://hallofheroeshome.files.wordpress.com/2021/08/b14.jpg",21055:"https://hallofheroeshome.files.wordpress.com/2021/08/b15.jpg",21056:"https://hallofheroeshome.files.wordpress.com/2021/08/b16.jpg",21057:"https://hallofheroeshome.files.wordpress.com/2021/08/b17.jpg",21058:"https://hallofheroeshome.files.wordpress.com/2021/08/b18.jpg",21059:"https://hallofheroeshome.files.wordpress.com/2021/08/b19.jpg",21060:"https://hallofheroeshome.files.wordpress.com/2021/08/b20.jpg",21061:"https://hallofheroeshome.files.wordpress.com/2021/08/b21.jpg",21062:"https://hallofheroeshome.files.wordpress.com/2021/08/b22.jpg",21063:"https://hallofheroeshome.files.wordpress.com/2021/08/b23.jpg",21064:"https://hallofheroeshome.files.wordpress.com/2021/08/b24.jpg",21065:"https://hallofheroeshome.files.wordpress.com/2021/08/b25.jpg",21066:"https://hallofheroeshome.files.wordpress.com/2021/08/n0.jpg",21067:"https://hallofheroeshome.files.wordpress.com/2021/08/n1-1.jpg",21068:"https://hallofheroeshome.files.wordpress.com/2021/08/n2-1.jpg",21069:"https://hallofheroeshome.files.wordpress.com/2021/08/n3-1.jpg",21070:"https://hallofheroeshome.files.wordpress.com/2021/08/n5-1.jpg",21071:"https://hallofheroeshome.files.wordpress.com/2021/08/e1.jpg",21072:"https://hallofheroeshome.files.wordpress.com/2021/08/e2.jpg",21073:"https://hallofheroeshome.files.wordpress.com/2021/08/e3.jpg","21074a":"https://hallofheroeshome.files.wordpress.com/2021/08/e4a.jpg","21074b":"https://hallofheroeshome.files.wordpress.com/2021/08/e4b.jpg","21075a":"https://hallofheroeshome.files.wordpress.com/2021/08/e5a.jpg","21075b":"https://hallofheroeshome.files.wordpress.com/2021/08/e5b.jpg",21076:"https://hallofheroeshome.files.wordpress.com/2021/08/e6.jpg",21077:"https://hallofheroeshome.files.wordpress.com/2021/08/e8.jpg",21078:"https://hallofheroeshome.files.wordpress.com/2021/08/e10.jpg",21079:"https://hallofheroeshome.files.wordpress.com/2021/08/e12.jpg",21080:"https://hallofheroeshome.files.wordpress.com/2021/08/e14.jpg",21081:"https://hallofheroeshome.files.wordpress.com/2021/08/e16.jpg",21082:"https://hallofheroeshome.files.wordpress.com/2021/08/e19.jpg",21083:"https://hallofheroeshome.files.wordpress.com/2021/08/e20.jpg",21084:"https://hallofheroeshome.files.wordpress.com/2021/08/e21.jpg",21085:"https://hallofheroeshome.files.wordpress.com/2021/08/b1-1.jpg",21086:"https://hallofheroeshome.files.wordpress.com/2021/08/b2-1.jpg",21087:"https://hallofheroeshome.files.wordpress.com/2021/08/b3-1.jpg",21088:"https://hallofheroeshome.files.wordpress.com/2021/08/b4-1.jpg",21089:"https://hallofheroeshome.files.wordpress.com/2021/08/a1-2.jpg",21090:"https://hallofheroeshome.files.wordpress.com/2021/08/a3-2.jpg",21091:"https://hallofheroeshome.files.wordpress.com/2021/08/a5-2.jpg",21092:"https://hallofheroeshome.files.wordpress.com/2021/08/t1.jpg",21093:"https://hallofheroeshome.files.wordpress.com/2021/08/t2.jpg",21094:"https://hallofheroeshome.files.wordpress.com/2021/08/t3.jpg",21095:"https://hallofheroeshome.files.wordpress.com/2021/08/t4.jpg",21096:"https://hallofheroeshome.files.wordpress.com/2021/08/t5.jpg",21097:"https://hallofheroeshome.files.wordpress.com/2021/08/t6.jpg","21098a":"https://hallofheroeshome.files.wordpress.com/2021/08/t7a.jpg","21098b":"https://hallofheroeshome.files.wordpress.com/2021/08/t7b.jpg","21099a":"https://hallofheroeshome.files.wordpress.com/2021/08/t8a.jpg","21099b":"https://hallofheroeshome.files.wordpress.com/2021/08/t8b.jpg","21100a":"https://hallofheroeshome.files.wordpress.com/2021/08/t9a.jpg","21100b":"https://hallofheroeshome.files.wordpress.com/2021/08/t9b.jpg",21101:"https://hallofheroeshome.files.wordpress.com/2021/08/t10.jpg",21102:"https://hallofheroeshome.files.wordpress.com/2021/08/t11.jpg",21103:"https://hallofheroeshome.files.wordpress.com/2021/08/t15.jpg",21104:"https://hallofheroeshome.files.wordpress.com/2021/08/t16.jpg",21105:"https://hallofheroeshome.files.wordpress.com/2021/08/t17.jpg",21106:"https://hallofheroeshome.files.wordpress.com/2021/08/t19.jpg",21107:"https://hallofheroeshome.files.wordpress.com/2021/08/t21.jpg",21108:"https://hallofheroeshome.files.wordpress.com/2021/08/t23.jpg",21109:"https://hallofheroeshome.files.wordpress.com/2021/08/t24.jpg",21110:"https://hallofheroeshome.files.wordpress.com/2021/08/t26.jpg"},Mt=function(e){Object(jt.a)(t,e);var o=Object(bt.a)(t);function t(e){var r;Object(gt.a)(this,t),(r=o.call(this,e)).imgs=void 0,r.unmounted=void 0,r.unmounted=!0,r.imgs={};var a=ao[r.props.currentGameType].modifiers,n={};return a.forEach((function(e){r.imgs[e.attributeId]=new Image,n[e.attributeId]=!1})),r.state={imagesLoaded:n},a.forEach((function(e){r.imgs[e.attributeId].onload=function(){if(!r.unmounted){var o=ct()(r.state.imagesLoaded);o[e.attributeId]=!0,r.setState({imagesLoaded:o})}}})),a.forEach((function(e){var o;(null===(o=r.props.card)||void 0===o?void 0:o.modifiers[e.attributeId])&&(r.imgs[e.attributeId].src=e.icon)})),r}return Object(vt.a)(t,[{key:"componentDidUpdate",value:function(e,o){var t=this;ao[this.props.currentGameType].modifiers.forEach((function(o){var r,a;t.state.imagesLoaded[o.attributeId]||(null===(r=e.card)||void 0===r?void 0:r.modifiers[o.attributeId])||!(null===(a=t.props.card)||void 0===a?void 0:a.modifiers[o.attributeId])||(t.imgs[o.attributeId].src=o.icon)}))}},{key:"componentDidMount",value:function(){this.unmounted=!1}},{key:"componentWillUnmount",value:function(){this.unmounted=!0}},{key:"render",value:function(){var e,o=this;if(!this.props.card)return null;if(!(null===(e=this.props.card)||void 0===e?void 0:e.modifiers))return null;var t=ao[this.props.currentGameType].modifiers,a=[];return t.forEach((function(e){var t,n,s,i,d=o.props.isPreview?o.props.x+(o.props.cardWidth||0)/2-36-40:o.props.x+ye/2-18,c=d+36-2,l=o.props.y-Te/2+10*(e.slot-1)+36*(e.slot-1),u=o.state.imagesLoaded[e.attributeId]&&!!(null===(t=o.props.card)||void 0===t?void 0:t.modifiers[e.attributeId]),h=o.imgs[e.attributeId],p=null===(n=o.props.card)||void 0===n?void 0:n.modifiers[e.attributeId],m=u?Object(r.jsx)(yt.c,{x:d,y:l,scale:{x:36/h.naturalWidth,y:36/h.naturalHeight},width:h.naturalWidth,height:h.naturalHeight,fillPatternImage:h},"".concat(null===(s=o.props.card)||void 0===s?void 0:s.id,"-").concat(e.attributeId,"-modifier-token")):null,f=u?Object(r.jsxs)(yt.a,{x:c,y:l,width:40,height:36,children:[Object(r.jsx)(yt.c,{width:40,height:36,fill:"white"}),Object(r.jsx)(yt.e,{width:40,height:36,text:"".concat(p&&p>0?"+":"").concat(null!==p&&void 0!==p?p:"?"),fill:"black",background:"white",align:"center",verticalAlign:"middle",fontSize:24})]},"".concat(null===(i=o.props.card)||void 0===i?void 0:i.id,"-").concat(e.attributeId,"-modifier-text")):null;m&&a.push(m),f&&a.push(f)})),a}}]),t}(a.Component),It=Object(d.c)((function(e,o){return{card:Ve(e)[o.id]}}),{})(Mt),Nt=["main_scheme","side_scheme","quest","player_side_quest"],Dt=function(e,o){return e.length===o.length&&e.every((function(e,t){return e===o[t]}))},Rt=function(e){Object(jt.a)(t,e);var o=Object(bt.a)(t);function t(e){var a,n,s,i;Object(gt.a)(this,t),(i=o.call(this,e)).imgs=[],i.stunnedImg=void 0,i.confusedImg=void 0,i.toughImg=void 0,i.unmounted=void 0,i.touchTimer=null,i.rect=null,i.shuffleToggle=!1,i.initCardImages=function(e){i.imgs=e.imgUrls.map((function(){return new Image})),i.imgs.forEach((function(e){return e.onload=function(){i.unmounted||i.setState({imageLoaded:!0})}})),i.imgs.forEach((function(e){return e.onerror=function(){i.unmounted||i.setState({imageLoadFailed:i.state.imageLoadFailed+1})}})),e.imgUrls.forEach((function(e,o){return i.imgs[o].src=e}))},i.getStrokeColor=function(){return i.props.dropTargetColor?i.props.dropTargetColor:i.props.selected?i.props.selectedColor:""},i.renderUnanimatedCard=function(e,o,t){var a,n,s,d=t?i.imgs.find((function(e){return e.complete&&0!==e.naturalHeight})):void 0,c=i.getScale(d,o,e),l={x:o/2,y:e/2},u=Object(r.jsx)(wt.Spring,{to:{rotation:i.props.exhausted?90:0},children:function(a){return Object(r.jsx)(wt.animated.Rect,Object(N.a)(Object(N.a)({},a),{},{ref:function(e){e&&(i.rect=e)},cornerRadius:9,x:i.props.x,y:i.props.y,width:o,height:e,offset:l,stroke:i.getStrokeColor(),strokeWidth:i.getStrokeColor()?4:0,fillPatternRotation:!t||i.shouldRenderImageHorizontal(i.props.code,i.props.typeCode||"",Nt)?270:0,fillPatternImage:d,fillPatternScaleX:c.width,fillPatternScaleY:c.height,fill:t?void 0:"gray",shadowForStrokeEnabled:!1,hitStrokeWidth:0,opacity:i.props.isGhost?.5:1,draggable:""===i.props.controlledBy||i.props.controlledBy===b,onDragStart:i.handleDragStart,onDragMove:i.handleDragMove,onDragEnd:i.handleDragEnd,onDblClick:i.handleDoubleClick,onDblTap:i.handleDoubleTap,onClick:i.handleClick,onTap:i.handleTap,onMouseDown:i.handleMouseDown,onTouchStart:i.handleTouchStart,onTouchMove:i.handleTouchMove,onTouchEnd:i.handleTouchEnd,onMouseOver:i.handleMouseOver,onMouseOut:i.handleMouseOut,onContextMenu:i.handleContextMenu}))}},"".concat(i.props.id,"-card")),h={x:l.x+4,y:l.y-4},p=(i.props.numCardsInStack||1)>1?Object(r.jsx)(wt.Spring,{to:{rotation:i.props.exhausted?90:0},children:function(t){return Object(r.jsx)(wt.animated.Rect,Object(N.a)(Object(N.a)({},t),{},{cornerRadius:[9,9,9,9],x:i.props.x,y:i.props.y,width:o,height:e,offset:h,opacity:i.props.isGhost?.5:1,fill:"gray",shadowForStrokeEnabled:!1,hitStrokeWidth:0}))}},"".concat(i.props.id,"-cardStack")):null,m=!!(null===(a=i.props.cardState)||void 0===a?void 0:a.stunned)&&i.state.tokenImagesLoaded.stunned,f=i.getTokenInSlot(m,i.stunnedImg,l,0),g=i.getTokenInSlot(!!(null===(n=i.props.cardState)||void 0===n?void 0:n.confused)&&i.state.tokenImagesLoaded.confused,i.confusedImg,l,1),v=i.getTokenInSlot(!!(null===(s=i.props.cardState)||void 0===s?void 0:s.tough)&&i.state.tokenImagesLoaded.tough,i.toughImg,l,2),j=i.props.dragging||i.props.isGhost?null:Object(r.jsx)(xt,{currentGameType:i.props.currentGameType,id:i.props.id,x:i.props.x,y:i.props.y},"".concat(i.props.id,"-cardTokens")),C=i.props.dragging||i.props.isGhost?null:Object(r.jsx)(It,{currentGameType:i.props.currentGameType,id:i.props.id,x:i.props.x,y:i.props.y,cardHeight:i.props.height,cardWidth:i.props.width,isPreview:!!i.props.isPreview},"".concat(i.props.id,"-cardModifiers"));return[p,u,i.renderCardName(l,o,e),f,g,v,j,C]},i.handleContextMenu=function(e){i.props.handleContextMenu&&i.props.handleContextMenu(i.props.id,e)},i.handleDoubleClick=function(e){i.props.handleDoubleClick&&i.props.handleDoubleClick(i.props.id,e)},i.handleDoubleTap=function(e){i.props.handleDoubleTap&&i.props.handleDoubleTap(i.props.id,e)},i.handleDragStart=function(e){i.props.handleDragStart&&i.props.handleDragStart(i.props.id,e)},i.handleDragMove=function(e){i.props.handleDragMove&&i.props.handleDragMove({id:i.props.id,dx:e.target.x()-i.props.x,dy:e.target.y()-i.props.y})},i.handleDragEnd=function(){i.props.handleDragEnd&&i.props.dragging&&i.props.handleDragEnd(i.props.id)},i.handleTap=function(e){i.handleTapOrClick(e,!0)},i.handleClick=function(e){i.handleTapOrClick(e,!1)},i.handleTapOrClick=function(e,o){i.props.handleClick&&(i.props.handleClick(i.props.id,e,o),e.cancelBubble=!0)},i.handleMouseDown=function(e){e.cancelBubble=!0},i.handleTouchStart=function(e){e.cancelBubble=!0,i.touchTimer&&(clearTimeout(i.touchTimer),i.touchTimer=null),i.touchTimer=setTimeout((function(){i.handleContextMenu(e)}),750)},i.handleTouchMove=function(e){i.touchTimer&&(clearTimeout(i.touchTimer),i.touchTimer=null)},i.handleTouchEnd=function(e){i.touchTimer&&(clearTimeout(i.touchTimer),i.touchTimer=null)},i.handleMouseOver=function(){i.props.handleHover&&i.props.handleHover(i.props.id)},i.handleMouseOut=function(){i.props.handleHoverLeave&&i.props.handleHoverLeave(i.props.id)},i.unmounted=!0,i.state={imageLoaded:!1,imageLoadFailed:0,prevImgUrls:i.props.imgUrls,tokenImagesLoaded:{stunned:!1,confused:!1,tough:!1}},i.initCardImages(e),i.stunnedImg=new Image,i.confusedImg=new Image,i.toughImg=new Image,i.stunnedImg.onload=function(){i.unmounted||i.setState({tokenImagesLoaded:{stunned:!0,confused:i.state.tokenImagesLoaded.confused,tough:i.state.tokenImagesLoaded.tough}})};var d=ao[e.currentGameType].tokens;return(null===(a=e.cardState)||void 0===a?void 0:a.stunned)&&d.stunned&&(i.stunnedImg.src=d.stunned.imagePath),i.confusedImg.onload=function(){i.unmounted||i.setState({tokenImagesLoaded:{stunned:i.state.tokenImagesLoaded.stunned,confused:!0,tough:i.state.tokenImagesLoaded.tough}})},(null===(n=e.cardState)||void 0===n?void 0:n.confused)&&d.confused&&(i.confusedImg.src=d.confused.imagePath),i.toughImg.onload=function(){i.unmounted||i.setState({tokenImagesLoaded:{stunned:i.state.tokenImagesLoaded.stunned,confused:i.state.tokenImagesLoaded.confused,tough:!0}})},(null===(s=e.cardState)||void 0===s?void 0:s.tough)&&d.tough&&(i.toughImg.src=d.tough.imagePath),i}return Object(vt.a)(t,null,[{key:"getDerivedStateFromProps",value:function(e,o){var t;return Dt(e.imgUrls,null!==(t=o.prevImgUrls)&&void 0!==t?t:[])?null:{imageLoaded:!1,imageLoadFailed:0,prevImgUrls:e.imgUrls,tokenImagesLoaded:{stunned:o.tokenImagesLoaded.stunned,confused:o.tokenImagesLoaded.confused,tough:o.tokenImagesLoaded.tough}}}}]),Object(vt.a)(t,[{key:"componentDidUpdate",value:function(e,o){var t,r,a,n,s,i;!e.shuffling&&this.props.shuffling&&this.rect&&(this.shuffleToggle=!this.shuffleToggle,this.rect.to({rotation:this.currentRotation+(this.shuffleToggle?360:-360),duration:.2})),this.state.imageLoaded||Dt(e.imgUrls,this.props.imgUrls)||(this.setState({imageLoaded:!1,imageLoadFailed:0}),this.initCardImages(this.props));var d=ao[this.props.currentGameType].tokens;!this.state.tokenImagesLoaded.stunned&&!(null===(t=e.cardState)||void 0===t?void 0:t.stunned)&&(null===(r=this.props.cardState)||void 0===r?void 0:r.stunned)&&d.stunned&&(this.stunnedImg.src=d.stunned.imagePath),!this.state.tokenImagesLoaded.confused&&!(null===(a=e.cardState)||void 0===a?void 0:a.confused)&&(null===(n=this.props.cardState)||void 0===n?void 0:n.confused)&&d.confused&&(this.confusedImg.src=d.confused.imagePath),!this.state.tokenImagesLoaded.tough&&!(null===(s=e.cardState)||void 0===s?void 0:s.tough)&&(null===(i=this.props.cardState)||void 0===i?void 0:i.tough)&&d.tough&&(this.toughImg.src=d.tough.imagePath)}},{key:"componentDidMount",value:function(){this.unmounted=!1}},{key:"componentWillUnmount",value:function(){this.unmounted=!0}},{key:"render",value:function(){return this.renderCard(this.state.imageLoaded)}},{key:"renderCard",value:function(e){var o=this.props.height||Te,t=this.props.width||ye;return this.renderUnanimatedCard(o,t,e)}},{key:"renderCardName",value:function(e,o,t){var a={x:e.x-10,y:e.y-20};return this.state.imageLoadFailed===this.props.imgUrls.length&&0!==this.state.imageLoadFailed?Object(r.jsx)(yt.e,{offset:a,x:this.props.x,y:this.props.y,width:o-10,height:t-20,fontSize:24,text:"".concat(this.props.name," ").concat(this.props.code),draggable:""===this.props.controlledBy||this.props.controlledBy===b,onDragStart:this.handleDragStart,onDragMove:this.handleDragMove,onDragEnd:this.handleDragEnd,onDblClick:this.handleDoubleClick,onDblTap:this.handleDoubleClick,onClick:this.handleClick,onTap:this.handleClick,onMouseDown:this.handleMouseDown,onTouchStart:this.handleMouseDown,onMouseOver:this.handleMouseOver,onMouseOut:this.handleMouseOut,onContextMenu:this.handleContextMenu},"".concat(this.props.id,"-cardnametext")):null}},{key:"getTokenInSlot",value:function(e,o,t,a){var n={width:o.naturalWidth/2,height:o.naturalHeight/2},s={x:t.x-ye+n.width/2,y:t.y-n.height*a-5*(a+1)-10};return e?Object(r.jsx)(yt.c,{native:!0,cornerRadius:8,x:this.props.x,y:this.props.y,width:n.width,height:n.height,fillPatternScaleX:.5,fillPatternScaleY:.5,offset:s,fillPatternImage:o},"".concat(this.props.id,"-status").concat(a)):null}},{key:"shouldRenderImageHorizontal",value:function(e,o,t){return t.includes(o.toLocaleLowerCase())&&!this.plainCardBack&&!Ot[e]}},{key:"getScale",value:function(e,o,t){var r=e?o/e.naturalWidth:o,a=e?t/e.naturalWidth:o,n=e?t/e.naturalHeight:t,s=e?o/e.naturalHeight:t;return this.shouldRenderImageHorizontal(this.props.code,this.props.typeCode||"",Nt)?{width:a,height:s}:{width:r,height:n}}},{key:"plainCardBack",get:function(){return this.props.imgUrls.some((function(e){return e.includes("standard")}))&&this.props.imgUrls.some((function(e){return e.includes("_back")}))}},{key:"currentRotation",get:function(){return this.props.exhausted?90:0}}]),t}(a.Component),Et=t(296),At=t(287),Ft=t(299),Lt=t(295),Bt=t(301),Gt=t(164),Qt=t.n(Gt),Wt=(t(245),t(298)),Ht=function(e){Object(jt.a)(t,e);var o=Object(bt.a)(t);function t(e){var a;return Object(gt.a)(this,t),(a=o.call(this,e)).cardsDataInStack=[],a.renderTouchList=function(){return Object(r.jsx)("div",{className:"card-picker-select",children:Object(r.jsxs)(At.a,{className:"select",children:[Object(r.jsx)(Wt.a,{id:"game-picker-label",children:"Select Card..."}),Object(r.jsx)(Et.a,{id:"touch-cardstack-list",onChange:function(e){if(e.target.value){var o=e.target.value||"";a.handleSelected(e,a.props.cardsDataEntities[o])}},variant:"outlined",children:a.cardsDataInStack.map((function(e,o){return Object(r.jsx)(Ft.a,{value:e.code,children:Object(r.jsxs)("div",{className:"card-picker-row",children:[Object(r.jsx)("div",{children:e.name}),Object(r.jsx)("div",{onClick:function(o){o.stopPropagation(),o.preventDefault(),a.props.preview(e.code)},className:"mobile-only",children:Object(r.jsx)(Qt.a,{})})]})},"select-item-card-".concat(e.code,"-").concat(o))}))})]})})},a.renderAutocomplete=function(){return Object(r.jsx)(Lt.a,{id:"cardstack-card-selector-combobox",options:a.cardsDataInStack,getOptionLabel:function(e){return e.name||"Unknown Card Name"},style:{width:300},onChange:a.handleSelected,onHighlightChange:a.handleHighlightChange,renderInput:function(e){return Object(r.jsx)(Bt.a,Object(N.a)(Object(N.a)({},e),{},{label:"Find Card...",variant:"outlined"}))}})},a.handleHighlightChange=function(e,o,t){o?a.props.preview(o.code):a.props.clearPreview()},a.handleSelected=function(e,o){a.props.clearPreview(),o&&a.props.cardSelected&&a.props.cardSelected(o.code)},a.cancelBubble=function(e){e.stopPropagation()},a.cardsDataInStack=e.card.cardStack.map((function(e){return a.props.cardsDataEntities[e.jsonId]})),a}return Object(vt.a)(t,[{key:"componentWillUnmount",value:function(){this.props.clearPreview()}},{key:"render",value:function(){return Object(r.jsx)("div",{onClick:this.cancelBubble,onKeyPress:this.cancelBubble,children:this.props.touchBased?this.renderTouchList():this.renderAutocomplete()})}}]),t}(a.Component),Ut=Object(d.c)((function(e){return{cardsDataEntities:Fe(e)}}),{preview:J,clearPreview:q})(Ht),zt=t(176),Vt=t(177),Kt=function(e){var o=n.a.useRef(null);return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(Ft.a,{onClick:function(e){if(null===o||void 0===o?void 0:o.current){var t=document.createEvent("MouseEvents");t.initEvent("click",!0,!1),o.current.dispatchEvent(t)}e.stopPropagation()},children:e.label}),Object(r.jsx)("input",{type:"file",ref:o,onChange:function(o){if(o.target.files&&o.target.files.length>0){var t=o.target.files[0];e.handleFile(t)}},style:{display:"none"}})]})},Jt=function(e){Object(jt.a)(t,e);var o=Object(bt.a)(t);function t(e){var a;return Object(gt.a)(this,t),(a=o.call(this,e)).nestedRef=void 0,a.renderMenuItem=function(e,o){return e.children?Object(r.jsx)(Vt.a,{ref:function(e){a.nestedRef=e},parentMenuOpen:a.state.menuOpen,label:e.label,onClick:function(e){a.nestedRef&&(e.stopPropagation(),a.nestedRef.parentElement.focus())},children:e.children.map((function(e,t){return a.renderMenuItem(e,1e3*o+t)}))},"contextMenu-item-".concat(o)):e.fileUploader?Object(r.jsx)(Kt,{label:e.label,handleFile:function(o){var t=new FileReader;t.readAsText(o,"UTF-8"),t.onload=function(o){var t,r=null===(t=o.target)||void 0===t?void 0:t.result;e.fileLoadedAction&&e.fileLoadedAction(r),a.props.hideContextMenu()}}},"contextMenu-item-".concat(o)):Object(r.jsx)(Ft.a,{onClick:a.handleContextItemClicked(e),children:e.label},"contextMenu-item-".concat(o))},a.handleMenuClosed=function(){a.setState({menuOpen:!1}),a.props.hideContextMenu()},a.preventDefault=function(e){e.preventDefault()},a.handleContextItemClicked=function(e){return function(){e.action&&e.action(),a.props.contextItemClicked&&a.props.contextItemClicked(a.props.items[0]),e.action&&(a.nestedRef&&a.nestedRef.blur(),a.props.hideContextMenu())}},a.state={menuOpen:!0},a}return Object(vt.a)(t,[{key:"render",value:function(){var e=this;return Object(r.jsx)("div",{id:"context-menu-layer",onContextMenu:this.preventDefault,onClick:function(o){var t;(null===(t=o.target)||void 0===t?void 0:t.files)||e.props.hideContextMenu()},children:Object(r.jsx)(zt.a,{keepMounted:!0,open:this.state.menuOpen,onClose:this.handleMenuClosed,anchorReference:"anchorPosition",anchorPosition:{top:this.props.position.y+8,left:this.props.position.x+8},children:this.props.items.map((function(o,t){return e.renderMenuItem(o,t)}))})})}}]),t}(a.Component),qt=function(e){Object(jt.a)(t,e);var o=Object(bt.a)(t);function t(){var e;Object(gt.a)(this,t);for(var r=arguments.length,a=new Array(r),n=0;n<r;n++)a[n]=arguments[n];return(e=o.call.apply(o,[this].concat(a))).touchTimer=null,e.cancelBubble=function(e){e.cancelBubble=!0},e.handleDecrement=function(){e.props.updateCounterValueBy(-1)},e.handleIncrement=function(){e.props.updateCounterValueBy(1)},e.handleTouchStart=function(o){o.cancelBubble=!0,e.touchTimer&&(clearTimeout(e.touchTimer),e.touchTimer=null),e.touchTimer=setTimeout((function(){e.props.handleContextMenu(o)}),750)},e.handleTouchMove=function(o){e.touchTimer&&(clearTimeout(e.touchTimer),e.touchTimer=null)},e.handleTouchEnd=function(o){e.touchTimer&&(clearTimeout(e.touchTimer),e.touchTimer=null)},e}return Object(vt.a)(t,[{key:"render",value:function(){return Object(r.jsxs)(yt.a,{x:this.props.pos.x,y:this.props.pos.y,draggable:!0,onClick:this.cancelBubble,onContextMenu:this.props.handleContextMenu,onDragEnd:this.props.onDragEnd,onTouchStart:this.handleTouchStart,onMouseDown:this.cancelBubble,onTouchMove:this.handleTouchMove,onTouchEnd:this.handleTouchEnd,children:[Object(r.jsx)(yt.c,{cornerRadius:30,width:200,height:100,fill:this.props.color}),Object(r.jsx)(yt.e,{width:200,height:100,fontSize:36,text:"".concat(this.props.value),align:"center",verticalAlign:"middle"}),Object(r.jsx)(yt.e,{x:10,y:25,width:50,height:50,fontSize:36,text:"-",align:"center",verticalAlign:"middle",onClick:this.handleDecrement,onTap:this.handleDecrement}),Object(r.jsx)(yt.e,{x:140,y:25,width:50,height:50,fontSize:36,text:"+",align:"center",verticalAlign:"middle",onClick:this.handleIncrement,onTap:this.handleIncrement})]})}}]),t}(a.Component),Zt=function(e){Object(jt.a)(t,e);var o=Object(bt.a)(t);function t(){var e;Object(gt.a)(this,t);for(var r=arguments.length,a=new Array(r),n=0;n<r;n++)a[n]=arguments[n];return(e=o.call.apply(o,[this].concat(a))).inputValue="",e.focusInputField=function(e){e&&setTimeout((function(){e.querySelector("input").focus()}),100)},e.cancelBubble=function(e){e.stopPropagation()},e.handleKeyPress=function(o){"enter"===o.key.toLocaleLowerCase()&&e.props.loadDeckId(+e.inputValue)},e}return Object(vt.a)(t,[{key:"render",value:function(){var e=this;return Object(r.jsxs)("div",{onClick:this.cancelBubble,onKeyPress:this.cancelBubble,className:"token-field-row",children:[Object(r.jsx)(Bt.a,{ref:this.focusInputField,onKeyPress:this.handleKeyPress,onClick:this.cancelBubble,onChange:function(o){e.inputValue=o.target.value},type:"number",variant:"outlined"})," "]})}}]),t}(a.Component),Yt=function(e){Object(jt.a)(t,e);var o=Object(bt.a)(t);function t(){var e;Object(gt.a)(this,t);for(var r=arguments.length,a=new Array(r),n=0;n<r;n++)a[n]=arguments[n];return(e=o.call.apply(o,[this].concat(a))).handleSelected=function(o,t){if(t){var r=[],a=[],n=t.cards.filter((function(e){return!t.cards.some((function(o){return o.backLink===e.code}))}));n.filter((function(e){return"quest"===e.typeCode.toLocaleLowerCase()})).forEach((function(e){r=r.concat(Array.from({length:e.quantity}).map((function(o){return e.code})))})),n.filter((function(e){return"quest"!==e.typeCode.toLocaleLowerCase()})).forEach((function(e){a=a.concat(Array.from({length:e.quantity}).map((function(o){return e.code})))}));var s=[a];r.length>0&&(s=[r].concat(s)),e.props.loadCards(s)}},e.cancelBubble=function(e){e.stopPropagation()},e}return Object(vt.a)(t,[{key:"render",value:function(){var e=this;return Object(r.jsx)("div",{onClick:this.cancelBubble,onKeyPress:this.cancelBubble,children:Object(r.jsx)(Lt.a,{id:"encounter-loader-combobox",options:this.props.encounterData||[],getOptionLabel:function(e){return e.setData.name},style:{width:300},onChange:this.handleSelected,renderInput:function(o){return Object(r.jsx)(Bt.a,Object(N.a)(Object(N.a)({},o),{},{label:ao[e.props.currentGameType].encounterUiName,variant:"outlined"}))}})})}}]),t}(a.Component),Xt=Object(d.c)((function(e,o){return{encounterData:o.currentGameType===u.LordOfTheRingsLivingCardGame?He(e):Ue(e)}}),{})(Yt),$t=function(e){Object(jt.a)(t,e);var o=Object(bt.a)(t);function t(e){var r;return Object(gt.a)(this,t),(r=o.call(this,e)).cancelBubble=function(e){e.cancelBubble=!0},r.handleDragEnd=function(e){r.props.updatePos({x:e.target.x(),y:e.target.y()})},r.state={img:null},r}return Object(vt.a)(t,[{key:"componentDidMount",value:function(){var e=this,o=new Image;o.onload=function(){e.setState({img:o})},o.src="/images/table/first_player_token_"+this.props.currentGameType+".png"}},{key:"render",value:function(){var e,o,t,a,n,s,i,d,c;return Object(r.jsx)(yt.c,{x:this.props.pos.x,y:this.props.pos.y,draggable:!0,onTouchStart:this.cancelBubble,onMouseDown:this.cancelBubble,onDragEnd:this.handleDragEnd,scale:{x:160/(null!==(e=null===(o=this.state.img)||void 0===o?void 0:o.naturalWidth)&&void 0!==e?e:1),y:160/(null!==(t=null===(a=this.state.img)||void 0===a?void 0:a.naturalWidth)&&void 0!==t?t:1)},width:null!==(n=null===(s=this.state.img)||void 0===s?void 0:s.naturalWidth)&&void 0!==n?n:0,height:null!==(i=null===(d=this.state.img)||void 0===d?void 0:d.naturalHeight)&&void 0!==i?i:0,fillPatternImage:null!==(c=this.state.img)&&void 0!==c?c:void 0})}}]),t}(a.Component),er=function(e){return e.liveState.present.counters},or=Object(Re.a)(er,(function(e){return e.counters})),tr=Object(Re.a)(er,(function(e){return e.firstPlayerCounterPosition})),rr=Object(d.c)((function(e){return{pos:tr(e)}}),{updatePos:et})($t),ar=(t(247),function(e){Object(jt.a)(t,e);var o=Object(bt.a)(t);function t(){var e;Object(gt.a)(this,t);for(var r=arguments.length,a=new Array(r),n=0;n<r;n++)a[n]=arguments[n];return(e=o.call.apply(o,[this].concat(a))).inputRef=null,e.connect=function(o){var t,r;console.log("connecting with peer id "+(null===(t=e.inputRef)||void 0===t?void 0:t.value)),e.props.connect((null===(r=e.inputRef)||void 0===r?void 0:r.value)||"")},e.cancelBubble=function(e){e.stopPropagation()},e}return Object(vt.a)(t,[{key:"render",value:function(){var e=this;return Object(r.jsxs)("div",{onClick:this.cancelBubble,onKeyPress:this.cancelBubble,children:[Object(r.jsx)("input",{ref:function(o){o&&(e.inputRef=o)}}),Object(r.jsx)("button",{onClick:this.connect,children:"Connect"})]})}}]),t}(a.Component)),nr=function(e){return e.game},sr=(Object(Re.a)(nr,(function(e){return e.stageZoom})),Object(Re.a)(nr,(function(e){return e.playerColors}))),ir=Object(Re.a)(nr,(function(e){return e.peerId})),dr=Object(Re.a)(nr,(function(e){return e.activeGameType})),cr=Object(Re.a)(nr,(function(e){return e.radialMenuPosition})),lr=(Object(Re.a)(nr,(function(e){return e.previewCard})),Object(Re.a)(nr,(function(e){return e.menuPreviewCardJsonId?{id:"menu-preview-card",controlledBy:"",exhausted:!1,faceup:!0,fill:"gray",x:0,y:0,statusTokens:{stunned:!1,confused:!1,tough:!1},counterTokens:{damage:0,threat:0,generic:0},selected:!1,dragging:!1,shuffling:!1,cardStack:[{jsonId:e.menuPreviewCardJsonId}],modifiers:{}}:null}))),ur=(t(248),function(e){Object(jt.a)(t,e);var o=Object(bt.a)(t);function t(){var e;Object(gt.a)(this,t);for(var r=arguments.length,a=new Array(r),n=0;n<r;n++)a[n]=arguments[n];return(e=o.call.apply(o,[this].concat(a))).handleClick=function(o){o.stopPropagation(),e.props.completed()},e.preventDefault=function(e){e.preventDefault()},e}return Object(vt.a)(t,[{key:"render",value:function(){var e=this.props.offsetContent?8:0,o={top:"".concat(this.props.position.y+e,"px"),left:"".concat(this.props.position.x+e,"px")};return this.props.trasparentBackground||(o.backgroundColor="white"),Object(r.jsx)("div",{id:"top-layer",onClick:this.props.completed,onContextMenu:this.preventDefault,children:Object(r.jsx)("div",{className:"top-layer-content-wrapper",style:o,onContextMenu:this.preventDefault,onClick:this.handleClick,children:this.props.children})})}}]),t}(a.Component)),hr=function(e,o){return o.length>0&&o.some((function(o){return o.statusTokens[e]}))},pr=function(e){return e.filter((function(e){return e.selected&&e.controlledBy===b}))},mr=t(249);mr.default,mr.Slice;!function(e){e.TopLevelActions="toplevelactions",e.StatusTokenActions="statustokenactions",e.CounterTokenActions="countertokenactions",e.ModifierActions="modifieractions",e.DrawActions="drawactions",e.DrawNumber="drawnumber",e.ModifierNumber="modifiernumber"}(mt||(mt={})),function(e){e.FaceUp="faceup",e.FaceDown="facedown"}(ft||(ft={}));var fr,gr=t(37);t(253);!function(e){e.Normal="normal",e.LeftFan="leftfan",e.RightFan="rightfan",e.TopFan="topfan",e.BottomFan="bottomfan",e.LowerRightFan="lowerrightfan",e.LowerLeftFan="lowerleftfan",e.UpperRightFan="upperrightfan",e.UpperLeftFan="upperleftfan"}(fr||(fr={}));var vr,jr=200,br=function(e){if(!e)return fr.Normal;var o,t,r,a,n,s,i,d,c,l;window.visualViewport.height<=window.visualViewport.width?(o=e.y,t=window.visualViewport.height,r=e.x,a=window.visualViewport.width,n=fr.BottomFan,s=fr.TopFan,i=fr.RightFan,d=fr.LeftFan,c=fr.UpperRightFan,l=fr.LowerLeftFan):(o=e.x,t=window.visualViewport.width,r=e.y,a=window.visualViewport.height,n=fr.RightFan,s=fr.LeftFan,i=fr.BottomFan,d=fr.TopFan,c=fr.LowerLeftFan,l=fr.UpperRightFan);fr.Normal;return r<jr&&o<jr?fr.LowerRightFan:r>a-jr&&o>t-jr?fr.UpperLeftFan:r<jr&&o>t-jr?c:r>a-jr&&o<jr?l:r<jr&&o>=jr&&o<=t-jr?i:r>a-jr&&o>=jr&&o<=t-jr?d:o<t/2?n:s},Cr=function(e){var o=0;switch(e){case fr.RightFan:o=0;break;case fr.LowerRightFan:o=30;break;case fr.BottomFan:o=90;break;case fr.LowerLeftFan:o=110;break;case fr.LeftFan:o=180;break;case fr.UpperLeftFan:o=205;break;case fr.TopFan:o=270;break;case fr.UpperRightFan:o=300}return o},Tr=function(e,o){var t=o===fr.LowerLeftFan||o===fr.LowerRightFan||o===fr.UpperLeftFan||o===fr.UpperRightFan?4:0;return e=Array(e.length).map((function(){return Object(r.jsx)("div",{})})).concat(Array(t).map((function(){return Object(r.jsx)("div",{})}))).concat(e)},yr=function(e,o,t,r){var a=ct()(t),n=br({x:e.clientX,y:e.clientY}),s=Cr(n);a[o]={renderType:n,rot:s},r(a)};!function(e){e.FaceUp="faceup",e.FaceDown="facedown"}(vr||(vr={}));var wr=function(e){var o=kr(e);o&&(o.style.zIndex="3")},Sr=function(e){var o=kr(e);o&&(o.style.zIndex="")},kr=function(e){var o,t,r=e.target.closest(".makeStyles-root-3");r||(r=null===(o=e.target.closest("div[class*=jss]").parentNode)||void 0===o||null===(t=o.parentNode)||void 0===t?void 0:t.closest("div[class*=jss]"));return r},_r=function(e,o,t){var a,n,s,i,d,c,l,u,h,p,m,f,g,v;if(!e.currentGameType)return null;var j,b,C,T,y,w=ao[e.currentGameType].modifiers,S=[Object(r.jsx)(gr.a,{onClick:function(){e.flipCards()},centerContent:Object(r.jsx)("div",{className:"menu-orbit-item",children:"Flip"})},"flip-slice"),Object(r.jsx)(gr.a,{centerContent:Object(r.jsx)("div",{onClick:function(e){wr(e),yr(e,"draw",o,t)},className:"menu-orbit-item",children:"Draw"}),hideOrbit:!0,autoClose:!0,onClose:Sr,rotation:null!==(a=null===(n=o.draw)||void 0===n?void 0:n.rot)&&void 0!==a?a:0,orbitRadius:150,children:Tr(Pr(e),null!==(s=null===(i=o.draw)||void 0===i?void 0:i.renderType)&&void 0!==s?s:fr.Normal)},"draw-menu-slice"),Object(r.jsx)(gr.a,{onClick:function(){e.shuffleStack()},centerContent:Object(r.jsx)("div",{className:"menu-orbit-item",children:"Shuffle"})},"shuffle-slice"),Object(r.jsx)(gr.a,{onClick:function(){e.clearCardTokens()},centerContent:Object(r.jsx)("div",{className:"menu-orbit-item",children:"Clear"})},"clear-slice"),Object(r.jsx)(gr.a,{centerContent:Object(r.jsx)("div",{onClick:function(e){wr(e),yr(e,"tokens",o,t)},className:"menu-orbit-item",children:"Tokens"}),hideOrbit:!0,autoClose:!0,onClose:Sr,rotation:null!==(d=null===(c=o.tokens)||void 0===c?void 0:c.rot)&&void 0!==d?d:0,orbitRadius:150,children:Tr(Or(e),null!==(l=null===(u=o.tokens)||void 0===u?void 0:u.renderType)&&void 0!==l?l:fr.Normal)},"tokens-slice"),Object(r.jsx)(gr.a,{centerContent:Object(r.jsx)("div",{onClick:function(e){wr(e),yr(e,"statuses",o,t)},className:"menu-orbit-item",children:"Statuses"}),hideOrbit:!0,autoClose:!0,onClose:Sr,rotation:null!==(h=null===(p=o.statuses)||void 0===p?void 0:p.rot)&&void 0!==h?h:0,orbitRadius:150,children:Tr(xr(e),null!==(m=null===(f=o.statuses)||void 0===f?void 0:f.renderType)&&void 0!==m?m:fr.Normal)},"statuses-slice"),Object(r.jsx)(gr.a,{onClick:function(){e.exhaustCard()},centerContent:Object(r.jsx)("div",{className:"menu-orbit-item",children:"Exhaust"})},"exhaust-slice")];w.length>0&&S.push(Object(r.jsx)(gr.a,{centerContent:Object(r.jsx)("div",{onClick:function(e){wr(e),yr(e,"modifiers",o,t)},className:"menu-orbit-item",children:"Modifiers"}),hideOrbit:!0,autoClose:!0,onClose:Sr,rotation:null!==(j=null===(b=o.modifiers)||void 0===b?void 0:b.rot)&&void 0!==j?j:0,orbitRadius:150,children:Tr(null!==(C=Ir(e))&&void 0!==C?C:[],null!==(T=null===(y=o.modifiers)||void 0===y?void 0:y.renderType)&&void 0!==T?T:fr.Normal)},"modifiers-menu-slice"));return Tr(S,null!==(g=null===(v=o.modifiers)||void 0===v?void 0:v.renderType)&&void 0!==g?g:fr.Normal)},xr=function(e){return e.currentGameType?Object.values(ao[e.currentGameType].tokens).filter((function(e){return!!e&&!e.isNumeric})).map((function(o){var t="touch-menu-slice-".concat(o.menuText.replace(/\s/g,"").toLocaleLowerCase());return Object(r.jsx)("div",{className:"menu-orbit-item nested-menu-item",onClick:function(){e.toggleToken({tokenType:o.tokenType,value:!hr(o.tokenType,e.selectedCardStacks)})},children:Object(r.jsx)("div",{children:o.menuText})},t)})):[]},Or=function(e){return e.currentGameType?Object.values(ao[e.currentGameType].tokens).filter((function(e){return!!e&&e.isNumeric})).flatMap((function(e){return[Object(N.a)(Object(N.a)({},e),{},{touchMenuLetter:"".concat(e.touchMenuLetter," +")}),Object(N.a)(Object(N.a)({},e),{},{touchMenuLetter:"".concat(e.touchMenuLetter," -")})]})).map((function(o){var t,a="touch-menu-slice-".concat(o.menuText.replace(/\s/g,"").toLocaleLowerCase());return a+=-1!==(null===(t=o.touchMenuLetter)||void 0===t?void 0:t.indexOf("+"))?"-plus":"",Object(r.jsx)("div",{className:"menu-orbit-item nested-menu-item",onClick:function(){var t;e.adjustCounterToken({tokenType:o.counterTokenType,delta:-1!==(null===(t=o.touchMenuLetter)||void 0===t?void 0:t.indexOf("+"))?1:-1})},children:Object(r.jsx)("div",{children:o.touchMenuLetter})},a)})):[]},Pr=function(e){return[Object(r.jsx)(gr.a,{centerContent:Object(r.jsx)("div",{className:"menu-orbit-item nested-menu-item",children:"Find Card"}),onClick:function(){1===e.selectedCardStacks.length&&(e.showCardSelector(e.selectedCardStacks[0],!1),e.hideRadialMenu())}},"find-card-slice"),Object(r.jsx)(gr.a,{centerContent:Object(r.jsx)("div",{className:"menu-orbit-item nested-menu-item",children:"Select Card"}),onClick:function(){1===e.selectedCardStacks.length&&(e.showCardSelector(e.selectedCardStacks[0],!0),e.hideRadialMenu())}},"select-card-slice"),Object(r.jsx)(gr.a,{centerContent:Object(r.jsx)("div",{className:"menu-orbit-item nested-menu-item",children:"1 faceup"}),onClick:function(){1===e.selectedCardStacks.length&&e.drawCardsOutOfCardStack({cardStackId:e.selectedCardStacks[0].id,numberToDraw:1,facedown:!1})}},"draw-one-faceup-slice"),Object(r.jsx)(gr.a,{centerContent:Object(r.jsx)("div",{className:"menu-orbit-item nested-menu-item",children:"1 facedown"}),onClick:function(){1===e.selectedCardStacks.length&&e.drawCardsOutOfCardStack({cardStackId:e.selectedCardStacks[0].id,numberToDraw:1,facedown:!0})}},"draw-one-facedown-slice"),Object(r.jsx)(gr.a,{centerContent:Object(r.jsx)("div",{onClick:wr,className:"menu-orbit-item nested-menu-item",children:"X faceup"}),onClose:Sr,autoClose:!0,hideOrbit:!0,children:Mr(e,vr.FaceUp)},"draw-x-faceup-slice"),Object(r.jsx)(gr.a,{centerContent:Object(r.jsx)("div",{onClick:wr,className:"menu-orbit-item nested-menu-item",children:"X facedown"}),onClose:Sr,autoClose:!0,hideOrbit:!0,children:Mr(e,vr.FaceDown)},"draw-x-faceup-slice")]},Mr=function(e,o){return Array.from({length:10},(function(e,o){return o+1})).map((function(t){return Object(r.jsx)("div",{className:"menu-orbit-item double-nested-menu-item",onClick:function(){1===e.selectedCardStacks.length&&e.drawCardsOutOfCardStack({cardStackId:e.selectedCardStacks[0].id,numberToDraw:t,facedown:o===vr.FaceDown})},children:t},"draw-".concat(t,"-cards-slice"))}))},Ir=function(e){return e.currentGameType?ao[e.currentGameType].modifiers.map((function(o){return Object(r.jsx)(gr.a,{centerContent:Object(r.jsx)("div",{onClick:wr,className:"menu-orbit-item nested-menu-item",children:o.attributeName}),onClose:Sr,autoClose:!0,hideOrbit:!0,children:Nr(e,o.attributeId)},"modifier-slice")})):null},Nr=function(e,o){return[Object(r.jsx)("div",{className:"menu-orbit-item double-nested-menu-item",onClick:function(){e.adjustModifier({modifierId:o,delta:1})},children:"Add 1"},"modifier-plus-one-slice"),Object(r.jsx)("div",{className:"menu-orbit-item double-nested-menu-item",onClick:function(){e.adjustModifier({modifierId:o,delta:-1})},children:"Remove 1"},"modifier-minus-one-slice"),Object(r.jsx)("div",{className:"menu-orbit-item double-nested-menu-item",onClick:function(){e.adjustModifier({modifierId:o,value:0})},children:"0"},"modifier-zero-slice")].concat(Array.from({length:3},(function(e,o){return o+1})).map((function(t){return Object(r.jsx)("div",{className:"menu-orbit-item double-nested-menu-item",onClick:function(){e.adjustModifier({modifierId:o,value:t})},children:t},"modifier-pos-".concat(t,"-cards-slice"))}))).concat(Array.from({length:3},(function(e,o){return o+1})).map((function(t){return Object(r.jsx)("div",{className:"menu-orbit-item double-nested-menu-item",onClick:function(){e.adjustModifier({modifierId:o,value:-1*t})},children:-1*t},"modifier-neg-".concat(t,"-cards-slice"))})))},Dr=function(e){var o=Object(a.useState)({}),t=Object(y.a)(o,2),n=t[0],s=t[1],i=e.position?{x:e.position.x-32,y:e.position.y-32}:{x:0,y:0},d=br(e.position),c=Cr(d),l=190;return d===fr.Normal&&(l=void 0),e.position?Object(r.jsx)(ur,{trasparentBackground:!0,offsetContent:!1,position:i,completed:function(){e.hideRadialMenu()},children:Object(r.jsx)("div",{onClick:function(e){e.stopPropagation(),e.preventDefault()},children:Object(r.jsx)(gr.a,{centerContent:Object(r.jsx)("div",{style:{display:"none"}}),open:!0,hideOrbit:!0,orbitRadius:l,rotation:c,children:_r(e,n,s)})})}):null},Rr=Object(d.c)((function(e){return{selectedCardStacks:(o=b,Object(Re.a)(ze,(function(e){return e.cards.filter((function(e){return e.selected&&e.controlledBy===o}))})))(e),currentGameType:nr(e).activeGameType,position:cr(e)};var o}),{flipCards:Lo,exhaustCard:Io,toggleToken:Bo,shuffleStack:no,adjustCounterToken:Go,hideRadialMenu:$,clearCardTokens:Qo,drawCardsOutOfCardStack:so,adjustModifier:Wo})(Dr),Er=t(293),Ar=function(e){Object(jt.a)(t,e);var o=Object(bt.a)(t);function t(){var e;Object(gt.a)(this,t);for(var r=arguments.length,a=new Array(r),n=0;n<r;n++)a[n]=arguments[n];return(e=o.call.apply(o,[this].concat(a))).inputValue="0",e.focusInputField=function(e){e&&setTimeout((function(){e.querySelector("input").focus()}),100)},e.handleKeyPress=function(o){"enter"===o.key.toLocaleLowerCase()&&e.complete(+e.inputValue)},e.handleClick=function(o){e.complete(+e.inputValue)},e.complete=function(o){e.props.updated({id:e.props.id,tokenType:e.props.tokenType,value:o})},e.cancelBubble=function(e){e.stopPropagation()},e}return Object(vt.a)(t,[{key:"render",value:function(){var e=this;return Object(r.jsxs)("div",{onClick:this.cancelBubble,onKeyPress:this.cancelBubble,className:"token-field-row",children:[Object(r.jsx)(Bt.a,{ref:this.focusInputField,onKeyPress:this.handleKeyPress,variant:"outlined",type:"number",onChange:function(o){e.inputValue=o.target.value}}),Object(r.jsx)(Er.a,{onClick:this.handleClick,style:{height:"56px",marginLeft:"5px"},variant:"outlined",color:"primary",children:"Set"})]})}}]),t}(a.Component),Fr=t(292),Lr=(t(254),t(170)),Br=t.n(Lr),Gr=t(171),Qr=t.n(Gr),Wr=t(172),Hr=t.n(Wr),Ur=t(173),zr=t.n(Ur),Vr=t(174),Kr=t.n(Vr),Jr=t(175),qr=t.n(Jr),Zr=function(e){Object(jt.a)(t,e);var o=Object(bt.a)(t);function t(){return Object(gt.a)(this,t),o.apply(this,arguments)}return Object(vt.a)(t,[{key:"render",value:function(){var e=this;return Object(r.jsxs)("div",{className:"touch-menu",children:[Object(r.jsx)(Fr.a,{onClick:function(){e.props.showContextMenuAtPosition({x:0,y:0})},children:Object(r.jsx)(Br.a,{fontSize:"large"})}),Object(r.jsx)(Fr.a,{className:this.props.panMode?"toggle-on":"",onClick:function(){e.props.togglePanMode()},children:Object(r.jsx)(Qr.a,{fontSize:"large"})}),Object(r.jsx)(Fr.a,{className:this.props.multiselectMode?"toggle-on":"",onClick:function(){e.props.toggleMultiselectMode()},children:Object(r.jsx)(Hr.a,{fontSize:"large"})}),Object(r.jsx)(Fr.a,{onClick:function(){e.props.anyCardsSelected&&e.props.showRadialMenuAtPosition({x:64,y:window.visualViewport.height/2})},children:Object(r.jsx)(zr.a,{fontSize:"large"})}),Object(r.jsx)(Fr.a,{onClick:function(){e.props.undo&&e.props.undo()},children:Object(r.jsx)(Kr.a,{fontSize:"large"})}),Object(r.jsx)(Fr.a,{onClick:function(){e.props.redo&&e.props.redo()},children:Object(r.jsx)(qr.a,{fontSize:"large"})})]})}}]),t}(a.Component),Yr=Object(d.c)((function(e){return{anyCardsSelected:(o=b,Object(Re.a)(ze,(function(e){return e.cards.some((function(e){return e.selected&&e.controlledBy===o}))})))(e),currentGameType:nr(e).activeGameType,panMode:Ke(e),multiselectMode:Je(e)};var o}),{togglePanMode:Ao,toggleMultiselectMode:Fo,flipCards:Lo,exhaustCard:Io,toggleToken:Bo,shuffleStack:no,adjustCounterToken:Go,showRadialMenuAtPosition:X,undo:g.ActionCreators.undo,redo:g.ActionCreators.redo})(Zr),Xr=function(e){navigator.clipboard.writeText(e)},$r=function(e){Object(jt.a)(t,e);var o=Object(bt.a)(t);function t(e){var a;return Object(gt.a)(this,t),(a=o.call(this,e)).stage=null,a.touchTimer=null,a.doubleTapTimer=null,a.lastCenter=null,a.lastDist=0,a.componentWillUnmount=function(){window.removeEventListener("resize",a.handleResize)},a.handleCounterValueUpdate=function(e){return function(o){a.props.updateCounterValue({id:e,delta:o})}},a.handleCounterDrag=function(e){return function(o){a.props.moveCounter({id:e,newPos:{x:o.target.x(),y:o.target.y()}})}},a.noOp=function(){},a.renderEmptyMessage=function(){return a.props.cards.cards.length>0?null:Object(r.jsx)("div",{children:Object(r.jsxs)("span",{children:["Right click and select 'Load Deck ID' to load a deck from"," ",ao[a.props.currentGameType].deckSite]})})},a.renderContextMenu=function(){var e;if(!a.state.showContextMenu)return null;var o=null===(e=a.stage)||void 0===e?void 0:e.container().getBoundingClientRect(),t=a.state.contextMenuPosition;if(!o||!t)throw new Error("Problem computing context menu position");return Object(r.jsx)(Jt,{position:{x:o.left+t.x,y:o.top+t.y},items:a.state.contextMenuItems,hideContextMenu:function(){return a.clearContextMenu()}})},a.renderPreviewCardModal=function(){return a.state.previewCardModal?Object(r.jsx)(ur,{position:{x:0,y:0},completed:function(){a.props.clearPreviewCard(),a.setState({previewCardModal:!1})}}):null},a.renderTouchMenu=function(){return Object(r.jsx)(Yr,{showContextMenuAtPosition:function(e){a.handleContextMenu(void 0,e)}})},a.renderDeckImporter=function(){var e;if(!a.state.showDeckImporter)return null;var o=null===(e=a.stage)||void 0===e?void 0:e.container().getBoundingClientRect(),t=a.state.deckImporterPosition;if(!o||!t)throw new Error("Problem computing deck importer position");return Object(r.jsx)(ur,{position:{x:o.left+t.x,y:o.top+t.y},completed:a.clearDeckImporter,children:Object(r.jsx)(Zt,{loadDeckId:a.handleImportDeck(a.getRelativePositionFromTarget(a.stage))})})},a.renderEncounterImporter=function(){var e;if(!a.state.showEncounterImporter)return null;var o=null===(e=a.stage)||void 0===e?void 0:e.container().getBoundingClientRect(),t=a.state.encounterImporterPosition;if(!o||!t)throw new Error("Problem computing deck importer position");var n={x:o.left+t.x,y:o.top+t.y};return Object(r.jsx)(ur,{position:n,completed:a.clearEncounterImporter,children:Object(r.jsx)(Xt,{currentGameType:a.props.currentGameType,loadCards:a.handleLoadEncounter(a.getRelativePositionFromTarget(a.stage))})})},a.renderCardSearch=function(){var e;if(!a.state.showCardSearch)return null;var o=null===(e=a.stage)||void 0===e?void 0:e.container().getBoundingClientRect(),t=a.state.cardSearchPosition;if(!o||!t)throw new Error("Problem computing card search position");var n={x:o.left+t.x,y:o.top+t.y};return a.state.cardStackForSearching?Object(r.jsx)(ur,{position:n,completed:a.clearCardSearch,children:Object(r.jsx)(Ut,{touchBased:a.state.cardSearchTouchBased,card:a.state.cardStackForSearching,cardSelected:a.handleCardSelectedFromCardStack(a.state.cardStackForSearching.id,n)})}):null},a.renderPeerConnector=function(){var e;if(!a.state.showPeerConnector)return null;var o=null===(e=a.stage)||void 0===e?void 0:e.container().getBoundingClientRect(),t=a.state.peerConnectorPosition;if(!o||!t)throw new Error("Problem computing peer connector position");var n={x:o.left+t.x,y:o.top+t.y};return a.state.showPeerConnector?Object(r.jsx)(ur,{position:n,completed:a.clearPeerConnector,children:Object(r.jsx)(ar,{connect:a.handlePeerConnect})}):null},a.renderTokenModifier=function(){var e;if(!a.state.showTokenValueModifier)return null;var o=null===(e=a.stage)||void 0===e?void 0:e.container().getBoundingClientRect(),t=a.state.tokenValueModifierPosition;if(!o||!t)throw new Error("Problem computing token Modifier position");var n={x:o.left+t.x,y:o.top+t.y};return a.state.showTokenValueModifier&&a.state.tokenValueModifierProps?Object(r.jsx)(ur,{position:n,completed:a.clearTokenValueModifier,children:Object(r.jsx)(Ar,{id:a.state.tokenValueModifierProps.id,tokenType:a.state.tokenValueModifierProps.tokenType,updated:function(e){a.props.adjustCounterToken(e),a.clearTokenValueModifier()}})}):null},a.handleLoadEncounter=function(e){return function(o){a.clearEncounterImporter(),o.forEach((function(o,t){a.props.addCardStack({position:{x:e.x+(ye+10)*t,y:e.y},cardJsonIds:o})}))}},a.handleImportDeck=function(e){return function(o){a.clearDeckImporter(),a.props.fetchDecklistById({gameType:a.props.currentGameType,decklistId:o,position:e})}},a.handlePeerConnect=function(e){a.clearPeerConnector(),a.props.connectToRemoteGame(e)},a.handleCardSelectedFromCardStack=function(e,o){return function(t){a.clearCardSearch(),a.props.pullCardOutOfCardStack({cardStackId:e,jsonId:t,pos:o})}},a.clearContextMenu=function(){a.setState({showContextMenu:!1,contextMenuPosition:null,contextMenuItems:[]})},a.clearDeckImporter=function(){a.setState({showDeckImporter:!1,deckImporterPosition:null})},a.clearTokenValueModifier=function(){a.setState({showTokenValueModifier:!1,tokenValueModifierProps:null,tokenValueModifierPosition:null})},a.clearEncounterImporter=function(){a.setState({showEncounterImporter:!1,encounterImporterPosition:null})},a.clearCardSearch=function(){a.setState({showCardSearch:!1,cardSearchTouchBased:!1,cardSearchPosition:null,cardStackForSearching:null})},a.clearPeerConnector=function(){a.setState({showPeerConnector:!1,peerConnectorPosition:null})},a.handleStageClickOrTap=function(e){if(!a.state.showContextMenu){var o=a.getRelativePositionFromTarget(a.stage);(a.props.panMode||xe(a.state.selectStartPos,o)<30)&&a.props.unselectAllCards()}},a.handleWheel=function(e){var o;if(e.evt.preventDefault(),a.stage){var t=a.props.gameState.stageZoom.x,r=null!==(o=a.stage.getPointerPosition())&&void 0!==o?o:{x:0,y:0},n=(r.x-a.stage.x())/t,s=(r.y-a.stage.y())/t,i=e.evt.deltaY<0?1.02*t:t/1.02;a.props.updateZoom({x:i,y:i});var d={x:r.x-n*i,y:r.y-s*i};a.props.updatePosition(d)}},a.handleCounterContextMenu=function(e){return function(o){var t,r;o.evt.preventDefault(),o.cancelBubble=!0;var n=a.props.counters.find((function(o){return o.id===e})),s=[{label:"Remove",action:function(){a.props.removeCounter(e)}},{label:"Reset",action:function(){var o;a.props.updateCounterValue({id:e,delta:-1*(null!==(o=null===n||void 0===n?void 0:n.value)&&void 0!==o?o:0)})}},{label:"Set Color",children:T.map((function(o){return{label:o,action:function(){a.props.updateCounterColor({id:e,newColor:o})}}}))}];a.setState({showContextMenu:!0,contextMenuPosition:null!==(t=null===(r=a.stage)||void 0===r?void 0:r.getPointerPosition())&&void 0!==t?t:null,contextMenuItems:s})}},a.handleCardContextMenu=function(e,o){var t,r,n;o.evt.preventDefault(),o.cancelBubble=!0;var s=a.props.cards.cards.find((function(o){return o.id===e}));a.props.selectCard({id:e,unselectOtherCards:!s||!s.selected});var i=a.props.cards.cards.find((function(o){return o.id===e})),d=(null===i||void 0===i||null===(t=i.cardStack)||void 0===t?void 0:t.length)||0,c=pr(a.props.cards.cards),l=[{label:"Flip",action:function(){a.props.flipCards()}}];d>1&&(l.push({label:"Shuffle",action:function(){a.props.shuffleStack()}}),l.push({label:"Find Specific Card",action:function(){var e,o;i&&a.setState({showCardSearch:!0,cardSearchPosition:null!==(e=null===(o=a.stage)||void 0===o?void 0:o.getPointerPosition())&&void 0!==e?e:null,cardStackForSearching:i})}}));var u=ao[a.props.currentGameType].tokens;u.stunned&&l.push({label:hr(E.Stunned,c)?u.stunned.menuRemoveText:u.stunned.menuText,action:function(){a.props.toggleToken({id:(null===i||void 0===i?void 0:i.id)||"",tokenType:E.Stunned,value:!hr(E.Stunned,c)})}}),u.confused&&l.push({label:hr(E.Confused,c)?u.confused.menuRemoveText:u.confused.menuText,action:function(){a.props.toggleToken({id:(null===i||void 0===i?void 0:i.id)||"",tokenType:E.Confused,value:!hr(E.Confused,c)})}}),u.tough&&l.push({label:hr(E.Tough,c)?u.tough.menuRemoveText:u.tough.menuText,action:function(){a.props.toggleToken({id:(null===i||void 0===i?void 0:i.id)||"",tokenType:E.Tough,value:!hr(E.Tough,c)})}}),u.damage&&l.push({label:u.damage.menuText,action:function(){var e,o;a.setState({showContextMenu:!1,contextMenuItems:[],contextMenuPosition:null,showTokenValueModifier:!0,tokenValueModifierProps:{id:(null===i||void 0===i?void 0:i.id)||"",tokenType:A.Damage},tokenValueModifierPosition:null!==(e=null===(o=a.stage)||void 0===o?void 0:o.getPointerPosition())&&void 0!==e?e:null})}}),u.threat&&l.push({label:u.threat.menuText,action:function(){var e,o;a.setState({showContextMenu:!1,contextMenuItems:[],contextMenuPosition:null,showTokenValueModifier:!0,tokenValueModifierProps:{id:(null===i||void 0===i?void 0:i.id)||"",tokenType:A.Threat},tokenValueModifierPosition:null!==(e=null===(o=a.stage)||void 0===o?void 0:o.getPointerPosition())&&void 0!==e?e:null})}}),u.generic&&l.push({label:u.generic.menuText,action:function(){var e,o;a.setState({showContextMenu:!1,contextMenuItems:[],contextMenuPosition:null,showTokenValueModifier:!0,tokenValueModifierProps:{id:(null===i||void 0===i?void 0:i.id)||"",tokenType:A.Generic},tokenValueModifierPosition:null!==(e=null===(o=a.stage)||void 0===o?void 0:o.getPointerPosition())&&void 0!==e?e:null})}}),l.push({label:"Remove All Tokens",action:function(){a.props.adjustCounterToken({id:(null===i||void 0===i?void 0:i.id)||"",tokenType:A.Damage,value:0}),a.props.adjustCounterToken({id:(null===i||void 0===i?void 0:i.id)||"",tokenType:A.Threat,value:0}),a.props.adjustCounterToken({id:(null===i||void 0===i?void 0:i.id)||"",tokenType:A.Generic,value:0})}});var h=ao[a.props.currentGameType].modifiers;h.length>0&&l.push({label:"Modifiers",children:h.map((function(e){return{label:e.attributeName,children:[{label:"Add 1",action:function(){a.props.adjustModifier({id:(null===i||void 0===i?void 0:i.id)||"",modifierId:e.attributeId,delta:1})}},{label:"Remove 1",action:function(){a.props.adjustModifier({id:(null===i||void 0===i?void 0:i.id)||"",modifierId:e.attributeId,delta:-1})}},{label:"-3",action:function(){a.props.adjustModifier({id:(null===i||void 0===i?void 0:i.id)||"",modifierId:e.attributeId,value:-3})}},{label:"-2",action:function(){a.props.adjustModifier({id:(null===i||void 0===i?void 0:i.id)||"",modifierId:e.attributeId,value:-2})}},{label:"-1",action:function(){a.props.adjustModifier({id:(null===i||void 0===i?void 0:i.id)||"",modifierId:e.attributeId,value:-1})}},{label:"0",action:function(){a.props.adjustModifier({id:(null===i||void 0===i?void 0:i.id)||"",modifierId:e.attributeId,value:0})}},{label:"1",action:function(){a.props.adjustModifier({id:(null===i||void 0===i?void 0:i.id)||"",modifierId:e.attributeId,value:1})}},{label:"2",action:function(){a.props.adjustModifier({id:(null===i||void 0===i?void 0:i.id)||"",modifierId:e.attributeId,value:2})}},{label:"3",action:function(){a.props.adjustModifier({id:(null===i||void 0===i?void 0:i.id)||"",modifierId:e.attributeId,value:3})}}]}})).concat([{label:"Clear all modifiers",action:function(){a.props.clearAllModifiers({id:(null===i||void 0===i?void 0:i.id)||""})}}])}),a.setState({showContextMenu:!0,contextMenuPosition:null!==(r=null===(n=a.stage)||void 0===n?void 0:n.getPointerPosition())&&void 0!==r?r:null,contextMenuItems:l})},a.handleCardClick=function(e){return function(o,t,r){var n=t.evt.shiftKey||t.evt.metaKey||t.evt.ctrlKey;e.selected&&(n||a.props.multiselectMode)?a.props.toggleSelectCard(o):(a.props.selectCard({id:o,unselectOtherCards:!n&&!a.props.multiselectMode}),!r||n||a.props.multiselectMode||a.doubleTapTimer||a.state.showContextMenu||(a.doubleTapTimer=setTimeout((function(){var e;a.props.showRadialMenuAtPosition((null===(e=a.stage)||void 0===e?void 0:e.getPointerPosition())||{x:0,y:0}),a.doubleTapTimer=null}),200)))}},a.handleSelectAndExhaust=function(e,o){var t=o.evt.shiftKey||o.evt.metaKey||o.evt.ctrlKey;a.props.selectCard({id:e,unselectOtherCards:!t}),a.props.exhaustCard(e)},a.showOrToggleModalPreviewCard=function(e,o){a.doubleTapTimer&&(clearTimeout(a.doubleTapTimer),a.doubleTapTimer=null),a.props.gameState.previewCard&&a.props.gameState.previewCard.id===e?a.props.clearPreviewCard():(a.setState({previewCardModal:!0}),a.props.setPreviewCardId(e))},a.handleCardDragStart=function(e,o){var t=!1;if(!(a.props.cards.cards.filter((function(e){return e.selected&&e.controlledBy===b})).length>1)){var r=a.props.cards.cards.find((function(o){return o.id===e})),n=((null===r||void 0===r?void 0:r.cardStack)||[]).length>1;if(r&&n){var s={x:r.x+(r.exhausted?Te:ye)/2,y:r.y-(r.exhausted?ye:Te)/2};xe(s,a.getRelativePositionFromTarget(a.stage))<50&&(t=!0)}}a.props.startCardMove({id:e,splitTopCard:t})},a.handleKeyPress=function(e){var o=e.ctrlKey||e.metaKey,t=e.key.toLocaleLowerCase(),r=parseInt(t);if("p"===t)a.props.togglePanMode();else if("f"===t)a.props.flipCards();else if("e"===t)a.props.exhaustCard();else if("s"===t)a.props.shuffleStack();else if(!Number.isNaN(r))if(o);else{var n=pr(a.props.cards.cards);1!==n.length?console.log("will not be drawing any cards because the number of selected stacks is "+n.length):a.props.drawCardsOutOfCardStack({cardStackId:n[0].id,numberToDraw:r})}},a.handleKeyDown=function(e){var o=e.key.toLocaleLowerCase(),t=parseInt(o);if((e.ctrlKey||e.metaKey)&&!Number.isNaN(t)){var r=ao[a.props.currentGameType].tokens;switch(t){case 1:r.damage&&a.props.adjustCounterToken({tokenType:A.Damage,delta:1});break;case 2:r.threat&&a.props.adjustCounterToken({tokenType:A.Threat,delta:1});break;case 3:r.generic&&a.props.adjustCounterToken({tokenType:A.Generic,delta:1});break;case 4:r.damage&&a.props.adjustCounterToken({tokenType:A.Damage,delta:-1});break;case 5:r.threat&&a.props.adjustCounterToken({tokenType:A.Threat,delta:-1});break;case 6:r.generic&&a.props.adjustCounterToken({tokenType:A.Generic,delta:-1})}e.preventDefault()}e.shiftKey&&(e.ctrlKey||e.metaKey)&&"z"===e.key?a.props.redo():(e.ctrlKey||e.metaKey)&&"z"===e.key&&(e.preventDefault(),a.props.undo())},a.getRawPreviewCardPosition=function(e){var o,t,r=null!==(o=null===(t=a.stage)||void 0===t?void 0:t.getPointerPosition())&&void 0!==o?o:{x:0,y:0},n=window.innerWidth/2,s=window.innerHeight/2,i=e?we:Se,d=e?Se:we;return a.state.previewCardModal?{x:n,y:s}:r.x<n?{x:window.innerWidth-i/2,y:d/2}:{x:i/2,y:d/2}},a.getRelativePositionFromTarget=function(e,o){var t=e.getAbsoluteTransform().copy();t.invert();var r=o||e.getPointerPosition();return t.point(r)},a.handleMouseDown=function(e){if(e.evt instanceof MouseEvent&&0===e.evt.button||e.evt instanceof TouchEvent){var o=a.getRelativePositionFromTarget(a.stage);a.setState({selectStartPos:{x:o.x,y:o.y},selecting:!0})}return!1},a.getSelectionRectInfo=function(){var e=a.state.selectStartPos,o=a.state.selectRect;return{height:Math.abs(o.height),width:Math.abs(o.width),x:o.width<0?e.x+o.width:e.x,y:o.height<0?e.y+o.height:e.y}},a.handleMouseUp=function(e){if(a.state.drewASelectionRect){var o=a.getSelectionRectInfo(),t=a.props.cards.cards.reduce((function(e,t){return Ct.boxBox(o.x,o.y,o.width,o.height,t.x-50,t.y-75,ye,Te)&&e.push(t),e}),[]),r=e.evt.shiftKey||e.evt.metaKey||e.evt.ctrlKey;a.props.selectMultipleCards({ids:t.map((function(e){return e.id})),unselectOtherCards:!r})}return a.setState({drewASelectionRect:!1,selectRect:{height:0,width:0},selecting:!1}),!1},a.handleTouchStart=function(e){a.touchTimer&&(clearTimeout(a.touchTimer),a.touchTimer=null),a.touchTimer=setTimeout((function(){a.handleContextMenu(e)}),750),a.props.panMode||a.handleMouseDown(e)},a.handleTouchMove=function(e){e.evt.preventDefault();var o=e.evt.touches[0],t=e.evt.touches[1];a.touchTimer&&(clearTimeout(a.touchTimer),a.touchTimer=null),o&&t?a.handleMultiTouch(o,t):a.handleMouseMove(e)},a.handleMultiTouch=function(e,o){if(a.stage){a.stage.isDragging()&&a.stage.stopDrag();var t={x:e.clientX,y:e.clientY},r={x:o.clientX,y:o.clientY};if(a.lastCenter){var n=Oe(t,r),s=xe(t,r);a.lastDist||(a.lastDist=s);var i=(n.x-a.stage.x())/a.props.gameState.stageZoom.x,d=(n.y-a.stage.y())/a.props.gameState.stageZoom.y,c=a.props.gameState.stageZoom.x*(s/a.lastDist);a.props.updateZoom({x:c,y:c});var l=n.x-a.lastCenter.x,u=n.y-a.lastCenter.y,h={x:n.x-i*c+l,y:n.y-d*c+u};a.props.updatePosition(h),a.lastDist=s,a.lastCenter=n}else a.lastCenter=Oe(t,r)}},a.handleTouchEnd=function(e){a.lastDist=0,a.lastCenter=null,a.touchTimer&&(clearTimeout(a.touchTimer),a.touchTimer=null),a.props.panMode||a.handleMouseUp(e)},a.handleMouseMove=function(e){if(a.state.selecting){var o=a.getRelativePositionFromTarget(e.currentTarget);a.setState({drewASelectionRect:!0,selectRect:{height:o.y-a.state.selectStartPos.y,width:o.x-a.state.selectStartPos.x}})}e.cancelBubble=!0},a.handleContextMenu=function(e,o){var t,r;a.touchTimer&&(clearTimeout(a.touchTimer),a.touchTimer=null),e&&(e.evt.preventDefault(),e.cancelBubble=!0);var n=[{label:"Undo",action:a.props.undo},{label:"Redo",action:a.props.redo},{label:"Load Deck by ID",action:function(){var e,o;a.setState({showDeckImporter:!0,deckImporterPosition:null!==(e=null===(o=a.stage)||void 0===o?void 0:o.getPointerPosition())&&void 0!==e?e:{x:0,y:0}})}},{label:"Load Deck from txt file",fileLoadedAction:function(e){var o,t;a.props.createDeckFromTxt({gameType:a.props.currentGameType,position:null!==(o=null===(t=a.stage)||void 0===t?void 0:t.getPointerPosition())&&void 0!==o?o:{x:0,y:0},txtContents:e})},fileUploader:!0},{label:"Load Deck from json file",fileLoadedAction:function(e){var o,t;a.props.createDeckFromJson({gameType:a.props.currentGameType,position:null!==(o=null===(t=a.stage)||void 0===t?void 0:t.getPointerPosition())&&void 0!==o?o:{x:0,y:0},jsonContents:e})},fileUploader:!0},{label:"Load ".concat(ao[a.props.currentGameType].encounterUiName),action:function(){var e,o;a.setState({showEncounterImporter:!0,encounterImporterPosition:null!==(e=null===(o=a.stage)||void 0===o?void 0:o.getPointerPosition())&&void 0!==e?e:null})}},{label:"Create new counter",action:function(){var e;a.props.addNewCounter(null!==(e=a.getRelativePositionFromTarget(a.stage))&&void 0!==e?e:{x:0,y:0})}},{label:"Reset Game",action:a.props.resetApp},{label:"Quit Game",action:function(){a.props.quitGame(),a.props.resetApp()}},{label:"Connect to Remote Game",action:function(){var e,o;a.setState({showPeerConnector:!0,peerConnectorPosition:null!==(e=null===(o=a.stage)||void 0===o?void 0:o.getPointerPosition())&&void 0!==e?e:null})}},{label:"Request resync from Remote Game",action:a.props.requestResync},{label:"Peer id is ".concat(a.props.peerId),action:function(){var e;a.props.peerId&&Xr((e=a.props.peerId,"".concat(window.location.origin).concat(window.location.pathname,"?remote=").concat(e)))}},{label:"Copy game state as url",action:function(){a.props.generateGameStateUrl()}}];a.setState({showContextMenu:!0,contextMenuPosition:null!==(t=null!==o&&void 0!==o?o:null===(r=a.stage)||void 0===r?void 0:r.getPointerPosition())&&void 0!==t?t:null,contextMenuItems:n})},a.getCardType=function(e){var o;if(0===Object.keys(a.props.cardsData).length)return"";var t=a.props.cardsData[e.cardStack[0].jsonId];return(null!==(o=null===t||void 0===t?void 0:t.typeCode)&&void 0!==o?o:"").toLocaleLowerCase()},a.getCardName=function(e){var o,t,r=e.faceup?e.cardStack[0]:e.cardStack[e.cardStack.length-1];return null!==(o=null===(t=a.props.cardsData[r.jsonId])||void 0===t?void 0:t.name)&&void 0!==o?o:""},a.getCardCode=function(e){var o,t,r,n=e.faceup?e.cardStack[0]:e.cardStack[e.cardStack.length-1];n||console.error("Could not get card in question for stack:",e);var s=null!==(o=null===n||void 0===n?void 0:n.jsonId)&&void 0!==o?o:"missing-id";return null!==(t=null===(r=a.props.cardsData[s])||void 0===r?void 0:r.code)&&void 0!==t?t:"code missing for ".concat(s)},a.getImgUrls=function(e){if(0===Object.keys(a.props.cardsData).length)return[];var o=[],t=a.props.cardsData[e.cardStack[0].jsonId];if(!t)return[];var r=t;if(r.images)return e.faceup?[r.images.front]:r.images.back?[r.images.back]:["encounter"===t.extraInfo.factionCode?"/images/standard/encounter_card_back_"+a.props.currentGameType+".png":"/images/standard/card_back_"+a.props.currentGameType+".png"];e.faceup||t.backLink||t.doubleSided?o=[a.generateLCGCDNImageUrl(t,e.faceup)]:(r=null,o=["encounter"===t.extraInfo.factionCode?"/images/standard/encounter_card_back_"+a.props.currentGameType+".png":"/images/standard/card_back_"+a.props.currentGameType+".png"]);var n="";r&&(e.faceup?n=r.code:r.backLink?n=r.backLink:r.doubleSided&&(n="".concat(r.code,"_double_sided_back")));var s=r?a.checkMissingImageMap(n):null;return s&&o.unshift(s),o},a.handleResize=function(){a.setState({stageHeight:window.innerHeight,stageWidth:window.innerWidth})},Tt.a&&(Tt.a.hitOnDragEnabled=!0),a.state={drewASelectionRect:!1,selectRect:{height:0,width:0},selectStartPos:{x:0,y:0},selecting:!1,showContextMenu:!1,contextMenuPosition:null,contextMenuItems:[],showDeckImporter:!1,deckImporterPosition:null,showEncounterImporter:!1,encounterImporterPosition:null,showCardSearch:!1,cardSearchTouchBased:!1,cardSearchPosition:null,cardStackForSearching:null,showPeerConnector:!1,peerConnectorPosition:null,showTokenValueModifier:!1,tokenValueModifierProps:null,tokenValueModifierPosition:null,playmatImage:null,playmatImageLoaded:!1,previewCardModal:!1,stageWidth:window.innerWidth,stageHeight:window.innerHeight},a}return Object(vt.a)(t,[{key:"componentDidMount",value:function(){var e=this,o=new Image;o.onload=function(){e.setState({playmatImage:o,playmatImageLoaded:!0})},o.onerror=function(e){console.error(e)},o.src=ao[this.props.currentGameType].backgroundImageLocation,this.props.loadCardsData(),this.props.allJsonData(""),window.addEventListener("resize",this.handleResize)}},{key:"render",value:function(){var e,o,t=this;document.activeElement===document.body&&setTimeout((function(){var e=document.querySelector(".play-area");null===e||void 0===e||e.focus()}),0);var a=this.props.cards.cards.filter((function(e){return!e.dragging})).map((function(e){var o,a,n;return Object(r.jsx)(Rt,{currentGameType:t.props.currentGameType,code:t.getCardCode(e),name:t.getCardName(e),selectedColor:null!==(o=t.props.playerColors[e.controlledBy])&&void 0!==o?o:"black",controlledBy:e.controlledBy,id:e.id,x:e.x,y:e.y,exhausted:e.exhausted,fill:e.fill,selected:e.selected,dropTargetColor:null!==(a=t.props.playerColors[null===(n=t.props.dropTargetCardsById[e.id])||void 0===n?void 0:n.ownerRef])&&void 0!==a?a:"",dragging:e.dragging,shuffling:e.shuffling,handleDragStart:t.handleCardDragStart,handleDragMove:t.props.cardMove,handleDragEnd:t.props.endCardMove,handleDoubleClick:t.handleSelectAndExhaust,handleDoubleTap:t.showOrToggleModalPreviewCard,handleClick:t.handleCardClick(e),handleHover:t.props.setPreviewCardId,handleHoverLeave:t.props.clearPreviewCard,handleContextMenu:t.handleCardContextMenu,imgUrls:t.getImgUrls(e),typeCode:t.getCardType(e),faceup:e.faceup,numCardsInStack:e.cardStack.length,cardState:{stunned:e.statusTokens.stunned,confused:e.statusTokens.confused,tough:e.statusTokens.tough,tokens:{damage:0,threat:0,generic:0}}},e.id)})),n=this.props.cards.ghostCards.map((function(e){var o;return Object(r.jsx)(Rt,{currentGameType:t.props.currentGameType,name:t.getCardName(e),code:t.getCardCode(e),selectedColor:null!==(o=t.props.playerColors[e.controlledBy])&&void 0!==o?o:"black",controlledBy:e.controlledBy,id:e.id,x:e.x,y:e.y,exhausted:e.exhausted,fill:e.fill,selected:!1,dragging:!1,shuffling:!1,imgUrls:t.getImgUrls(e),typeCode:t.getCardType(e),faceup:e.faceup,isGhost:!0},"ghost".concat(e.id))})),s=this.props.cards.cards.filter((function(e){return e.dragging})).map((function(e){var o;return Object(r.jsx)(Rt,{currentGameType:t.props.currentGameType,name:t.getCardName(e),code:t.getCardCode(e),selectedColor:null!==(o=t.props.playerColors[e.controlledBy])&&void 0!==o?o:"black",controlledBy:e.controlledBy,id:e.id,x:e.x,y:e.y,exhausted:e.exhausted,fill:e.fill,selected:e.selected,dragging:e.dragging,shuffling:e.shuffling,handleDragStart:t.handleCardDragStart,handleDragMove:t.props.cardMove,handleDragEnd:t.props.endCardMove,imgUrls:t.getImgUrls(e),typeCode:t.getCardType(e),faceup:e.faceup,numCardsInStack:e.cardStack.length},e.id)})),i=this.props.cards.cards.some((function(e){return e.dragging&&e.controlledBy===b})),c=this.props.menuPreviewCard?[this.props.menuPreviewCard]:this.props.cards.cards.filter((function(e){return!!t.props.gameState.previewCard&&e.id===t.props.gameState.previewCard.id})),l=this.stage?c.filter((function(e){return!t.state.selecting&&!i})).map((function(e){var o,a,n=Nt.includes(t.getCardType(e)),s=t.getImgUrls(e),i=t.getRawPreviewCardPosition(n),d=t.getRelativePositionFromTarget(t.stage,i),c=Se;return c*=(a=Math.min(we,n?window.innerWidth:window.innerHeight))/we,s.some((function(e){return-1!==e.indexOf("card_back")}))?null:Object(r.jsx)(Rt,{currentGameType:t.props.currentGameType,name:t.getCardName(e),code:t.getCardCode(e),selectedColor:null!==(o=t.props.playerColors[e.controlledBy])&&void 0!==o?o:"black",controlledBy:e.controlledBy,id:e.id,x:d.x,y:d.y,exhausted:n,fill:e.fill,selected:!1,dragging:!1,shuffling:!1,imgUrls:s,typeCode:t.getCardType(e),faceup:e.faceup,height:a/t.props.gameState.stageZoom.y,width:c/t.props.gameState.stageZoom.x,isPreview:!0},"preview".concat(e.id))})).filter((function(e){return null!==e})):[],u=this.state.playmatImageLoaded&&(null===(e=this.state.playmatImage)||void 0===e?void 0:e.naturalWidth)?2880/(null===(o=this.state.playmatImage)||void 0===o?void 0:o.naturalWidth):1;return Object(r.jsxs)("div",{className:"play-area",tabIndex:1,onKeyDown:this.handleKeyDown,onKeyPress:this.handleKeyPress,children:[Object(r.jsx)(Rr,{showCardSelector:function(e,o){var r,a;t.setState({showCardSearch:!0,cardSearchTouchBased:o,cardSearchPosition:null!==(r=null===(a=t.stage)||void 0===a?void 0:a.getPointerPosition())&&void 0!==r?r:null,cardStackForSearching:e})}}),this.renderEmptyMessage(),this.renderContextMenu(),this.renderPreviewCardModal(),this.renderTouchMenu(),this.renderDeckImporter(),this.renderEncounterImporter(),this.renderCardSearch(),this.renderPeerConnector(),this.renderTokenModifier(),Object(r.jsx)(d.b.Consumer,{children:function(e){var o,i,c=e.store;return Object(r.jsx)(yt.d,{ref:function(e){e&&(t.stage=e)},x:t.props.gameState.stagePosition.x,y:t.props.gameState.stagePosition.y,width:t.state.stageWidth,height:t.state.stageHeight,onClick:t.handleStageClickOrTap,onTap:t.handleStageClickOrTap,onMouseDown:t.props.panMode?t.noOp:t.handleMouseDown,onMouseUp:t.props.panMode?t.noOp:t.handleMouseUp,onMouseMove:t.props.panMode?t.noOp:t.handleMouseMove,onTouchStart:t.handleTouchStart,onTouchMove:t.handleTouchMove,onTouchEnd:t.handleTouchEnd,onContextMenu:t.handleContextMenu,scale:t.props.gameState.stageZoom,onWheel:t.handleWheel,draggable:t.props.panMode,onDragMove:t.noOp,onDragEnd:t.noOp,preventDefault:!0,children:Object(r.jsxs)(d.a,{store:c,children:[Object(r.jsx)(yt.b,{children:Object(r.jsx)(yt.c,{fill:t.state.playmatImageLoaded?void 0:"lightgray",scale:{x:u,y:u},width:t.state.playmatImageLoaded?null===(o=t.state.playmatImage)||void 0===o?void 0:o.naturalWidth:2880,height:t.state.playmatImageLoaded?null===(i=t.state.playmatImage)||void 0===i?void 0:i.naturalHeight:1440,fillPatternImage:t.state.playmatImageLoaded&&t.state.playmatImage?t.state.playmatImage:void 0})}),Object(r.jsx)(yt.b,{children:t.props.counters.map((function(e){return Object(r.jsx)(qt,{id:e.id,pos:e.position,value:e.value,color:e.color,updateCounterValueBy:t.handleCounterValueUpdate(e.id),handleContextMenu:t.handleCounterContextMenu(e.id),onDragEnd:t.handleCounterDrag(e.id)},"".concat(e.id,"-counter"))}))}),Object(r.jsxs)(yt.b,{preventDefault:!0,children:[n.concat(a).concat(s),Object(r.jsx)(rr,{currentGameType:t.props.currentGameType}),l]}),Object(r.jsx)(yt.b,{children:Object(r.jsx)(yt.c,{x:t.state.selectStartPos.x,y:t.state.selectStartPos.y,width:t.state.selectRect.width,height:t.state.selectRect.height,stroke:"yellow",strokeWidth:4})})]})})}})]})}},{key:"checkMissingImageMap",value:function(e){var o;return null!==(o=Pt[e])&&void 0!==o?o:null}},{key:"generateLCGCDNImageUrl",value:function(e,o){var t,r;if(!e)return"https://lcgcdn.s3.amazonaws.com/mc/NOPE.jpg";var a=e.code;!o&&e.backLink&&(a=e.backLink);for(var n=null!==(t=Ze[null!==(r=e.extraInfo.packCode)&&void 0!==r?r:""])&&void 0!==t?t:a.substring(0,2),s=a.substring(2);"0"===s[0];)s=s.substring(1);s=s.toLocaleUpperCase();var i="";return e.doubleSided&&(i=o?"A":"B"),"https://lcgcdn.s3.amazonaws.com/mc/MC".concat(n,"en_").concat(s).concat(i,".jpg")}}]),t}(a.Component),ea=["ant.json","ant_encounter.json","bkw.json","bkw_encounter.json","cap.json","cap_encounter.json","core.json","core_encounter.json","drax.json","drax_encounter.json","drs.json","drs_encounter.json","gam.json","gam_encounter.json","gmw.json","gmw_encounter.json","gob_encounter.json","hlk.json","hlk_encounter.json","msm.json","msm_encounter.json","mts.json","mts_encounter.json","qsv.json","qsv_encounter.json","ron_encounter.json","scw.json","scw_encounter.json","stld.json","stld_encounter.json","thor.json","thor_encounter.json","toafk_encounter.json","trors.json","trors_encounter.json","twc_encounter.json","vnm.json","vnm_encounter.json","wsp.json","wsp_encounter.json"],oa=["A Journey To Rhosgobel.json","A Journey to Rhosgobel Nightmare.json","A Knife in the Dark Nightmare.json","A Shadow in the East.json","A Shadow of the Past Nightmare.json","A Storm on Cobas Haven Nightmare.json","A Storm on Cobas Haven.json","Across the Ettenmoors Nightmare.json","Across the Ettenmoors.json","Among the Outlaws.json","Assault on Osgiliath Nightmare.json","Assault on Osgiliath.json","Attack on Dol Guldur.json","Beneath the Sands.json","Breaking of the Fellowship Nightmare.json","Celebrimbor's Secret Nightmare.json","Celebrimbor's Secret.json","Challenge of the Wainriders.json","Children of Eorl.json","Conflict at the Carrock Nightmare.json","Conflict at the Carrock.json","Core Set.json","Deadmen's Dike Nightmare.json","Dungeons Deep and Caverns Dim Nightmare.json","Encounter at Amon D\xeen Nightmare.json","Encounter at Amon D\xeen.json","Escape From Dol Guldur Nightmare.json","Escape from Khazad-d\xfbm.json","Escape from Mount Gram Nightmare.json","Escape from Mount Gram.json","Fire in the Night.json","First Age.json","Flies and Spiders Nightmare.json","Flight from Moria Nightmare.json","Flight of the Stormcaller Nightmare.json","Flight of the Stormcaller.json","Flight to the Ford Nightmare.json","Fog on the Barrow-downs.json","Foundations of Stone Nightmare.json","Foundations of Stone.json","Heirs of N\xfamenor.json","Helm's Deep Nightmare.json","Into Fangorn Nightmare.json","Into Ithilien Nightmare.json","Into the Pit Nightmare.json","Intruders in Chetwood Nightmare.json","Journey Along the Anduin Nightmare.json","Journey in the Dark Nightmare.json","Journey to the Cross-roads Nightmare.json","Khazad-d\xfbm.json","Mount Gundabad.json","Murder at the Prancing Pony.json","Over the Misty Mountains Grim Nightmare.json","Passage Through Mirkwood Nightmare.json","Peril in Pelargir Nightmare.json","Race Across Harad.json","Raid on the Grey Havens Nightmare.json","Return to Mirkwood Nightmare.json","Return to Mirkwood.json","Road to Rivendell Nightmare.json","Road to Rivendell.json","Roam Across Rhovanion.json","Shadow and Flame Nightmare.json","Shadow and Flame.json","Shelob's Lair Nightmare.json","Temple of the Deceived Nightmare.json","Temple of the Deceived.json","The Aldburg Plot.json","The Antlered Crown Nightmare.json","The Antlered Crown.json","The Battle of Carn D\xfbm Nightmare.json","The Battle of Carn D\xfbm.json","The Battle of Five Armies Nightmare.json","The Battle of Lake-town.json","The Betrayal of M\xeem.json","The Black Riders.json","The Black Serpent.json","The Blood of Gondor Nightmare.json","The Blood of Gondor.json","The City of Corsairs Nightmare.json","The City of Corsairs.json","The City of Ulfast.json","The Crossings of Poros.json","The Dead Marshes Nightmare.json","The Dead Marshes.json","The Dread Realm Nightmare.json","The Dread Realm.json","The Drowned Ruins Nightmare.json","The Drowned Ruins.json","The Dr\xfaadan Forest Nightmare.json","The Dr\xfaadan Forest.json","The Dungeons of Cirith Gurat.json","The Dunland Trap Nightmare.json","The Dunland Trap.json","The Fall of Nargothrond.json","The Fate of N\xfamenor Nightmare.json","The Fate of Wilderland.json","The Flame of the West.json","The Fords of Isen Nightmare.json","The Fortress of Nurn.json","The Ghost of Framsburg.json","The Grey Havens.json","The Hills of Emyn Muil Nightmare.json","The Hills of Emyn Muil.json","The Hobbit: On the Doorstep.json","The Hobbit: Over Hill and Under Hill.json","The Hunt for Gollum Nightmare.json","The Hunt for Gollum.json","The Hunt for the Dreadnaught.json","The Land of Shadow.json","The Land of Sorrow.json","The Lonely Mountain Nightmare.json","The Long Dark Nightmare.json","The Long Dark.json","The Lost Realm.json","The Massing at Osgiliath.json","The Mines of Moria.json","The Morgul Vale Nightmare.json","The Morgul Vale.json","The Mountain of Fire.json","The M\xfbmakil.json","The N\xeen-in-Eilph Nightmare.json","The N\xeen-in-Eilph.json","The Old Forest.json","The Passage of the Marshes Nightmare.json","The Redhorn Gate Nightmare.json","The Redhorn Gate.json","The Ring Goes South Nightmare.json","The Road Darkens.json","The Road to Isengard Nightmare.json","The Ruins of Belegost.json","The Sands of Harad.json","The Scouring of the Shire.json","The Seventh Level Nightmare.json","The Siege of Ann\xfaminas.json","The Siege of Cair Andros Nightmare.json","The Steward's Fear Nightmare.json","The Steward's Fear.json","The Stone of Erech.json","The Thing in the Depths Nightmare.json","The Thing in the Depths.json","The Three Trials Nightmare.json","The Three Trials.json","The Treachery of Rhudaur Nightmare.json","The Treachery of Rhudaur.json","The Treason of Saruman.json","The Uruk-hai Nightmare.json","The Voice of Isengard.json","The Wastes of Eriador Nightmare.json","The Wastes of Eriador.json","The Watcher in the Water Nightmare.json","The Watcher in the Water.json","The Weather Hills Nightmare.json","The Wilds of Rhovanion.json","The Withered Heath.json","The Wizard's Quest.json","The Woodland Realm.json","To Catch an Orc Nightmare.json","Trial Upon the Marches.json","Trouble in Tharbad Nightmare.json","Trouble in Tharbad.json","Two-Player Limited Edition Starter.json","Under the Ash Mountains.json","Voyage Across Belegaer Nightmare.json","We Must Away, Ere Break of Day Nightmare.json","Wrath and Ruin.json"],ta=function(){var e=Object(Ie.a)(Me.a.mark((function e(o){var t;return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,De.a.get("/json_data/"+o);case 2:return t=e.sent,e.abrupt("return",{res:t,packCode:o.split(".json")[0]});case 4:case"end":return e.stop()}}),e)})));return function(o){return e.apply(this,arguments)}}(),ra=function(){var e=Object(Ie.a)(Me.a.mark((function e(o){var t;return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,De.a.get("/json_data/"+o);case 2:return t=e.sent,e.abrupt("return",{res:t,packCode:o.split(".json")[0]});case 4:case"end":return e.stop()}}),e)})));return function(o){return e.apply(this,arguments)}}(),aa=function(){var e=Object(Ie.a)(Me.a.mark((function e(o){var t;return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,De.a.get("/json_data/scenarios/"+o+".json");case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(o){return e.apply(this,arguments)}}(),na=Object(d.c)((function(e){return{playerColors:sr(e),cards:ze(e),cardsData:Fe(e),panMode:Ke(e),multiselectMode:Je(e),gameState:nr(e),counters:or(e),peerId:ir(e),dropTargetCardsById:qe(e),menuPreviewCard:lr(e)}}),{cardMove:No,endCardMove:Do,exhaustCard:Io,loadCardsData:se,allJsonData:function(){return function(){var e=Object(Ie.a)(Me.a.mark((function e(o){return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(ea.map((function(e){return ta(e)})));case 2:return e.sent.forEach((function(e){200===e.res.status?o(ie({packType:u.MarvelChampions,pack:e.res.data,pack_code:e.packCode})):console.error("Failed to load some json data")})),e.next=6,Promise.all(oa.map((function(e){return ra(e)})));case 6:return e.sent.forEach((function(e){200===e.res.status?o(ie({packType:u.LordOfTheRingsLivingCardGame,pack:e.res.data,pack_code:e.packCode})):console.error("Failed to load some json data")})),e.next=10,Promise.all(O.map((function(e){return aa(e.Title)})));case 10:e.sent.forEach((function(e){200===e.status?o(de({setCode:e.data.Slug,cards:e.data.AllCards})):console.error("Failed to load some json data")}));case 12:case"end":return e.stop()}}),e)})));return function(o){return e.apply(this,arguments)}}()},selectCard:Oo,unselectCard:Po,toggleSelectCard:Mo,selectMultipleCards:Ro,startCardMove:function(e){return function(o){var t=Object(N.a)(Object(N.a)({},e),{},{splitCardId:Object(j.a)()});o(pe(t))}},unselectAllCards:Eo,togglePanMode:Ao,flipCards:Lo,shuffleStack:no,fetchDecklistById:io,updateZoom:G,updatePosition:Q,resetApp:P,addCardStack:function(e){return function(o){var t=Object(N.a)(Object(N.a)({},e),{},{id:Object(j.a)()});o(le(t))}},toggleToken:Bo,adjustCounterToken:Go,pullCardOutOfCardStack:function(e){return function(o){var t=Object(N.a)(Object(N.a)({},e),{},{id:Object(j.a)()});o(ue(t))}},addNewCounter:function(e){return function(o){var t={pos:e,id:Object(j.a)()};o(zo(t))}},updateCounterValue:Yo,removeCounter:Xo,moveCounter:$o,connectToRemoteGame:W,requestResync:z,undo:g.ActionCreators.undo,redo:g.ActionCreators.redo,drawCardsOutOfCardStack:so,setPreviewCardId:V,clearPreviewCard:K,quitGame:Y,updateCounterColor:ot,createDeckFromTxt:function(e){return function(o,t){if(e.gameType===u.MarvelChampions){var r=Be(t()),a=Ge(t());o(ge(co(function(e,o,t,r){var a=r.split("\n").map((function(e){return e.trim()})).filter((function(e){return!!e})),n="",s=a.findIndex((function(e){return e.toLocaleLowerCase().startsWith("pack")}));-1!==s&&(n=a[s-1]);var i=e[n];if(!i)throw new Error("Could not find hero with name ".concat(n));var d=/^\dx/,c=a.filter((function(e){var o;return 0===(null===(o=e.match(d))||void 0===o?void 0:o.index)})),l={};return c.forEach((function(e){var t=parseInt(e[0]);if(Number.isNaN(t))throw new Error("Could not get number from txt file for card");var r=e.split(d)[1].split("(")[0].trim(),a=o[r];l[a.code]=t})),console.log(n),{data:{investigator_code:i.code,slots:l}}}(r,a,e.position,e.txtContents),t(),{gameType:e.gameType,decklistId:-1,position:e.position})))}}},createDeckFromJson:function(e){return function(o,t){e.gameType===u.MarvelChampions&&o(ge(co(JSON.parse(e.jsonContents),t(),{gameType:e.gameType,decklistId:-1,position:e.position})))}},generateGameStateUrl:function(){return function(e,o){var t=o(),r=t.liveState.present.cards.cards,a=t.liveState.present.counters,n=t.game.activeGameType,s=ho.a.crush(JSON.stringify(r)),i=ho.a.crush(JSON.stringify(a));Xr("".concat("".concat(window.location.origin).concat(window.location.pathname),"?gameType=").concat(n,"&cards=").concat(s,"&counters=").concat(i))}},showRadialMenuAtPosition:X,adjustModifier:Wo,clearAllModifiers:Ho})($r),sa=(t(255),t.p+"static/media/card-table-transparent.c608764a.png"),ia=function(e){return Object(r.jsxs)("div",{className:"game-picker",children:[Object(r.jsx)("img",{className:"logo",alt:"cardtable",src:sa}),Object(r.jsxs)(At.a,{className:"select",children:[Object(r.jsx)(Wt.a,{id:"game-picker-label",children:"Select Game"}),Object(r.jsx)(Et.a,{id:"game-picker",labelId:"game-picker-label",onChange:function(o){e.updateActiveGameType(o.target.value)},children:Object.entries(u).map((function(e){var o=Object(y.a)(e,2),t=o[0],a=o[1],n=t.replace(/([A-Z])/g," $1").replace(/^./,(function(e){return e.toUpperCase()}));return Object(r.jsx)(Ft.a,{value:a,children:n})}))})]})]})},da=function(e){var o=e.clearQueryParams;return Object(a.useEffect)((function(){o()}),[o]),e.activeGameType?Object(r.jsx)(na,{currentGameType:e.activeGameType}):ia(e)},ca=Object(d.c)((function(e){return{activeGameType:dr(e)}}),{updateActiveGameType:Z,clearQueryParams:function(){return function(){new URLSearchParams(window.location.search).get("gameType")&&window.history.replaceState({},document.title,window.location.pathname||"/")}}})(da),la=function(){console.log("configuring store. NODE_ENV is production");var e=Object(m.a)({reducer:at,middleware:pt,devTools:!1});return e.subscribe(p()((function(){!function(e){var o=["cardsData"];try{Object.entries(e).forEach((function(e){var t=Object(y.a)(e,2),r=t[0],a=t[1];if(!o.includes(r)){var n=JSON.stringify(a);localStorage.setItem(r,n)}}))}catch(t){console.error("Error writing state to local storage")}}(e.getState())}),1e3)),e}();i.a.render(Object(r.jsx)(n.a.StrictMode,{children:Object(r.jsx)(d.a,{store:la,children:Object(r.jsx)(ca,{})})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var o="".concat("","/service-worker.js");c?(!function(e,o){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(t){var r=t.headers.get("content-type");404===t.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):l(e,o)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(o,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):l(o,e)}))}}()},99:function(e){e.exports=JSON.parse('[{"Title":"Passage Through Mirkwood","Slug":"Passage-Through-Mirkwood","Product":"Core Set","Number":1,"QuestCards":[],"ScenarioCards":[]},{"Title":"Journey Along the Anduin","Slug":"Journey-Along-the-Anduin","Product":"Core Set","Number":2,"QuestCards":[],"ScenarioCards":[]},{"Title":"Escape from Dol Guldur","Slug":"Escape-from-Dol-Guldur","Product":"Core Set","Number":3,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Oath","Slug":"The-Oath","Product":"Two-Player Limited Edition Starter","Number":1,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Caves of Nibin-D\xfbm","Slug":"The-Caves-of-Nibin-D\xfbm","Product":"Two-Player Limited Edition Starter","Number":2,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Hunt for Gollum","Slug":"The-Hunt-for-Gollum","Product":"The Hunt for Gollum","Number":1,"QuestCards":[],"ScenarioCards":[]},{"Title":"Conflict at the Carrock","Slug":"Conflict-at-the-Carrock","Product":"Conflict at the Carrock","Number":2,"QuestCards":[],"ScenarioCards":[]},{"Title":"A Journey to Rhosgobel","Slug":"A-Journey-to-Rhosgobel","Product":"A Journey to Rhosgobel","Number":3,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Hills of Emyn Muil","Slug":"The-Hills-of-Emyn-Muil","Product":"The Hills of Emyn Muil","Number":4,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Dead Marshes","Slug":"The-Dead-Marshes","Product":"The Dead Marshes","Number":5,"QuestCards":[],"ScenarioCards":[]},{"Title":"Return to Mirkwood","Slug":"Return-to-Mirkwood","Product":"Return to Mirkwood","Number":6,"QuestCards":[],"ScenarioCards":[]},{"Title":"Into the Pit","Slug":"Into-the-Pit","Product":"Khazad-d\xfbm","Number":1,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Seventh Level","Slug":"The-Seventh-Level","Product":"Khazad-d\xfbm","Number":2,"QuestCards":[],"ScenarioCards":[]},{"Title":"Flight from Moria","Slug":"Flight-from-Moria","Product":"Khazad-d\xfbm","Number":3,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Redhorn Gate","Slug":"The-Redhorn-Gate","Product":"The Redhorn Gate","Number":1,"QuestCards":[],"ScenarioCards":[]},{"Title":"Road to Rivendell","Slug":"Road-to-Rivendell","Product":"Road to Rivendell","Number":2,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Watcher in the Water","Slug":"The-Watcher-in-the-Water","Product":"The Watcher in the Water","Number":3,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Long Dark","Slug":"The-Long-Dark","Product":"The Long Dark","Number":4,"QuestCards":[],"ScenarioCards":[]},{"Title":"Foundations of Stone","Slug":"Foundations-of-Stone","Product":"Foundations of Stone","Number":5,"QuestCards":[],"ScenarioCards":[]},{"Title":"Shadow and Flame","Slug":"Shadow-and-Flame","Product":"Shadow and Flame","Number":6,"QuestCards":[],"ScenarioCards":[]},{"Title":"Peril in Pelargir","Slug":"Peril-in-Pelargir","Product":"Heirs of N\xfamenor","Number":1,"QuestCards":[],"ScenarioCards":[]},{"Title":"Into Ithilien","Slug":"Into-Ithilien","Product":"Heirs of N\xfamenor","Number":2,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Siege of Cair Andros","Slug":"The-Siege-of-Cair-Andros","Product":"Heirs of N\xfamenor","Number":3,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Steward\'s Fear","Slug":"The-Steward\'s-Fear","Product":"The Steward\'s Fear","Number":1,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Dr\xfaadan Forest","Slug":"The-Dr\xfaadan-Forest","Product":"The Dr\xfaadan Forest","Number":2,"QuestCards":[],"ScenarioCards":[]},{"Title":"Encounter at Amon D\xeen","Slug":"Encounter-at-Amon-D\xeen","Product":"Encounter at Amon D\xeen","Number":3,"QuestCards":[],"ScenarioCards":[]},{"Title":"Assault on Osgiliath","Slug":"Assault-on-Osgiliath","Product":"Assault on Osgiliath","Number":4,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Blood of Gondor","Slug":"The-Blood-of-Gondor","Product":"The Blood of Gondor","Number":5,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Morgul Vale","Slug":"The-Morgul-Vale","Product":"The Morgul Vale","Number":6,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Fords of Isen","Slug":"The-Fords-of-Isen","Product":"The Voice of Isengard","Number":1,"QuestCards":[],"ScenarioCards":[]},{"Title":"To Catch an Orc","Slug":"To-Catch-an-Orc","Product":"The Voice of Isengard","Number":2,"QuestCards":[],"ScenarioCards":[]},{"Title":"Into Fangorn","Slug":"Into-Fangorn","Product":"The Voice of Isengard","Number":3,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Dunland Trap","Slug":"The-Dunland-Trap","Product":"The Dunland Trap","Number":1,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Three Trials","Slug":"The-Three-Trials","Product":"The Three Trials","Number":2,"QuestCards":[],"ScenarioCards":[]},{"Title":"Trouble in Tharbad","Slug":"Trouble-in-Tharbad","Product":"Trouble in Tharbad","Number":3,"QuestCards":[],"ScenarioCards":[]},{"Title":"The N\xeen-in-Eilph","Slug":"The-N\xeen-in-Eilph","Product":"The N\xeen-in-Eilph","Number":4,"QuestCards":[],"ScenarioCards":[]},{"Title":"Celebrimbor\'s Secret","Slug":"Celebrimbor\'s-Secret","Product":"Celebrimbor\'s Secret","Number":5,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Antlered Crown","Slug":"The-Antlered-Crown","Product":"The Antlered Crown","Number":6,"QuestCards":[],"ScenarioCards":[]},{"Title":"Intruders in Chetwood","Slug":"Intruders-in-Chetwood","Product":"The Lost Realm","Number":1,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Weather Hills","Slug":"The-Weather-Hills","Product":"The Lost Realm","Number":2,"QuestCards":[],"ScenarioCards":[]},{"Title":"Deadmen\'s Dike","Slug":"Deadmen\'s-Dike","Product":"The Lost Realm","Number":3,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Wastes of Eriador","Slug":"The-Wastes-of-Eriador","Product":"The Wastes of Eriador","Number":1,"QuestCards":[],"ScenarioCards":[]},{"Title":"Escape from Mount Gram","Slug":"Escape-from-Mount-Gram","Product":"Escape from Mount Gram","Number":2,"QuestCards":[],"ScenarioCards":[]},{"Title":"Across the Ettenmoors","Slug":"Across-the-Ettenmoors","Product":"Across the Ettenmoors","Number":3,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Treachery of Rhudaur","Slug":"The-Treachery-of-Rhudaur","Product":"Treachery of Rhudaur","Number":4,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Battle of Carn D\xfbm","Slug":"The-Battle-of-Carn-D\xfbm","Product":"The Battle of Carn D\xfbm","Number":5,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Dread Realm","Slug":"The-Dread-Realm","Product":"The Dread Realm","Number":6,"QuestCards":[],"ScenarioCards":[]},{"Title":"Voyage Across Belegaer","Slug":"Voyage-Across-Belegaer","Product":"The Grey Havens","Number":1,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Fate of N\xfamenor","Slug":"The-Fate-of-N\xfamenor","Product":"The Grey Havens","Number":2,"QuestCards":[],"ScenarioCards":[]},{"Title":"Raid on the Grey Havens","Slug":"Raid-on-the-Grey-Havens","Product":"The Grey Havens","Number":3,"QuestCards":[],"ScenarioCards":[]},{"Title":"Flight of the Stormcaller","Slug":"Flight-of-the-Stormcaller","Product":"Flight of the Stormcaller","Number":1,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Thing in the Depths","Slug":"The-Thing-in-the-Depths","Product":"The Thing in the Depths","Number":2,"QuestCards":[],"ScenarioCards":[]},{"Title":"Temple of the Deceived","Slug":"Temple-of-the-Deceived","Product":"Temple of the Deceived","Number":3,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Drowned Ruins","Slug":"The-Drowned-Ruins","Product":"The Drowned Ruins","Number":4,"QuestCards":[],"ScenarioCards":[]},{"Title":"A Storm on Cobas Haven","Slug":"A-Storm-on-Cobas-Haven","Product":"A Storm on Cobas Haven","Number":5,"QuestCards":[],"ScenarioCards":[]},{"Title":"The City of Corsairs","Slug":"The-City-of-Corsairs","Product":"The City of Corsairs","Number":6,"QuestCards":[],"ScenarioCards":[]},{"Title":"Escape from Umbar","Slug":"Escape-from-Umbar","Product":"The Sands of Harad","Number":1,"QuestCards":[],"ScenarioCards":[]},{"Title":"Desert Crossing","Slug":"Desert-Crossing","Product":"The Sands of Harad","Number":2,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Long Arm of Mordor","Slug":"The-Long-Arm-of-Mordor","Product":"The Sands of Harad","Number":3,"QuestCards":[],"ScenarioCards":[]},{"Title":"The M\xfbmakil","Slug":"The-M\xfbmakil","Product":"The M\xfbmakil","Number":1,"QuestCards":[],"ScenarioCards":[]},{"Title":"Race Across Harad","Slug":"Race-Across-Harad","Product":"Race Across Harad","Number":2,"QuestCards":[],"ScenarioCards":[]},{"Title":"Beneath the Sands","Slug":"Beneath-the-Sands","Product":"Beneath the Sands","Number":3,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Black Serpent","Slug":"The-Black-Serpent","Product":"The Black Serpent","Number":4,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Dungeons of Cirith Gurat","Slug":"The-Dungeons-of-Cirith-Gurat","Product":"The Dungeons of Cirith Gurat","Number":5,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Crossings of Poros","Slug":"The-Crossings-of-Poros","Product":"The Crossings of Poros","Number":6,"QuestCards":[],"ScenarioCards":[]},{"Title":"Journey Up the Anduin","Slug":"Journey-Up-the-Anduin","Product":"The Wilds of Rhovanion","Number":1,"QuestCards":[],"ScenarioCards":[]},{"Title":"Lost in Mirkwood","Slug":"Lost-in-Mirkwood","Product":"The Wilds of Rhovanion","Number":2,"QuestCards":[],"ScenarioCards":[]},{"Title":"The King\'s Quest","Slug":"The-King\'s-Quest","Product":"The Wilds of Rhovanion","Number":3,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Withered Heath","Slug":"The-Withered-Heath","Product":"The Withered Heath","Number":4,"QuestCards":[],"ScenarioCards":[]},{"Title":"Roam Across Rhovanion","Slug":"Roam-Across-Rhovanion","Product":"Roam Across Rhovanion","Number":5,"QuestCards":[],"ScenarioCards":[]},{"Title":"Fire in the Night","Slug":"Fire-in-the-Night","Product":"Fire in the Night","Number":6,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Ghost of Framsburg","Slug":"The-Ghost-of-Framsburg","Product":"The Ghost of Framsburg","Number":7,"QuestCards":[],"ScenarioCards":[]},{"Title":"Mount Gundabad","Slug":"Mount-Gundabad","Product":"Mount Gundabad","Number":8,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Fate of Wilderland","Slug":"The-Fate-of-Wilderland","Product":"The Fate of Wilderland","Number":9,"QuestCards":[],"ScenarioCards":[]},{"Title":"The River Running","Slug":"The-River-Running","Product":"A Shadow in the East","Number":1,"QuestCards":[],"ScenarioCards":[]},{"Title":"Danger in Dorwinion","Slug":"Danger-in-Dorwinion","Product":"A Shadow in the East","Number":2,"QuestCards":[],"ScenarioCards":[]},{"Title":"Temple of Doom","Slug":"Temple-of-Doom","Product":"A Shadow in the East","Number":3,"QuestCards":[],"ScenarioCards":[]},{"Title":"Wrath and Ruin","Slug":"Wrath-and-Ruin","Product":"Wrath and Ruin","Number":1,"QuestCards":[],"ScenarioCards":[]},{"Title":"The City of Ulfast","Slug":"The-City-of-Ulfast","Product":"The City of Ulfast","Number":2,"QuestCards":[],"ScenarioCards":[]},{"Title":"Challenge of the Wainriders","Slug":"Challenge-of-the-Wainriders","Product":"Challenge of the Wainriders","Number":3,"QuestCards":[],"ScenarioCards":[]},{"Title":"Under the Ash Mountains","Slug":"Under-the-Ash-Mountains","Product":"Under the Ash Mountains","Number":4,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Land of Sorrow","Slug":"The-Land-of-Sorrow","Product":"The Land of Sorrow","Number":5,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Fortress of Nurn","Slug":"The-Fortress-of-Nurn","Product":"The Fortress of Nurn","Number":6,"QuestCards":[],"ScenarioCards":[]},{"Title":"We Must Away, Ere Break of Day","Slug":"We-Must-Away,-Ere-Break-of-Day","Product":"The Hobbit: Over Hill and Under Hill","Number":1,"QuestCards":[],"ScenarioCards":[]},{"Title":"Over the Misty Mountains Grim","Slug":"Over-the-Misty-Mountains-Grim","Product":"The Hobbit: Over Hill and Under Hill","Number":2,"QuestCards":[],"ScenarioCards":[]},{"Title":"Dungeons Deep and Caverns Dim","Slug":"Dungeons-Deep-and-Caverns-Dim","Product":"The Hobbit: Over Hill and Under Hill","Number":3,"QuestCards":[],"ScenarioCards":[]},{"Title":"Flies and Spiders","Slug":"Flies-and-Spiders","Product":"The Hobbit: On the Doorstep","Number":4,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Lonely Mountain","Slug":"The-Lonely-Mountain","Product":"The Hobbit: On the Doorstep","Number":5,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Battle of Five Armies","Slug":"The-Battle-of-Five-Armies","Product":"The Hobbit: On the Doorstep","Number":6,"QuestCards":[],"ScenarioCards":[]},{"Title":"A Shadow of the Past","Slug":"A-Shadow-of-the-Past","Product":"The Black Riders","Number":1,"QuestCards":[],"ScenarioCards":[]},{"Title":"A Knife in the Dark","Slug":"A-Knife-in-the-Dark","Product":"The Black Riders","Number":2,"QuestCards":[],"ScenarioCards":[]},{"Title":"Flight to the Ford","Slug":"Flight-to-the-Ford","Product":"The Black Riders","Number":3,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Ring Goes South","Slug":"The-Ring-Goes-South","Product":"The Road Darkens","Number":4,"QuestCards":[],"ScenarioCards":[]},{"Title":"Journey in the Dark","Slug":"Journey-in-the-Dark","Product":"The Road Darkens","Number":5,"QuestCards":[],"ScenarioCards":[]},{"Title":"Breaking of the Fellowship","Slug":"Breaking-of-the-Fellowship","Product":"The Road Darkens","Number":6,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Uruk-hai","Slug":"The-Uruk-hai","Product":"The Treason of Saruman","Number":7,"QuestCards":[],"ScenarioCards":[]},{"Title":"Helm\'s Deep","Slug":"Helm\'s-Deep","Product":"The Treason of Saruman","Number":8,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Road to Isengard","Slug":"The-Road-to-Isengard","Product":"The Treason of Saruman","Number":9,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Passage of the Marshes","Slug":"The-Passage-of-the-Marshes","Product":"The Land of Shadow","Number":10,"QuestCards":[],"ScenarioCards":[]},{"Title":"Journey to the Cross-roads","Slug":"Journey-to-the-Cross-roads","Product":"The Land of Shadow","Number":11,"QuestCards":[],"ScenarioCards":[]},{"Title":"Shelob\'s Lair","Slug":"Shelob\'s-Lair","Product":"The Land of Shadow","Number":12,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Passing of the Grey Company","Slug":"The-Passing-of-the-Grey-Company","Product":"The Flame of the West","Number":13,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Siege of Gondor","Slug":"The-Siege-of-Gondor","Product":"The Flame of the West","Number":14,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Battle of the Pelennor Fields","Slug":"The-Battle-of-the-Pelennor-Fields","Product":"The Flame of the West","Number":15,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Tower of Cirith Ungol","Slug":"The-Tower-of-Cirith-Ungol","Product":"The Mountain of Fire","Number":16,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Black Gate Opens","Slug":"The-Black-Gate-Opens","Product":"The Mountain of Fire","Number":17,"QuestCards":[],"ScenarioCards":[]},{"Title":"Mount Doom","Slug":"Mount-Doom","Product":"The Mountain of Fire","Number":18,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Massing at Osgiliath","Slug":"The-Massing-at-Osgiliath","Product":"2011","Number":1,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Battle of Lake-town","Slug":"The-Battle-of-Lake-town","Product":"2012","Number":2,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Stone of Erech","Slug":"The-Stone-of-Erech","Product":"2013","Number":3,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Old Forest","Slug":"The-Old-Forest","Product":"2014","Number":4,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Ruins of Belegost","Slug":"The-Ruins-of-Belegost","Product":"2015","Number":6,"QuestCards":[],"ScenarioCards":[]},{"Title":"Fog on the Barrow-downs","Slug":"Fog-on-the-Barrow-downs","Product":"2014","Number":5,"QuestCards":[],"ScenarioCards":[]},{"Title":"Murder at the Prancing Pony","Slug":"Murder-at-the-Prancing-Pony","Product":"2015","Number":6,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Siege of Ann\xfaminas","Slug":"The-Siege-of-Ann\xfaminas","Product":"2016","Number":7,"QuestCards":[],"ScenarioCards":[]},{"Title":"Attack on Dol Guldur","Slug":"Attack-on-Dol-Guldur","Product":"2017","Number":8,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Hunt for the Dreadnaught","Slug":"The-Hunt-for-the-Dreadnaught","Product":"The Hunt for the Dreadnaught","Number":1,"QuestCards":[],"ScenarioCards":[]},{"Title":"Hunting of the Wolf","Slug":"Hunting-of-the-Wolf","Product":"First Age","Number":1,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Isle of Werewolves","Slug":"The-Isle-of-Werewolves","Product":"First Age","Number":2,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Seat of Morgoth","Slug":"The-Seat-of-Morgoth","Product":"First Age","Number":3,"QuestCards":[],"ScenarioCards":[]},{"Title":"Trial Upon the Marches","Slug":"Trial-Upon-the-Marches","Product":"Trial Upon the Marches","Number":1,"QuestCards":[],"ScenarioCards":[]},{"Title":"Among the Outlaws","Slug":"Among-the-Outlaws","Product":"Among the Outlaws","Number":2,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Betrayal of M\xeem","Slug":"The-Betrayal-of-M\xeem","Product":"The Betrayal of M\xeem","Number":3,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Fall of Nargothrond","Slug":"The-Fall-of-Nargothrond","Product":"The Fall of Nargothrond","Number":4,"QuestCards":[],"ScenarioCards":[]},{"Title":"Ambush at Erelas","Slug":"Ambush-at-Erelas","Product":"Children of Eorl","Number":1,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Battle for the Beacon","Slug":"The-Battle-for-the-Beacon","Product":"Children of Eorl","Number":2,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Horse Lord\'s Ire","Slug":"The-Horse-Lord\'s-Ire","Product":"Children of Eorl","Number":3,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Aldburg Plot","Slug":"The-Aldburg-Plot","Product":"The Aldburg Plot","Number":1,"QuestCards":[],"ScenarioCards":[]},{"Title":"The Scouring of the Shire","Slug":"The-Scouring-of-the-Shire","Product":"The Scouring of the Shire","Number":1,"QuestCards":[],"ScenarioCards":[]}]')}},[[256,1,2]]]);
//# sourceMappingURL=main.ad1507b6.chunk.js.map